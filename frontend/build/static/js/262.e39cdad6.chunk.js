"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[262],{3750:function(e,s,n){n.d(s,{$:function(){return q},h:function(){return I}});var t=n(2982),r=n(1413),a=n(885),o=n(2791),i=n(1080),c=n(5454),l=n(4581),d=n(2202),u="ui_header__TWALk",m="ui_siteName__lSnzc",h="ui_logo__k0mOL",p="ui_logoutBtn__9voFZ",f="ui_accountModal__Iag0i",g="ui_accountModalBackdrop__2X0bM",x="ui_footer__+k+eX",j=n(8750),y=n(3504),b=n(6871),_=n(1134),v=n(3806),w=n(629),N=n(8300),S=n(184),Z=function(e){e.filters;var s=e.setFilters,n=(0,_.cI)(),l=n.handleSubmit,d=n.control,u=n.watch,m=n.setValue,h=(0,o.useState)(!1),p=(0,a.Z)(h,2),f=p[0],g=p[1],x=(0,o.useState)([]),y=(0,a.Z)(x,2),b=y[0],Z=y[1],I=(0,c.i)(i.Hv.homeLocations).get,C=u("location");return(0,o.useEffect)((function(){if(C){var e=C.split("__"),n=(0,a.Z)(e,3),t=n[0],o=n[1],i=n[2];s((function(e){return JSON.parse(JSON.stringify((0,r.Z)((0,r.Z)((0,r.Z)({},e),{},{address_city:void 0,address_state:void 0,address_country:void 0},"city"===t&&{address_city:i,address_state:o}),"state"===t&&{address_country:o,address_state:i})))}))}else s((function(e){return JSON.parse(JSON.stringify((0,r.Z)((0,r.Z)({},e),{},{address_city:void 0,address_state:void 0,address_country:void 0})))}))}),[C]),(0,o.useEffect)((function(){I().then((function(e){var s=e.data;s.success&&Z(s.data)}))}),[]),(0,S.jsx)("form",{onSubmit:l((function(e){})),children:(0,S.jsx)(v.OC,{control:d,name:"location",loading:!0,startAdronment:(0,S.jsx)(w.Ts9,{}),options:[f?null:{label:"Use My Location",value:"userLocation"}].concat((0,t.Z)(b.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{value:"".concat(e.type,"__").concat("city"===e.type?"".concat(e.state,"__"):"".concat(e.country,"__")).concat(e.label)})})))).filter(Boolean),onChange:function(e){"userLocation"===e.value?(0,N.wV)().then((function(e){var s=e.position,n=e.error;if(n)return(0,j.N)({type:"error",message:n.message});var t=s.latitude+","+s.longitude;I({query:{latlng:t}}).then((function(e){var s=e.data;if(s.success)if(s.match){var n=s.match;g(!0),m("location","".concat(n.type,"__").concat("city"===n.type?"".concat(n.state,"__"):"".concat(n.country,"__")).concat(n.label))}else m("location","");else m("location",""),(0,j.N)({type:"error",message:s.message})}))})).catch((function(e){m("location",""),(0,j.N)({type:"error",message:e.message})})):g(!1)},renderOption:function(e){return"userLocation"===e.value?(0,S.jsxs)("div",{style:{fontWeight:600,color:"#068bc9"},children:[(0,S.jsx)("p",{children:e.label}),(0,S.jsx)("p",{style:{opacity:.8},children:(0,S.jsx)("small",{children:e.country||e.state})})]}):(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{children:e.label}),(0,S.jsx)("p",{style:{opacity:.8},children:(0,S.jsx)("small",{children:e.country||e.state})})]})}})})},I=function(e){var s,n,t=e.home,r=e.filters,x=e.setFilters,_=(0,o.useContext)(l.D),v=_.business,w=_.setBusiness,N=_.user,I=_.setUser,C=_.setConfig,q=_.userType,H=(0,o.useState)(!1),k=(0,a.Z)(H,2),P=k[0],T=k[1],R=(0,o.useState)({}),U=(0,a.Z)(R,2),B=U[0],L=U[1],A=(0,o.useRef)(),D=(0,c.i)(i.Hv["".concat(q,"Logout")]).post,F=(0,b.s0)();return(0,o.useEffect)((function(){var e=A.current.getBoundingClientRect();L({top:e.y+e.height+6,right:window.innerWidth-(e.x+e.width)})}),[]),(0,S.jsxs)("div",{className:u,children:[(0,S.jsx)(y.rU,{to:i.Hb.home,children:(0,S.jsxs)("div",{className:m,children:[(null===N||void 0===N?void 0:N.logo)&&(0,S.jsx)("img",{className:h,src:N.logo}),(null===v||void 0===v||null===(s=v.business)||void 0===s?void 0:s.logo)&&(0,S.jsx)("img",{className:h,src:v.business.logo}),(0,S.jsx)("h2",{children:(null===v||void 0===v||null===(n=v.business)||void 0===n?void 0:n.name)||(null===N||void 0===N?void 0:N.name)||(t?"Comify":"Comify Studio")})]})}),t&&(0,S.jsx)(Z,{filters:r,setFilters:x}),(0,S.jsx)("button",{ref:A,className:"clear ".concat(p),title:"Log out",onClick:function(e){e.stopPropagation(),T(!P)},children:(0,S.jsx)(d.wzp,{})}),(0,S.jsx)(j.u,{open:P,setOpen:T,onBackdropClick:function(){return T(!1)},className:f,onOutsideClick:function(){T(!1)},backdropClass:g,style:B,children:(0,S.jsxs)("ul",{children:[N&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("li",{style:{pointerEvents:"none"},children:[N.name,(0,S.jsx)("p",{children:(0,S.jsx)("small",{children:N.phone})})]}),(0,S.jsx)("hr",{})]}),"admin"===(null===N||void 0===N?void 0:N.userType)&&v&&!t&&(0,S.jsx)("li",{onClick:function(){T(!1),w(null),F(i.Hb.businesses)},children:"Switch Business"}),N?(0,S.jsx)(y.rU,{to:i.Hb.dashboard.replace("*","")+("admin"===q?"businesses":"quotes"),children:(0,S.jsx)("li",{children:"Dashboard"})}):(0,S.jsx)("a",{href:"".concat("https://apps.infinai.in","/signin?_target=").concat(window.location.origin,"/dashboard"),children:(0,S.jsx)("li",{children:"Sign in / Sign up"})}),N&&(0,S.jsx)("li",{onClick:function(){D().then((function(e){e.data.success&&(I(null),C(null),F(i.Hb.home))}))},children:"Logout"})]})})]})},C=n(6459),q=function(e){return(0,C.Z)(e),(0,S.jsxs)("footer",{className:x,children:["\xa9 ",(new Date).getFullYear()," Comify Technologies, All Rights Reserved."]})}},4262:function(e,s,n){n.r(s),n.d(s,{default:function(){return T}});var t=n(2791),r=n(4581),a=n(6871),o=n(1413),i=n(1134),c=n(3806),l=n(3504),d=n(5454),u=n(1080),m=n(8750),h=n(1570),p="auth_container__ilIh5",f="auth_background__8x-4v",g="auth_illustration__VmNVC",x="auth_userTypes__AtVTR",j="auth_active__1Vjq2",y="auth_resetPasswordLink__XKyqM",b="auth_resend__F2k5+",_=n(184),v=h.Ry({phone:h.Z_().required("Required"),name:h.Z_().required("Required"),password:h.Z_().min(8,"Password must be 8 characters or longer").required("Required")}),w=function(){var e=(0,t.useContext)(r.D),s=e.setUser,n=e.userType,h=e.setUserType,p=(0,i.cI)({resolver:(0,d.y)(v)}),f=p.handleSubmit,y=p.register,b=p.formState.errors,w=(0,d.i)(u.Hv["".concat(n,"SignUp")]),N=w.post,S=w.loading,Z=(0,a.s0)();return(0,_.jsxs)("form",{className:"grid gap-1 p-1 m-a",autoComplete:"off",onSubmit:f((function(e){N({phone:e.phone,password:e.password,name:e.name}).then((function(e){var n=e.data;if(n.success){s(n.data),localStorage.setItem("userType",n.data.userType);var t="admin"===n.data.userType?"/dashboard/businesses":"/dashboard/quotes";Z(t,{replace:!0})}else(0,m.N)({type:"error",message:n.message})}))})),children:[(0,_.jsx)("img",{className:g,src:"/assets/comify.png"}),(0,_.jsxs)("div",{className:"grid gap-1",children:[(0,_.jsx)("h1",{className:"text-center",children:"Comify Studio"}),(0,_.jsx)("div",{className:"flex justify-space-between align-center",children:(0,_.jsx)("h2",{children:"Sign Up"})}),(0,_.jsxs)("ul",{className:x,children:[(0,_.jsx)("li",{className:"company"===n?j:"",onClick:function(){h("company"),localStorage.setItem("userType","company")},children:"Business"}),(0,_.jsx)("li",{className:"admin"===n?j:"",onClick:function(){h("admin"),localStorage.setItem("userType","admin")},children:"Admin"}),(0,_.jsx)("li",{className:"staff"===n?j:"",onClick:function(){h("staff"),localStorage.setItem("userType","staff")},children:"Staff"})]}),(0,_.jsx)(c.II,(0,o.Z)((0,o.Z)({label:"Phone",required:!0},y("phone")),{},{error:b.phone})),(0,_.jsx)(c.II,(0,o.Z)((0,o.Z)({label:"Name",required:!0},y("name")),{},{error:b.name})),(0,_.jsx)(c.II,(0,o.Z)((0,o.Z)({label:"Password",required:!0,type:"password"},y("password")),{},{error:b.password})),(0,_.jsx)("button",{className:"btn",disabled:S,children:"Sign Up"}),(0,_.jsx)(l.rU,{to:u.Hb.signIn,children:"Already have an account"})]})]})},N=n(885),S=h.Ry({phone:h.Z_().required("Required"),password:h.Z_().required("Required")}),Z=function(){var e=(0,t.useContext)(r.D),s=e.setUser,n=e.userType,h=e.setUserType,p=(0,i.cI)({resolver:(0,d.y)(S)}),f=p.handleSubmit,b=p.register,v=p.formState.errors,w=(0,a.TH)(),Z=(0,a.s0)(),I=(0,t.useState)(!1),C=(0,N.Z)(I,2),q=C[0],H=C[1],k=(0,d.i)(u.Hv["".concat(n,"SignIn")]),P=k.post,T=k.loading;return(0,_.jsxs)("form",{className:"grid gap-1 p-1 m-a",onSubmit:f((function(e){H(!1),P({phone:e.phone,password:e.password}).then((function(e){var n=e.data;if(n.success){s(n.data),localStorage.setItem("userType",n.data.userType);var t=["/signin","/signup"].includes(w.pathname)?u.Hb.home:w.pathname||u.Hb.home;Z(t,{replace:!0})}else H(!0)})).catch((function(e){return(0,m.N)({type:"error",message:e.message})}))})),children:[(0,_.jsx)("img",{className:g,src:"/assets/comify.png"}),(0,_.jsxs)("div",{className:"grid gap-1",children:[(0,_.jsx)("h1",{className:"text-center",children:"Comify Studio"}),(0,_.jsx)("div",{className:"flex justify-space-between align-center",children:(0,_.jsx)("h2",{children:"Sign In as"})}),(0,_.jsxs)("ul",{className:x,children:[(0,_.jsx)("li",{className:"company"===n?j:"",onClick:function(){h("company"),localStorage.setItem("userType","company")},children:"Business"}),(0,_.jsx)("li",{className:"admin"===n?j:"",onClick:function(){h("admin"),localStorage.setItem("userType","admin")},children:"Admin"}),(0,_.jsx)("li",{className:"staff"===n?j:"",onClick:function(){h("staff"),localStorage.setItem("userType","staff")},children:"Staff"})]}),q&&(0,_.jsx)("p",{className:"error",children:"Invalid credentials"}),(0,_.jsx)(c.II,(0,o.Z)((0,o.Z)({required:!0,label:"Phone"},b("phone")),{},{error:v.phone})),(0,_.jsx)(c.II,(0,o.Z)((0,o.Z)({required:!0,label:"Password",type:"password"},b("password")),{},{error:v.password})),(0,_.jsx)(l.rU,{className:y,to:u.Hb.resetPassword,children:"Forgot Password?"}),(0,_.jsx)("button",{className:"btn",disabled:T,children:"Sign In"}),(0,_.jsx)(l.rU,{to:u.Hb.signUp,children:"Create New Account"})]})]})},I=h.Ry({phone:h.Z_().required("Required")}),C=h.Ry({code:h.Z_().required("Required"),password:h.Z_().min(8,"Password must be 8 characters or longer").required("Required"),confirmPassword:h.Z_().required("Required").oneOf([h.iH("password")],"Password does not match")}),q=function(e){var s=e.onSuccess,n=(0,d.i)(u.Hv.forgotPassword),t=n.post,r=n.loading,a=(0,i.cI)({resolver:(0,d.y)(I)}),h=a.handleSubmit,p=a.register,f=a.formState.errors;return(0,_.jsxs)("form",{className:"grid gap-1 p-1 m-a",onSubmit:h((function(e){t({phone:e.phone}).then((function(e){var n=e.data;n.success?((0,m.N)({type:"information",message:n.message}),s(n.data)):(0,m.N)({type:"error",message:n.message})}))})),children:[(0,_.jsx)("img",{className:g,src:"/assets/comify.png"}),(0,_.jsxs)("div",{className:"grid gap-1",children:[(0,_.jsx)("h1",{className:"text-center",children:"Comify Studio"}),(0,_.jsx)("h2",{children:"Reset Password"}),(0,_.jsx)(c.II,(0,o.Z)((0,o.Z)({label:"Phone",required:!0},p("phone")),{},{error:f.phone})),(0,_.jsx)("button",{className:"btn",disabled:r,children:"Next"}),(0,_.jsx)(l.rU,{to:u.Hb.signIn,children:"Back to Login"})]})]})},H=function(e){var s=e.setPhone,n=e.phone,r=e.setStep,a=e.timeout,h=e.setTimeout,p=e.onSuccess,f=(0,d.i)(u.Hv.forgotPassword),x=f.post,j=f.loading,y=(0,d.i)(u.Hv.resetPassword),v=y.post,w=y.loading,N=(0,i.cI)({resolver:(0,d.y)(C)}),S=N.handleSubmit,Z=N.register,I=N.formState.errors;return(0,t.useEffect)((function(){n||r(1)}),[n]),(0,_.jsxs)("form",{className:"grid gap-1 p-1 m-a",onSubmit:S((function(e){v({phone:n,password:e.password,code:e.code}).then((function(e){var s=e.data;s.success?p(s):(0,m.N)({type:"error",message:s.message})}))})),children:[(0,_.jsx)("img",{className:g,src:"/assets/comify.png"}),(0,_.jsxs)("div",{className:"grid gap-1",children:[(0,_.jsx)("h1",{className:"text-center",children:"Comify"}),(0,_.jsx)("h2",{children:"Reset Password"}),(0,_.jsxs)("p",{children:["Please enter the 6 digit code sent to ",n,"."]}),(0,_.jsx)(c.II,(0,o.Z)((0,o.Z)({type:"number",label:"Code",required:!0},Z("code")),{},{error:I.code})),(0,_.jsxs)("p",{className:b,children:["Didn't recieve the Code?"," ",a?(0,_.jsxs)(_.Fragment,{children:["Please wait"," ",(0,_.jsx)(c.IT,{time:(new Date).setSeconds((new Date).getSeconds()+a),format:"mm:ss",onEnd:function(){return h(null)}})]}):(0,_.jsx)("button",{type:"button",onClick:function(){x({phone:n}).then((function(e){var n=e.data;n.success?(s(n.data.phone),h(n.data.timeout)):(0,m.N)({type:"error",message:n.message})}))},disabled:j,children:"Resend"})]}),(0,_.jsx)("hr",{}),(0,_.jsx)(c.II,(0,o.Z)((0,o.Z)({label:"New Password",type:"password",required:!0},Z("password")),{},{error:I.password})),(0,_.jsx)(c.II,(0,o.Z)((0,o.Z)({label:"Config Password",type:"password",required:!0},Z("confirmPassword")),{},{error:I.confirmPassword})),(0,_.jsx)("button",{className:"btn",type:"submit",disabled:j||w,children:"Submit"}),(0,_.jsx)(l.rU,{to:u.Hb.signIn,children:"Back to Login"})]})]})},k=function(){var e=(0,t.useState)(1),s=(0,N.Z)(e,2),n=s[0],r=s[1],o=(0,t.useState)(null),i=(0,N.Z)(o,2),c=i[0],l=i[1],d=(0,t.useState)(null),h=(0,N.Z)(d,2),p=h[0],f=h[1],g=(0,a.s0)();return(0,_.jsxs)(_.Fragment,{children:[1===n&&(0,_.jsx)(q,{onSuccess:function(e){l(e.phone),f(e.timeout),r(2)}}),2===n&&(0,_.jsx)(H,{setPhone:l,phone:c,setStep:r,timeout:p,setTimeout:f,onSuccess:function(e){(0,m.N)({type:"information",message:e.message,callback:function(){return g(u.Hb.signIn)}})}})]})},P=n(3750),T=function(){var e=(0,t.useContext)(r.D).user,s=(0,a.s0)(),n=(0,a.TH)();return(0,t.useEffect)((function(){e&&s(u.Hb.dashboard.replace("/*",""),{replace:!0})}),[e,n]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(P.h,{}),(0,_.jsxs)("div",{className:p,children:[(0,_.jsxs)(a.Z5,{children:[(0,_.jsx)(a.AW,{path:u.Hb.signUp,element:(0,_.jsx)(w,{})}),(0,_.jsx)(a.AW,{path:u.Hb.signIn,element:(0,_.jsx)(Z,{})}),(0,_.jsx)(a.AW,{path:u.Hb.resetPassword,element:(0,_.jsx)(k,{})})]}),(0,_.jsx)("img",{className:f,src:"https://images.unsplash.com/photo-1522441815192-d9f04eb0615c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=".concat(window.innerWidth,"&h=").concat(window.innerHeight,"&q=100")})]}),(0,_.jsx)(P.$,{})]})}}}]);
//# sourceMappingURL=262.e39cdad6.chunk.js.map