"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[391],{8391:function(e,n,t){t.r(n),t.d(n,{default:function(){return j}});var a=t(2982),s=t(885),r=t(2791),i=t(5470),o=t(2202),l=t(8750),c={content:"emps_content__hAOtQ",emps:"emps_emps__pXTP3",addEmpForm:"emps_addEmpForm__cV7E0",empDetail:"emps_empDetail__4rTsv",box:"emps_box__3ohaf",mainForm:"emps_mainForm__0sQ-G",head:"emps_head__LiatF"},u=t(5454),d=t(1080),m=t(1413),p=t(1134),f=t(1570),_=t(184),h=f.Ry({employee:f.Z_().required(),roles:f.IX().of(f.Z_())}),x=function(e){var n=e.edit,t=e.onSuccess,a=(0,p.cI)({resolver:(0,u.y)(h)}),s=a.handleSubmit,o=a.reset,f=a.control,x=(0,u.i)(d.Hv.employees),v=x.put,b=x.loading;return(0,r.useEffect)((function(){var e;o({employee:(null===n||void 0===n?void 0:n._id)||"",roles:(null===n||void 0===n||null===(e=n.roles)||void 0===e?void 0:e.map((function(e){return e._id})))||[]})}),[n]),(0,_.jsx)("div",{className:"grid gap-1 p-1 ".concat(c.addEmpForm),children:(0,_.jsxs)("form",{onSubmit:s((function(e){v(e).then((function(e){var n=e.data;if(!n.success)return(0,l.N)({type:"error",message:n.message});t(n.data)})).catch((function(e){return(0,l.N)({type:"error",message:e.message})}))})),className:"".concat(c.mainForm," grid gap-1"),children:[(0,_.jsx)(i.OC,{disabled:null===n||void 0===n?void 0:n._id,control:f,label:"Staff",url:d.Hv.staffs,getQuery:function(e,n){return(0,m.Z)((0,m.Z)({},e&&{name:e}),n&&{_id:n})},handleData:function(e){return{label:e.name,value:e._id}},name:"employee",formOptions:{required:!0}}),(0,_.jsx)(i.OC,{control:f,label:"Role",url:d.Hv.roles,getQuery:function(e,n){return(0,m.Z)((0,m.Z)({},e&&{name:e}),n&&{_id:n})},handleData:function(e){return{label:e.name,value:e._id}},multiple:!0,name:"roles",formOptions:{required:!0}}),(0,_.jsx)("div",{className:"btns",children:(0,_.jsx)("button",{className:"btn",disabled:b,children:n?"Update":"Submit"})})]})})},v=t(4581),b=t(5804),g=t(657),j=function(e){var n=e.setSidebarOpen,t=(0,r.useContext)(v.D).checkPermission,m=(0,r.useState)([]),p=(0,s.Z)(m,2),f=p[0],h=p[1],j=(0,r.useState)(null),y=(0,s.Z)(j,2),N=y[0],S=y[1],Z=(0,r.useState)(!1),k=(0,s.Z)(Z,2),C=k[0],F=k[1],O=(0,u.i)(d.Hv.employees),E=O.get,A=O.loading;return(0,r.useEffect)((function(){E().then((function(e){var n=e.data;if(n.success)return h(n.data)})).catch((function(e){console.log(e),(0,l.N)({type:"error",message:e.message})}))}),[]),(0,_.jsxs)("div",{className:"".concat(c.content," grid gap-1 m-a p-1"),children:[(0,_.jsx)("div",{className:"flex ".concat(c.head),children:(0,_.jsxs)("div",{className:"flex align-center pointer gap_5  ml-1",onClick:function(){return n((function(e){return!e}))},children:[(0,_.jsx)(b.Ps6,{style:{fontSize:"1.75rem"}}),(0,_.jsx)("h2",{children:"All Staffs"}),t("employee_create")&&(0,_.jsx)("button",{className:"btn clear iconOnly",onClick:function(e){e.stopPropagation(),F(!0)},children:(0,_.jsx)(g.ueT,{})})]})}),(0,_.jsx)(i.iA,{loading:A,className:c.emps,columns:[{label:"Name"},{label:"Role"},{label:"Action"}],children:f.map((function(e){return(0,_.jsxs)("tr",{onClick:function(){S(e),F(!0)},style:{cursor:"pointer"},children:[(0,_.jsx)("td",{className:c.date,children:e.name}),(0,_.jsx)("td",{className:c.date,children:e.roles.map((function(e){return(0,_.jsx)("p",{children:e.name},e._id)}))}),(0,_.jsx)(i.p2,{className:c.actions,actions:(0,a.Z)(t("employee_update")?[{icon:(0,_.jsx)(o.KHI,{}),label:"Update",onClick:function(){S(e),F(!0)}}]:[])})]},e._id)}))}),(0,_.jsx)(l.u,{open:C,head:!0,label:"".concat(N?"Update":"Add"," Staff"),className:c.addEmpFormModal,setOpen:function(){S(null),F(!1)},children:(0,_.jsx)(x,{edit:N,onSuccess:function(e){N?(h((function(n){return e?n.map((function(n){return n._id===e._id?e:n})):n.filter((function(e){return e._id!==N._id}))})),S(null)):h((function(n){return[].concat((0,a.Z)(n),[e])})),F(!1)}})})]})}}}]);
//# sourceMappingURL=391.bc2ee561.chunk.js.map