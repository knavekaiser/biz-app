"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[170],{601:function(e,s,t){t.r(s),t.d(s,{default:function(){return p}});var a=t(2982),n=t(885),c=t(2791),l=t(4581),i=t(5470),r=t(2202),d=t(8750),o={content:"chat_content__iGZWP",subPlans:"chat_subPlans__qlizO",adminView:"chat_adminView__H9oTa",fullChatModal:"chat_fullChatModal__vpgqR",chatContext:"chat_chatContext__HDaOJ",fullChat:"chat_fullChat__XYLvd",detail:"chat_detail__OO6ul",messages:"chat_messages__Ot9MM",placeholder:"chat_placeholder__wefBb",date:"chat_date__eILs3",msg:"chat_msg__N+Xj6",user:"chat_user__yMi+L",actions:"chat_actions__3RweB",btn:"chat_btn__EcfE4"},h=t(5454),u=t(1080),m=t(358),x=t(184),j=function(e){var s=e.msg,t=e.style;return(0,x.jsxs)("div",{className:"".concat(o.msg," ").concat(o[s.role]),style:t,children:["assistant"===s.role&&(0,x.jsxs)("div",{className:o.actions,children:[s.like&&(0,x.jsx)(m.aMS,{}),!1===s.like&&(0,x.jsx)(m.fA,{})]}),(0,x.jsx)("p",{className:o.content,children:s.content}),(0,x.jsx)(i.W7,{format:"hh:mma",children:s.createdAt})]})},f=function(e){var s,t,a,l,r=e.chat,h=(0,c.useState)(!1),u=(0,n.Z)(h,2),m=u[0],f=u[1];return(0,x.jsxs)("div",{className:"grid gap-1 ".concat(o.fullChat),children:[(0,x.jsxs)("div",{className:"grid p-1 gap-1 ".concat(o.detail),children:[(0,x.jsxs)("div",{className:o.user,children:[(0,x.jsx)("h4",{children:null===(s=r.user)||void 0===s?void 0:s.name}),(0,x.jsx)("p",{children:null===(t=r.user)||void 0===t?void 0:t.phone}),(0,x.jsx)("p",{children:null===(a=r.user)||void 0===a?void 0:a.email})]}),(0,x.jsxs)("div",{className:o.other,children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Chat Started: "}),(0,x.jsx)(i.W7,{format:"DD MMM YYYY hh:mma",children:r.createdAt})]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Last Message: "}),(0,x.jsx)(i.W7,{format:"DD MMM YYYY hh:mma",children:r.updatedAt})]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Total Messages: "}),r.messages.length-1]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Assistant Response: "}),r.messages.filter((function(e){return"assistant"===e.role})).length]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Total Liked Messages: "}),r.messages.filter((function(e){return"assistant"===e.role&&!0===e.like})).length]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Total Disliked Messages: "}),r.messages.filter((function(e){return"assistant"===e.role&&!1===e.like})).length]})]}),(0,x.jsx)("button",{className:"btn",onClick:function(){return f(!m)},children:"View Context"})]}),(0,x.jsx)("div",{className:o.messages,children:r.messages.filter((function(e){return"System"!==e.name})).map((function(e,s,t){return(0,x.jsxs)(c.Fragment,{children:[t[s-1]&&new Date(t[s-1].createdAt).getDate()!==new Date(e.createdAt).getDate()&&(0,x.jsx)("p",{className:o.date,children:(0,x.jsx)(i.W7,{format:"DD MMM YYYY",children:e.createdAt})}),0===s&&(0,x.jsx)("p",{className:o.date,children:(0,x.jsx)(i.W7,{format:"DD MMM YYYY",children:e.createdAt})}),(0,x.jsx)(j,{msg:e})]},e._id)}))}),m&&(0,x.jsx)(d.u,{open:m,setOpen:f,head:!0,label:"Context",children:(0,x.jsx)("div",{className:o.chatContext,children:null===(l=r.messages[0])||void 0===l?void 0:l.content.split("\n").map((function(e,s){return e?(0,x.jsx)("p",{children:e},s):null}))})})]})},g=t(5804),p=function(e){var s=e.setSidebarOpen,t=(0,c.useContext)(l.D),m=t.user,j=t.checkPermission,p=(0,c.useState)([]),_=(0,n.Z)(p,2),v=_[0],M=_[1],N=(0,c.useState)(null),b=(0,n.Z)(N,2),C=b[0],D=b[1],Y=(0,h.i)(u.Hv.chats),k=Y.get,A=Y.loading,w=(0,h.i)(u.Hv.chats+"/{ID}").remove;return(0,c.useEffect)((function(){k().then((function(e){var s=e.data;if(s.success)return M(s.data)})).catch((function(e){return(0,d.N)({type:"error",message:e.message})}))}),[]),(0,x.jsxs)("div",{className:"".concat(o.content," grid gap-1 m-a p-1"),children:[(0,x.jsx)("div",{className:"flex",children:(0,x.jsxs)("div",{className:"flex align-center pointer gap_5  ml-1",onClick:function(){return s((function(e){return!e}))},children:[(0,x.jsx)(g.Ps6,{style:{fontSize:"1.75rem"}}),(0,x.jsx)("h2",{children:"All Chats"})]})}),(0,x.jsx)(i.iA,{loading:A,className:"".concat(o.subPlans," ").concat("admin"===m.userType?o.adminView:""),columns:[{label:"Date"},{label:"User"},{label:"Topic"},{label:"Total Messages"},{label:"Token Usage"},{label:"Action",className:"action"}],children:v.map((function(e){var s;return(0,x.jsxs)("tr",{style:{cursor:"pointer"},children:[(0,x.jsx)("td",{children:(0,x.jsx)(i.W7,{format:"DD MMM YYYY hh:mma",children:e.createdAt})}),(0,x.jsx)("td",{children:null===(s=e.user)||void 0===s?void 0:s.name}),(0,x.jsx)("td",{children:e.topic}),(0,x.jsx)("td",{children:e.messages.length-1}),(0,x.jsx)("td",{children:e.tokenUsage}),(0,x.jsx)(i.p2,{className:o.actions,actions:[{icon:(0,x.jsx)(r.z5B,{}),label:"View",onClick:function(){D(e)}}].concat((0,a.Z)(j("chat_delete")?[{icon:(0,x.jsx)(r.lp8,{}),label:"Delete",onClick:function(){return(0,d.N)({type:"confirmation",message:"Are you sure you want to remove this Chat?",callback:function(){w({},{params:{"{ID}":e._id}}).then((function(s){var t=s.data;t.success?M((function(s){return s.filter((function(s){return s._id!==e._id}))})):(0,d.N)({type:"error",message:t.message})}))}})}}]:[]))})]},e._id)}))}),(0,x.jsx)(d.u,{open:C,head:!0,label:"Chat",className:o.fullChatModal,setOpen:function(){return D(null)},children:(0,x.jsx)(f,{chat:C})})]})}}}]);
//# sourceMappingURL=170.c14a952e.chunk.js.map