"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[990],{7990:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var s=n(2982),a=n(885),r=n(2791),i=n(4581),l=n(5470),o=n(8750),u={content:"quotes_content__d6QGt",innerWrapper:"quotes_innerWrapper__0o8+D",sidebar:"quotes_sidebar__OueuR",addButton:"quotes_addButton__XE+Gn",btns:"quotes_btns__y2nuy",listItem:"quotes_listItem__ityEv",label:"quotes_label__VuSPM",nestedList:"quotes_nestedList__B-cIy",open:"quotes_open__aa1x+",innerContent:"quotes_innerContent__wCHU6",innerContentWrapper:"quotes_innerContentWrapper__rKsb7",vouchers:"quotes_vouchers__t8sKZ",footer:"quotes_footer__AWxAV",masterFormModal:"quotes_masterFormModal__36AN0",masterForm:"quotes_masterForm__dXJKs",print:"quotes_print__ir6Gn",logo:"quotes_logo__Vsg-f",box:"quotes_box__+p8As",items:"quotes_items__ANNmM",taxes:"quotes_taxes__cyTAG",totalAmount:"quotes_totalAmount__rIs44",word:"quotes_word__sjhD8",digit:"quotes_digit__VyweO",sign:"quotes_sign__sG6wg",signature:"quotes_signature__YnCoV",head:"quotes_head__uo7Hz",quotes:"quotes_quotes__tCxCu",date:"quotes_date__KOSsI",customer:"quotes_customer__6hEHP",net:"quotes_net__h-6C4",actions:"quotes_actions__Qdwow",addQuoteForm:"quotes_addQuoteForm__fmLXp",itemForm:"quotes_itemForm__E47xe",itemName:"quotes_itemName__hYpvW",mainForm:"quotes_mainForm__Neb5l"},c=n(5454),d=n(1080),m=n(1413),p=n(1134),x=n(1570),h=n(184),v=x.Ry({name:x.Z_().required("Please enter a name"),parent:x.Z_(),type:x.Z_().oneOf(["Cash","Bank","Customers","Suppliers","Sales","Purchase","Stock","null","Tax",null]).nullable(),isGroup:x.O7().required(),openingBalance:x.Rx().required("Please enter opening balance").typeError("Please enter a valid number")}),f=function(e){var t=e.edit,n=e.masters,a=void 0===n?[]:n,i=e.onSuccess,x=(0,p.cI)({resolver:(0,c.y)(v)}),f=x.handleSubmit,b=x.register,j=x.reset,g=x.control,_=x.formState.errors,N=(0,c.i)(d.Hv.accountingMasters+"/".concat((null===t||void 0===t?void 0:t._id)||"")),y=N.post,q=N.put,S=N.loading;return(0,r.useEffect)((function(){var e;j({name:(null===t||void 0===t?void 0:t.name)||"",parent:(null===t||void 0===t?void 0:t.parent)||"null",type:(null===t||void 0===t?void 0:t.type)||"null",isGroup:null===(e=null===t||void 0===t?void 0:t.isGroup)||void 0===e||e,openingBalance:(null===t||void 0===t?void 0:t.openingBalance)||0})}),[t]),(0,h.jsxs)("form",{onSubmit:f((function(e){"null"===e.parent&&(e.parent=null),"null"===e.type&&(e.type=null),(null!==t&&void 0!==t&&t._id?q:y)(e).then((function(e){var t=e.data;if(!t.success)return(0,o.N)({type:"error",message:t.message});i(t.data)})).catch((function(e){return(0,o.N)({type:"error",message:e.message})}))})),className:"".concat(u.masterForm," grid gap-1"),children:[(0,h.jsx)(l.II,(0,m.Z)((0,m.Z)({label:"Name"},b("name")),{},{required:!0,error:_.name})),(0,h.jsx)(l.hQ,{label:"Parent",name:"parent",control:g,options:[{label:"None",value:"null"}].concat((0,s.Z)(a.map((function(e){return{label:e.name,value:e._id}}))))}),(0,h.jsx)(l.hQ,{label:"Type",name:"type",control:g,options:[{label:"None",value:"null"},{label:"Cash",value:"Cash"},{label:"Bank",value:"Bank"},{label:"Customers",value:"Customers"},{label:"Suppliers",value:"Suppliers"},{label:"Sales",value:"Sales"},{label:"Purchase",value:"Purchase"},{label:"Stock",value:"Stock"},{label:"Tax",value:"Tax"}]}),(0,h.jsx)(l.hQ,{label:"Is Group",name:"isGroup",control:g,formOptions:{required:!0},options:[{label:"No",value:!1},{label:"Yes",value:!0}]}),(0,h.jsx)(l.II,(0,m.Z)((0,m.Z)({label:"Opening Balance",type:"number"},b("openingBalance")),{},{required:!0,error:_.openingBalance})),(0,h.jsx)("div",{className:"btns",children:(0,h.jsx)("button",{className:"btn",disabled:S,children:null!==t&&void 0!==t&&t._id?"Update":"Submit"})})]})},b=n(2202),j=n(1146),g=function(e){var t=e.label,n=e.value;return(0,h.jsxs)("p",{className:u.detail,children:[(0,h.jsx)("span",{className:u.label,children:t}),":"," ",(0,h.jsx)("span",{className:u.value,children:n})]})},_=(0,r.forwardRef)((function(e,t){var n,o,c,d,p,x,v,f,b,j=e.quote,_=e.user,N=(0,r.useContext)(i.D).config,y=(0,r.useState)(null),q=(0,a.Z)(y,2),S=q[0],C=q[1];return(0,r.useEffect)((function(){if(null!==N&&void 0!==N&&N.printQuote){var e=["no","product","qty","unit","total"],t=(0,s.Z)(N.printQuote.itemColumns.sort((function(t,n){return e.indexOf(t)>e.indexOf(n)?1:-1})).filter((function(e){return!["no","product"].includes(e)})));C({gridTemplateColumns:"".concat(N.printQuote.itemColumns.includes("no")?"3rem":""," ").concat(N.printQuote.itemColumns.includes("product")?42-6*t.length+"rem":""," repeat(auto-fit, minmax(86px, 1fr))")})}}),[j]),null!==N&&void 0!==N&&N.printQuote?(0,h.jsxs)("div",{className:u.print,ref:t,children:[(0,h.jsxs)("header",{children:[_.logo&&(0,h.jsx)("img",{className:u.logo,src:_.logo}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{children:_.name}),_.motto&&(0,h.jsx)("p",{children:_.motto})]}),(0,h.jsx)("h4",{children:"Quote"})]}),(0,h.jsxs)("div",{className:"".concat(u.info," flex wrap gap-1 mt-1"),children:[(0,h.jsxs)("div",{className:"".concat(u.box," flex-1"),children:[(0,h.jsx)("p",{children:"To:"}),(0,h.jsx)(g,{label:"Name",value:null===(n=j.customer)||void 0===n?void 0:n.name}),(0,h.jsx)(g,{label:"Detail",value:(null===(o=j.customer)||void 0===o||null===(c=o.detail)||void 0===c?void 0:c.split("\n").map((function(e,t,n){return(0,h.jsxs)("span",{children:[e,n[t+1]&&(0,h.jsx)("br",{})]},t)})))||null})]}),(0,h.jsxs)("div",{className:"".concat(u.box," flex-1"),children:[(0,h.jsx)(g,{label:"Date",value:(0,l._7)(null===j||void 0===j?void 0:j.date,"DD-MM-YYYY")}),N.printQuote.businessInfo.includes("gstin")&&(0,h.jsx)(g,{label:"GSTIN",value:_.gstin}),N.printQuote.businessInfo.includes("pan")&&(0,h.jsx)(g,{label:"PAN",value:_.pan}),_.bankDetails&&(0,h.jsxs)(h.Fragment,{children:[N.printQuote.businessInfo.includes("bank")&&(0,h.jsx)(g,{label:"Bank",value:_.bankDetails.bankName}),N.printQuote.businessInfo.includes("branch")&&(0,h.jsx)(g,{label:"Branch",value:_.bankDetails.branch}),N.printQuote.businessInfo.includes("accountNumber")&&(0,h.jsx)(g,{label:"A/C No.",value:_.bankDetails.accNo})]}),N.printQuote.businessInfo.includes("ifsc")&&(0,h.jsx)(g,{label:"IFSC",value:_.ifsc}),N.printQuote.businessInfo.includes("address")&&(0,h.jsx)(g,{label:"Address",value:"".concat((null===(d=_.address)||void 0===d?void 0:d.street)||"")}),N.printQuote.businessInfo.includes("phone")&&(0,h.jsx)(g,{label:"Phone",value:_.phone}),N.printQuote.businessInfo.includes("email")&&(0,h.jsx)(g,{label:"Email",value:_.email})]})]}),N.printQuote.itemColumns.length>0&&(0,h.jsx)(l.iA,{className:"".concat(u.items," mt-1"),theadTrStyle:(0,m.Z)({},S),columns:N.printQuote.itemColumns.map((function(e){return"no"===e?{label:"No"}:"product"===e?{label:"Product"}:"price"===e?{label:"Price",className:"text-right"}:"qty"===e?{label:"QTY",className:"text-right"}:"unit"===e?{label:"Unit"}:"total"===e?{label:"Total (".concat(N.printQuote.currency,")"),className:"text-right"}:void 0})),children:j.items.map((function(e,t){return(0,h.jsxs)("tr",{style:(0,m.Z)({},S),children:[N.printQuote.itemColumns.includes("no")&&(0,h.jsx)("td",{children:t+1}),N.printQuote.itemColumns.includes("product")&&(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"ellipsis",children:e.name})}),N.printQuote.itemColumns.includes("price")&&(0,h.jsx)("td",{className:"text-right",children:e.price.fix(2,null===N||void 0===N?void 0:N.numberSeparator)}),N.printQuote.itemColumns.includes("qty")&&(0,h.jsx)("td",{className:"text-right",children:e.qty}),N.printQuote.itemColumns.includes("unit")&&(0,h.jsx)("td",{children:e.unit}),N.printQuote.itemColumns.includes("total")&&(0,h.jsx)("td",{className:"text-right",children:(e.price*e.qty).fix(2,null===N||void 0===N?void 0:N.numberSeparator)})]},t)}))}),j.gst&&(0,h.jsx)(l.iA,{className:"".concat(u.taxes," mt-1"),columns:[{label:"No."},{label:"Description of Tax"},{label:"Rate of Tax",className:"text-right"},{label:"Taxable Amount (".concat(N.printQuote.currency,")"),className:"text-right"},{label:"Tax Amount (".concat(N.printQuote.currency,")"),className:"text-right"}],children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:"1"}),(0,h.jsx)("td",{children:"Integrated GST"}),(0,h.jsx)("td",{className:"text-right",children:j.gst.fix(2,null===N||void 0===N?void 0:N.numberSeparator)}),(0,h.jsx)("td",{className:"text-right",children:j.items.reduce((function(e,t){return e+t.qty*t.price}),0).fix(2,null===N||void 0===N?void 0:N.numberSeparator)}),(0,h.jsx)("td",{className:"text-right",children:j.items.reduce((function(e,t){return e+t.qty*t.price}),0).percent(j.gst).fix(2,null===N||void 0===N?void 0:N.numberSeparator)})]})}),(0,h.jsxs)("div",{className:"".concat(u.totalAmount," mt-1"),children:[(0,h.jsxs)("p",{className:u.word,children:["Total:"," ",j.items.reduce((function(e,t){return e+t.qty*t.price}),0).toWords()]}),(0,h.jsx)("p",{className:u.digit,children:(j.items.reduce((function(e,t){return e+t.qty*t.price}),0)+j.items.reduce((function(e,t){return e+t.qty*t.price}),0).percent(j.gst||0)).fix(2,null===N||void 0===N?void 0:N.numberSeparator)})]}),((null===(p=_.terms)||void 0===p?void 0:p.length)||(null===(x=_.ownerDetails)||void 0===x?void 0:x.name))&&(0,h.jsxs)("footer",{className:"flex gap-1 align-end mt-1",children:[(null===(v=_.terms)||void 0===v?void 0:v.length)>0&&(0,h.jsxs)("div",{className:"".concat(u.box," flex-1 mb-2"),children:[(0,h.jsx)("strong",{children:"Terms & Conditions:"})," ",(0,h.jsx)("ol",{className:"ml-2 mt-1",children:null===(f=_.terms)||void 0===f?void 0:f.map((function(e,t){return(0,h.jsx)("li",{children:e},t)}))})]}),(null===(b=_.ownerDetails)||void 0===b?void 0:b.name)&&(0,h.jsxs)("div",{className:u.sign,children:[(0,h.jsxs)("p",{children:["For ",_.name]}),_.ownerDetails.signature&&(0,h.jsx)("img",{className:u.signature,src:_.ownerDetails.signature}),(0,h.jsx)("p",{children:(0,h.jsx)("strong",{children:_.ownerDetails.name})})]})]})]}):(0,h.jsx)("div",{className:u.print,ref:t,children:(0,h.jsx)("p",{children:"Please update print configuration in the settings."})})})),N=x.Ry({date:x.Z_().required(),customerName:x.Z_().required(),customerDetail:x.Z_().required()}),y=x.Ry({name:x.Z_().required(),price:x.Rx().min(0,"Price can not be less than 0").required().typeError("Enter a valid Number"),qty:x.Rx().min(1,"Qty can not be less than 1").required().typeError("Enter a valid Number"),unit:x.Vo((function(e){switch(typeof e){case"object":return x.Ry().typeError("Select a unit").required();case"string":return x.Z_().required();default:return x.nK().required()}}))}),q=function(e){var t=e.label,n=e.value,s=e.className;return(0,h.jsxs)("p",{className:"".concat(u.detail," ").concat(s||""),children:[(0,h.jsxs)("span",{className:u.label,children:[t,":"]})," ",(0,h.jsx)("span",{className:u.value,children:n})]})},S=function(e){var t=e.edit,n=e.quotes,a=e.onSuccess,o=(0,r.useContext)(i.D).config,d=(0,p.cI)({defaultValues:{unit:"Piece"},resolver:(0,c.y)(y)}),x=d.handleSubmit,v=d.register,f=d.reset,b=d.watch,j=d.setValue,g=d.control,_=d.formState.errors;return(0,r.useEffect)((function(){f((0,m.Z)({},t))}),[t]),(0,h.jsxs)("form",{onSubmit:x((function(e){t||(e._id=Math.random().toString().substr(-8)),a(e),f()})),className:"".concat(u.itemForm," grid gap-1"),children:[(0,h.jsx)(l.Um,{label:"Product",data:n.reduce((function(e,t){return[].concat((0,s.Z)(e),(0,s.Z)(t.items))}),[]).map((function(e){return{label:e.name,value:e.name,data:e}})),register:v,name:"name",formOptions:{required:!0},renderListItem:function(e){return(0,h.jsx)(h.Fragment,{children:e.label})},watch:b,setValue:j,onChange:function(e){"string"===typeof e?j("name",e):(j("name",e.name),j("price",e.price))},error:_.name,className:u.itemName}),(0,h.jsx)(l.II,(0,m.Z)((0,m.Z)({label:"Price",type:"number",required:!0},v("price")),{},{error:_.price})),(0,h.jsx)(l.II,(0,m.Z)((0,m.Z)({label:"Qty",type:"number",required:!0},v("qty")),{},{error:_.qty})),(0,h.jsx)(l.hQ,{label:"Unit",control:g,name:"unit",formOptions:{required:!0},options:o.unitsOfMeasure.map((function(e){return{label:e,value:e}}))}),(0,h.jsx)("button",{className:"btn",children:t?"Update":"Add"})]})},C=function(e){var t=e.disabled,n=e.edit,a=e.items,i=e.quotes,x=e.setErr,v=e.onSuccess,f=(0,p.cI)({resolver:(0,c.y)(N)}),b=f.handleSubmit,j=f.register,g=f.reset,_=f.setValue,y=f.watch,q=f.control,S=f.formState.errors,C=(0,c.i)(d.Hv.quotes+"/".concat((null===n||void 0===n?void 0:n._id)||"")),Z=C.post,D=C.put,I=C.loading;return(0,r.useEffect)((function(){var e,t;g((0,m.Z)((0,m.Z)({},n),{},{status:(null===n||void 0===n?void 0:n.status)||"pending",date:(0,l._7)(null===n||void 0===n?void 0:n.date,"YYYY-MM-DD"),customerName:(null===n||void 0===n||null===(e=n.customer)||void 0===e?void 0:e.name)||"",customerDetail:(null===n||void 0===n||null===(t=n.customer)||void 0===t?void 0:t.detail)||""}))}),[n]),(0,h.jsxs)("form",{onSubmit:b((function(e){if(a.length<1)return x("Add at least one item");(n?D:Z)({dateTime:e.date,status:e.status,customer:{name:e.customerName,detail:e.customerDetail},items:a.map((function(e){return(0,m.Z)((0,m.Z)({},e),{},{_id:void 0})}))}).then((function(e){var t=e.data;if(!t.success)return(0,o.N)({type:"error",message:t.message});v(t.data)})).catch((function(e){return(0,o.N)({type:"error",message:e.message})}))})),className:"".concat(u.mainForm," grid gap-1"),children:[(0,h.jsx)(l.II,(0,m.Z)((0,m.Z)({label:"Date",type:"date"},j("date")),{},{required:!0,error:S.date})),(0,h.jsx)(l.hQ,{label:"Status",name:"status",control:q,options:[{label:"Pending",value:"pending"},{label:"Ordered",value:"ordered"}]}),(0,h.jsx)("div",{className:"all-columns",children:(0,h.jsx)("h3",{children:"Customer Information"})}),(0,h.jsx)(l.Um,{label:"Name",data:(0,s.Z)(new Set(i.map((function(e){return e.customer.name})))).map((function(e){var t;return{label:e,value:e,data:null===(t=i.find((function(t){return t.customer.name===e})))||void 0===t?void 0:t.customer}})),register:j,name:"customerName",formOptions:{required:!0},renderListItem:function(e){return(0,h.jsx)(h.Fragment,{children:e.label})},watch:y,setValue:_,onChange:function(e){"string"===typeof e?_("customerName",e):(_("customerName",e.name),_("customerDetail",e.detail))},error:S.customerName}),(0,h.jsx)(l.gx,(0,m.Z)((0,m.Z)({label:"Detail"},j("customerDetail")),{},{required:!0,error:S.customerDetail})),(0,h.jsx)("div",{className:"btns",children:(0,h.jsx)("button",{className:"btn",disabled:t||I,children:n?"Update":"Submit"})})]})},Z=function(e){var t,n,p,x=e.edit,v=e.quotes,f=e.onSuccess,g=(0,r.useContext)(i.D),N=g.business,y=g.user,Z=g.config,D=g.checkPermission,I=(0,r.useState)(!!x),Q=(0,a.Z)(I,2),w=Q[0],T=Q[1],A=(0,r.useState)((null===x||void 0===x?void 0:x.items)||[]),k=(0,a.Z)(A,2),F=k[0],P=k[1],E=(0,r.useState)(null),O=(0,a.Z)(E,2),M=O[0],Y=O[1],B=(0,r.useState)(null),R=(0,a.Z)(B,2),G=R[0],V=R[1],W=(0,r.useRef)(),U=(0,j.useReactToPrint)({content:function(){return W.current}}),H=(0,c.i)(d.Hv.generateOrderFromQuote),L=H.post,K=H.loading;return(0,h.jsxs)("div",{className:"grid gap-1 ".concat(u.addQuoteForm," ").concat(w?u.viewOnly:""),children:[(0,h.jsxs)("div",{className:"grid gap-1 p-1",children:[w&&(0,h.jsxs)("div",{className:"flex wrap gap-1 ".concat(u.quoteDetail),children:[(0,h.jsxs)("div",{className:u.box,children:[(0,h.jsx)("h3",{children:"Customer Information"}),(0,h.jsx)(q,{label:"Name",value:null===(t=x.customer)||void 0===t?void 0:t.name}),(0,h.jsx)(q,{label:"Detail",value:(null===(n=x.customer)||void 0===n||null===(p=n.detail)||void 0===p?void 0:p.split("\n").map((function(e,t,n){return(0,h.jsxs)("span",{children:[e,n[t+1]&&(0,h.jsx)("br",{})]},t)})))||null})]}),(0,h.jsxs)("div",{className:u.box,children:[(0,h.jsx)("h3",{children:"Quote Information"}),(0,h.jsx)(q,{label:"Status",value:null===x||void 0===x?void 0:x.status,className:"flex justify-space-between"}),(0,h.jsx)(q,{label:"Date",value:(0,l._7)(null===x||void 0===x?void 0:x.date,"DD-MM-YYYY"),className:"flex justify-space-between"}),(0,h.jsx)(q,{label:"Total",value:x.items.reduce((function(e,t){return e+t.qty*t.price}),0).fix(2,null===Z||void 0===Z?void 0:Z.numberSeparator),className:"flex justify-space-between"})]})]}),(0,h.jsx)("h3",{children:"Items"}),F.length>0?(0,h.jsx)(l.iA,{className:u.items,columns:[{label:"Product"},{label:"Qty",className:"text-right"},{label:"Unit"},{label:"Rate",className:"text-right"},{label:"Total",className:"text-right"}].concat((0,s.Z)(w?[]:[{label:"Action",action:!0}])),children:F.map((function(e,t){return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:u.name,children:(0,h.jsx)("span",{className:"ellipsis",children:e.name})}),(0,h.jsx)("td",{className:"text-right",children:e.qty}),(0,h.jsx)("td",{children:e.unit}),(0,h.jsx)("td",{className:"text-right",children:e.price.fix(2,null===Z||void 0===Z?void 0:Z.numberSeparator)}),(0,h.jsx)("td",{className:"text-right",children:(e.price*e.qty).fix(2,null===Z||void 0===Z?void 0:Z.numberSeparator)}),!w&&(0,h.jsx)(l.p2,{actions:[{icon:(0,h.jsx)(b.KHI,{}),label:"Edit",onClick:function(){return Y(e)}},{icon:(0,h.jsx)(b.lp8,{}),label:"Delete",onClick:function(){return(0,o.N)({type:"confirmation",message:"Are you sure you want to remove this Item?",callback:function(){P((function(t){return t.filter((function(t){return t._id!==e._id}))}))}})}}]})]},t)}))}):(0,h.jsx)("p",{className:u.noContent,children:"No items yet."}),G&&(0,h.jsx)("p",{className:"error",children:G}),x&&(0,h.jsx)("div",{style:{display:"none"},children:(0,h.jsx)(_,{ref:W,quote:x,user:(null===N||void 0===N?void 0:N.business)||y})}),!w&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S,{edit:M,quotes:v,onSuccess:function(e){V(null),M?(P((function(t){return t.map((function(t){return t._id===e._id?e:t}))})),Y(null)):P((function(t){return[].concat((0,s.Z)(t),[e])}))}},M?"edit":"add"),(0,h.jsx)("h3",{className:"mt-1",children:"Other Information"}),(0,h.jsx)(C,{disabled:M,edit:x,items:F,quotes:v,setErr:V,onSuccess:f,setViewOnly:T})]})]}),w&&(0,h.jsxs)("div",{className:"flex gap-1 all-columns align-center border-t p-1",children:[(null===x||void 0===x?void 0:x._id)&&D("order_create")&&"pending"===(null===x||void 0===x?void 0:x.status)&&(0,h.jsx)("button",{className:"btn",disabled:K,onClick:function(){return(0,o.N)({type:"confirmation",message:"Are you sure want to generate an order from this quote?",callback:function(){L({quote_id:null===x||void 0===x?void 0:x._id}).then((function(e){var t=e.data;t.success?(f((0,m.Z)((0,m.Z)({},x),{},{status:"ordered"})),(0,o.N)({type:"success",message:"Order has been generated"})):(0,o.N)({type:"error",message:t.message})})).catch((function(e){return(0,o.N)({type:"error",message:e.message})}))}})},children:"Generate Order"}),D("quote_update")&&(0,h.jsx)("button",{disabled:K,className:"btn medium",onClick:function(){return T(!1)},children:"Edit"}),(0,h.jsx)("button",{className:"btn medium",onClick:U,children:"Print"})]})]})},D=n(5804),I=n(3974),Q=n(1765),w=function e(t){var n,s,i=t.account,l=t.setAddMaster,o=(0,r.useState)(null===i||void 0===i?void 0:i.isGroup),c=(0,a.Z)(o,2),d=c[0],m=c[1];return(0,h.jsxs)("li",{style:{whiteSpace:"nowrap"},className:u.listItem,children:[(0,h.jsxs)("div",{className:u.label,children:[i.isGroup&&(0,h.jsx)(h.Fragment,{children:(null===(n=i.children)||void 0===n?void 0:n.length)>0?(0,h.jsx)("button",{onClick:function(){return m(!d)},children:d?(0,h.jsx)(D.IgQ,{}):(0,h.jsx)(D.b5v,{})}):(0,h.jsx)("button",{style:{height:"16px",width:"16px",border:"1px dashed #818181",borderRadius:"2px",pointerEvents:"none"}})}),(0,h.jsx)("strong",{children:i.name}),(0,h.jsxs)("div",{className:u.btns,children:[(0,h.jsx)("button",{className:u.addButton,onClick:function(){return l(i)},children:(0,h.jsx)(I.Nte,{})}),i.isGroup&&(0,h.jsx)("button",{className:u.addButton,onClick:function(){return l({parent:i._id,type:i.type||""})},children:(0,h.jsx)(D.iTs,{})})]})]}),d&&(null===(s=i.children)||void 0===s?void 0:s.length)>0&&(0,h.jsx)("ul",{className:u.nestedList,children:i.children.map((function(t){return(0,h.jsx)(e,{account:t,setAddMaster:l},t._id)}))})]})},T=function(e){var t=e.setSidebarOpen,n=((0,r.useContext)(i.D).config,(0,r.useState)([])),m=(0,a.Z)(n,2),p=m[0],x=(m[1],(0,r.useState)(null)),v=(0,a.Z)(x,2),b=v[0],j=v[1],g=(0,r.useState)([]),_=(0,a.Z)(g,2),N=_[0],y=_[1],q=(0,r.useState)(null),S=(0,a.Z)(q,2),C=S[0],I=S[1],T=(0,r.useState)(!1),A=(0,a.Z)(T,2),k=A[0],F=A[1],P=(0,r.useState)("voucherListing"),E=(0,a.Z)(P,2),O=E[0],M=E[1],Y=(0,r.useState)(!1),B=(0,a.Z)(Y,2),R=B[0],G=B[1],V=(0,r.useState)({}),W=(0,a.Z)(V,2),U=(W[0],W[1],(0,c.i)(d.Hv.accountingMasters)),H=U.get,L=(U.loading,(0,c.i)(d.Hv.quotes+"/{ID}").remove,(0,r.useMemo)((function(){return function(e){var t={};e.forEach((function(e){e.children=[],t[e._id]=e}));var n=[];return e.forEach((function(e){if(e.parent){var s=t[e.parent];s&&s.children.push(e)}else n.push(e)})),n}(N)}),[N]));return(0,r.useEffect)((function(){H().then((function(e){var t=e.data;if(t.success)return y(t.data)})).catch((function(e){return(0,o.N)({type:"error",message:e.message})}))}),[]),(0,h.jsxs)("div",{className:"".concat(u.content," grid gap-1 m-a"),children:[(0,h.jsx)("div",{className:"flex ".concat(u.head),children:(0,h.jsxs)("div",{className:"flex align-center pointer gap_5  ml-1",onClick:function(){return t((function(e){return!e}))},children:[(0,h.jsx)(D.Ps6,{style:{fontSize:"1.75rem"}}),(0,h.jsx)("h2",{children:"Accounting"})]})}),(0,h.jsxs)("div",{className:"".concat(u.innerWrapper," ").concat(R?u.open:""),children:[(0,h.jsxs)("div",{className:u.sidebar,children:[(0,h.jsx)("button",{className:u.addButton,onClick:function(){return j({})},children:(0,h.jsx)(D.iTs,{})}),(0,h.jsx)("ul",{children:N.length>0?L.map((function(e){return(0,h.jsx)(w,{account:e,setAddMaster:j},e._id)})):(0,h.jsx)("p",{style:{marginTop:"1rem",marginBottom:"1rem",textAlign:"center",textWrap:"balance",color:"#797979"},children:"No accounts have been added yet."})})]}),(0,h.jsxs)("div",{className:u.innerContent,children:[(0,h.jsxs)("div",{className:"flex gap-1 align-center",children:[(0,h.jsx)("button",{className:"btn clear iconOnly",onClick:function(){return G(!R)},children:(0,h.jsx)(Q.kpB,{})}),(0,h.jsx)(l.mQ,{activeTab:O,tabs:[{label:"Voucher Listing",value:"voucherListing"}],onChange:function(e){return M(e.value)}})]}),"voucherListing"===O&&(0,h.jsx)("div",{className:u.innerContentWrapper,children:(0,h.jsx)(l.iA,{url:d.Hv.accountingVouchers,countRecord:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t,n,s){var a;return e+((null===(a=s[n-1])||void 0===a?void 0:a.rec_id)!==t.rec_id?1:0)}),0)},filterFields:[{label:"Type",fieldType:"select",name:"type",optionType:"predefined",options:[{label:"Invoice",value:"Invoice"},{label:"Purchase",value:"Purchase"},{label:"Receipt",value:"Receipt"},{label:"Payment",value:"Payment"}]},{label:"Start Date",fieldType:"input",inputType:"datetime-local",name:"startDate"},{label:"End Date",fieldType:"input",inputType:"datetime-local",name:"endDate"}],className:u.vouchers,columns:[{label:"Date"},{label:"No"},{label:"Type"},{label:"Account Name"},{label:"Debit",className:"text-right"},{label:"Credit",className:"text-right"}],renderRow:function(e,t,n){var s,a,r;return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"grid",children:(null===(s=n[t-1])||void 0===s?void 0:s.rec_id)!==e.rec_id&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.W7,{style:{fontSize:"14px"},format:"DD MMM YYYY",children:e.createdAt}),(0,h.jsx)(l.W7,{format:"hh:mma",children:e.createdAt})]})}),(0,h.jsx)("td",{children:(null===(a=n[t-1])||void 0===a?void 0:a.rec_id)!==e.rec_id&&e.no}),(0,h.jsx)("td",{children:(null===(r=n[t-1])||void 0===r?void 0:r.rec_id)!==e.rec_id&&e.type}),(0,h.jsx)("td",{children:e.accountName}),(0,h.jsx)("td",{className:"text-right",children:e.debit?e.debit.toFixed(2):null}),(0,h.jsx)("td",{className:"text-right",children:e.credit?e.credit.toFixed(2):null})]},t)},tfoot:function(e){return(0,h.jsx)("tfoot",{children:(0,h.jsxs)("tr",{className:u.footer,children:[(0,h.jsx)("td",{}),(0,h.jsx)("td",{}),(0,h.jsx)("td",{}),(0,h.jsx)("td",{className:"text-right",children:"Total"}),(0,h.jsx)("td",{className:"text-right",children:e.reduce((function(e,t){return e+t.debit}),0).toFixed(2)}),(0,h.jsx)("td",{className:"text-right",children:e.reduce((function(e,t){return e+t.credit}),0).toFixed(2)})]})})}})})]})]}),(0,h.jsx)(o.u,{open:k,head:!0,label:"".concat(C?"View / Update":"Add"," Record"),className:u.addQuoteFormModal,setOpen:function(){I(null),F(!1)},children:(0,h.jsx)(Z,{edit:C,quotes:p,onSuccess:function(e){C?(y((function(t){return t.map((function(t){return t._id===e._id?e:t}))})),I(null)):y((function(t){return[].concat((0,s.Z)(t),[e])})),F(!1)}})}),(0,h.jsx)(o.u,{open:b,head:!0,label:"".concat(null!==b&&void 0!==b&&b._id?"Update":"Add"," Account"),className:u.masterFormModal,setOpen:function(){j(null)},children:(0,h.jsx)(f,{edit:b,masters:N,onSuccess:function(e){null!==b&&void 0!==b&&b._id?y((function(t){return t.map((function(t){return t._id===e._id?e:t}))})):y((function(t){return[].concat((0,s.Z)(t),[e])})),j(!1)}})})]})}}}]);
//# sourceMappingURL=990.2e3ad9cb.chunk.js.map