"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[350],{8350:function(e,n,a){a.r(n),a.d(n,{default:function(){return k}});var r=a(2982),t=a(885),i=a(2791),s=a(4581),o=a(3806),l=a(2202),u=a(8750),c={content:"subPlans_content__dm4Xg",subPlans:"subPlans_subPlans__IkMWg",addSubPlanFormModal:"subPlans_addSubPlanFormModal__uPHi3",head:"subPlans_head__LCqQl"},d=a(5454),m=a(1080),x=a(1413),b=a(1134),h=a(1570),p=a(184),f=h.Ry({name:h.Z_().required(),price:h.Rx().min(0,"Price Can't be less than 0").required().typeError("Please enter a valid number"),duration:h.Rx().min(1,"Please enter more than 0").required().typeError("Please enter a valid number"),maxProduct:h.Rx().min(1,"Please enter more than 0").required().typeError("Please enter a valid number"),maxAiChatToken:h.Rx().min(1,"Please enter more than 0").required().typeError("Please enter a valid number"),maxAiChatContextToken:h.Rx().min(1,"Please enter more than 0").required().typeError("Please enter a valid number")}),P=function(e){var n=e.edit,a=e.onSuccess,r=(0,b.cI)({resolver:(0,d.y)(f)}),t=r.handleSubmit,s=r.register,l=r.reset,c=r.formState.errors,h=(0,d.i)(m.Hv.subPlans+"/".concat((null===n||void 0===n?void 0:n._id)||"")),P=h.post,v=h.put,C=h.loading;return(0,i.useEffect)((function(){var e,a,r;l((0,x.Z)((0,x.Z)({},n),{},{maxProduct:null===n||void 0===n||null===(e=n.features)||void 0===e?void 0:e.maxProduct,maxAiChatToken:null===n||void 0===n||null===(a=n.features)||void 0===a?void 0:a.maxAiChatToken,maxAiChatContextToken:null===n||void 0===n||null===(r=n.features)||void 0===r?void 0:r.maxAiChatContextToken}))}),[n]),(0,p.jsxs)("form",{onSubmit:t((function(e){e.features={maxProduct:e.maxProduct,maxAiChatToken:e.maxAiChatToken,maxAiChatContextToken:e.maxAiChatContextToken},delete e.maxProduct,(n?v:P)((0,x.Z)({},e)).then((function(e){var n=e.data;if(!n.success)return(0,u.N)({type:"error",message:n.message});a(n.data)})).catch((function(e){return(0,u.N)({type:"error",message:e.message})}))})),className:"grid gap-1 p-1",children:[(0,p.jsx)(o.II,(0,x.Z)((0,x.Z)({label:"Name"},s("name")),{},{required:!0,error:c.name})),(0,p.jsx)(o.II,(0,x.Z)((0,x.Z)({label:"Price"},s("price")),{},{type:"number",required:!0,error:c.price})),(0,p.jsx)(o.II,(0,x.Z)((0,x.Z)({label:"Duration"},s("duration")),{},{type:"number",required:!0,error:c.duration})),(0,p.jsx)("h3",{children:"Features"}),(0,p.jsx)(o.II,(0,x.Z)((0,x.Z)({label:"Max number of Products"},s("maxProduct")),{},{type:"number",required:!0,error:c.maxProduct})),(0,p.jsx)(o.II,(0,x.Z)((0,x.Z)({label:"Max AI Chat Token"},s("maxAiChatToken")),{},{type:"number",required:!0,error:c.maxAiChatToken})),(0,p.jsx)(o.II,(0,x.Z)((0,x.Z)({label:"Max AI Chat Context Token"},s("maxAiChatContextToken")),{},{type:"number",required:!0,error:c.maxAiChatContextToken})),(0,p.jsx)("div",{className:"btns",children:(0,p.jsx)("button",{className:"btn",disabled:C,children:n?"Update":"Submit"})})]})},v=a(657),C=a(5804),k=function(e){var n=e.setSidebarOpen,a=(0,i.useContext)(s.D).checkPermission,x=(0,i.useState)([]),b=(0,t.Z)(x,2),h=b[0],f=b[1],k=(0,i.useState)(null),j=(0,t.Z)(k,2),_=j[0],g=j[1],y=(0,i.useState)(!1),A=(0,t.Z)(y,2),Z=A[0],I=A[1],S=(0,d.i)(m.Hv.subPlans),N=S.get,T=S.loading,q=(0,d.i)(m.Hv.subPlans+"/{ID}").remove;return(0,i.useEffect)((function(){N().then((function(e){var n=e.data;if(n.success)return f(n.data)})).catch((function(e){return(0,u.N)({type:"error",message:e.message})}))}),[]),(0,p.jsxs)("div",{className:"".concat(c.content," grid gap-1 m-a p-1"),children:[(0,p.jsx)("div",{className:"flex",children:(0,p.jsxs)("div",{className:"flex align-center pointer gap_5  ml-1",onClick:function(){return n((function(e){return!e}))},children:[(0,p.jsx)(C.Ps6,{style:{fontSize:"1.75rem"}}),(0,p.jsx)("h2",{children:"All Subscription Plans"}),a("sub_plan_create")&&(0,p.jsx)("button",{className:"btn clear iconOnly",onClick:function(e){e.stopPropagation(),I(!0)},children:(0,p.jsx)(v.ueT,{})})]})}),(0,p.jsx)(o.iA,{loading:T,className:c.subPlans,columns:[{label:"Name"},{label:"Duration"},{label:"Price"},{label:"Action"}],children:h.map((function(e){return(0,p.jsxs)("tr",{onClick:function(){g(e),I(!0)},style:{cursor:"pointer"},children:[(0,p.jsx)("td",{children:e.name}),(0,p.jsxs)("td",{children:[e.duration.toLocaleString()," days"]}),(0,p.jsx)("td",{children:e.price.toLocaleString()}),(0,p.jsx)(o.p2,{className:c.actions,actions:[{icon:(0,p.jsx)(l.KHI,{}),label:"Edit",callBack:function(){g(e),I(!0)}}].concat((0,r.Z)(a("sub_plan_delete")?[{icon:(0,p.jsx)(l.lp8,{}),label:"Delete",callBack:function(){return(0,u.N)({type:"confirmation",message:"Are you sure you want to remove this Plan?",callback:function(){q({},{params:{"{ID}":e._id}}).then((function(n){var a=n.data;a.success?f((function(n){return n.filter((function(n){return n._id!==e._id}))})):(0,u.N)({type:"error",message:a.message})}))}})}}]:[]))})]},e._id)}))}),(0,p.jsx)(u.u,{open:Z,head:!0,label:"".concat(_?"View / Update":"Add"," Subscription Plan"),className:c.addSubPlanFormModal,setOpen:function(){g(null),I(!1)},children:(0,p.jsx)(P,{edit:_,onSuccess:function(e){_?(f((function(n){return n.map((function(n){return n._id===e._id?e:n}))})),g(null)):f((function(n){return[].concat((0,r.Z)(n),[e])})),I(!1)}})})]})}}}]);
//# sourceMappingURL=350.29c5294c.chunk.js.map