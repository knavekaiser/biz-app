"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[262],{4262:function(e,s,r){r.r(s),r.d(s,{default:function(){return R}});var a=r(2791),n=r(4581),t=r(6871),o=r(1413),i=r(1134),c=r(6884),d=r(3504),l=r(5454),u=r(1080),m=r(96),h=r(1570),p="auth_container__5S++a",f="auth_background__TwPHd",g="auth_illustration__m6Qo5",x="auth_userTypes__S3RrS",j="auth_active__g4OhT",b="auth_resetPasswordLink__sf-ux",w="auth_resend__1Y0fK",y=r(184),S=h.Ry({phone:h.Z_().required("Required"),name:h.Z_().required("Required"),password:h.Z_().min(8,"Password must be 8 characters or longer").required("Required")}),N=function(){var e=(0,a.useContext)(n.D),s=e.setUser,r=e.userType,h=e.setUserType,p=(0,i.cI)({resolver:(0,l.y)(S)}),f=p.handleSubmit,b=p.register,w=p.formState.errors,N=(0,l.i)(u.Hv["".concat(r,"SignUp")]),I=N.post,v=N.loading,Z=(0,t.s0)();return(0,y.jsxs)("form",{className:"grid gap-1 p-1 m-a",autoComplete:"off",onSubmit:f((function(e){I({phone:e.phone,password:e.password,name:e.name}).then((function(e){var r=e.data;r.success?(s(r.data),localStorage.setItem("userType",r.data.userType),Z(u.Hb.dashboard,{replace:!0})):(0,m.N)({type:"error",message:r.message})}))})),children:[(0,y.jsx)("img",{className:g,src:"/assets/comify.png"}),(0,y.jsxs)("div",{className:"grid gap-1",children:[(0,y.jsx)("h1",{className:"text-center",children:"Comify Studio"}),(0,y.jsx)("div",{className:"flex justify-space-between align-center",children:(0,y.jsx)("h2",{children:"Sign Up"})}),(0,y.jsxs)("ul",{className:x,children:[(0,y.jsx)("li",{className:"business"===r?j:"",onClick:function(){h("business"),localStorage.setItem("userType","business")},children:"Business"}),(0,y.jsx)("li",{className:"admin"===r?j:"",onClick:function(){h("admin"),localStorage.setItem("userType","admin")},children:"Admin"}),(0,y.jsx)("li",{className:"staff"===r?j:"",onClick:function(){h("staff"),localStorage.setItem("userType","staff")},children:"Staff"})]}),(0,y.jsx)(c.II,(0,o.Z)((0,o.Z)({label:"Phone",required:!0},b("phone")),{},{error:w.phone})),(0,y.jsx)(c.II,(0,o.Z)((0,o.Z)({label:"Name",required:!0},b("name")),{},{error:w.name})),(0,y.jsx)(c.II,(0,o.Z)((0,o.Z)({label:"Password",required:!0,type:"password"},b("password")),{},{error:w.password})),(0,y.jsx)("button",{className:"btn",disabled:v,children:"Sign Up"}),(0,y.jsx)(d.rU,{to:u.Hb.signIn,children:"Already have an account"})]})]})},I=r(885),v=h.Ry({phone:h.Z_().required("Required"),password:h.Z_().required("Required")}),Z=function(){var e=(0,a.useContext)(n.D),s=e.setUser,r=e.userType,h=e.setUserType,p=(0,i.cI)({resolver:(0,l.y)(v)}),f=p.handleSubmit,w=p.register,S=p.formState.errors,N=(0,t.TH)(),Z=(0,t.s0)(),_=(0,a.useState)(!1),q=(0,I.Z)(_,2),P=q[0],H=q[1],T=(0,l.i)(u.Hv["".concat(r,"SignIn")]),C=T.post,R=T.loading;return(0,y.jsxs)("form",{className:"grid gap-1 p-1 m-a",onSubmit:f((function(e){H(!1),C({phone:e.phone,password:e.password}).then((function(e){var r=e.data;if(r.success){s(r.data),localStorage.setItem("userType",r.data.userType);var a=["/signin","/signup"].includes(N.pathname)?u.Hb.home:N.pathname||u.Hb.home;Z(a,{replace:!0})}else H(!0)})).catch((function(e){return(0,m.N)({type:"error",message:e.message})}))})),children:[(0,y.jsx)("img",{className:g,src:"/assets/comify.png"}),(0,y.jsxs)("div",{className:"grid gap-1",children:[(0,y.jsx)("h1",{className:"text-center",children:"Comify Studio"}),(0,y.jsx)("div",{className:"flex justify-space-between align-center",children:(0,y.jsx)("h2",{children:"Sign In as"})}),(0,y.jsxs)("ul",{className:x,children:[(0,y.jsx)("li",{className:"business"===r?j:"",onClick:function(){h("business"),localStorage.setItem("userType","business")},children:"Business"}),(0,y.jsx)("li",{className:"admin"===r?j:"",onClick:function(){h("admin"),localStorage.setItem("userType","admin")},children:"Admin"}),(0,y.jsx)("li",{className:"staff"===r?j:"",onClick:function(){h("staff"),localStorage.setItem("userType","staff")},children:"Staff"})]}),P&&(0,y.jsx)("p",{className:"error",children:"Invalid credentials"}),(0,y.jsx)(c.II,(0,o.Z)((0,o.Z)({required:!0,label:"Phone"},w("phone")),{},{error:S.phone})),(0,y.jsx)(c.II,(0,o.Z)((0,o.Z)({required:!0,label:"Password",type:"password"},w("password")),{},{error:S.password})),(0,y.jsx)(d.rU,{className:b,to:u.Hb.resetPassword,children:"Forgot Password?"}),(0,y.jsx)("button",{className:"btn",disabled:R,children:"Sign In"}),(0,y.jsx)(d.rU,{to:u.Hb.signUp,children:"Create New Account"})]})]})},_=h.Ry({phone:h.Z_().required("Required")}),q=h.Ry({code:h.Z_().required("Required"),password:h.Z_().min(8,"Password must be 8 characters or longer").required("Required"),confirmPassword:h.Z_().required("Required").oneOf([h.iH("password")],"Password does not match")}),P=function(e){var s=e.onSuccess,r=(0,l.i)(u.Hv.forgotPassword),a=r.post,n=r.loading,t=(0,i.cI)({resolver:(0,l.y)(_)}),h=t.handleSubmit,p=t.register,f=t.formState.errors;return(0,y.jsxs)("form",{className:"grid gap-1 p-1 m-a",onSubmit:h((function(e){a({phone:e.phone}).then((function(e){var r=e.data;r.success?((0,m.N)({type:"information",message:r.message}),s(r.data)):(0,m.N)({type:"error",message:r.message})}))})),children:[(0,y.jsx)("img",{className:g,src:"/assets/comify.png"}),(0,y.jsxs)("div",{className:"grid gap-1",children:[(0,y.jsx)("h1",{className:"text-center",children:"Comify Studio"}),(0,y.jsx)("h2",{children:"Reset Password"}),(0,y.jsx)(c.II,(0,o.Z)((0,o.Z)({label:"Phone",required:!0},p("phone")),{},{error:f.phone})),(0,y.jsx)("button",{className:"btn",disabled:n,children:"Next"}),(0,y.jsx)(d.rU,{to:u.Hb.signIn,children:"Back to Login"})]})]})},H=function(e){var s=e.setPhone,r=e.phone,n=e.setStep,t=e.timeout,h=e.setTimeout,p=e.onSuccess,f=(0,l.i)(u.Hv.forgotPassword),x=f.post,j=f.loading,b=(0,l.i)(u.Hv.resetPassword),S=b.post,N=b.loading,I=(0,i.cI)({resolver:(0,l.y)(q)}),v=I.handleSubmit,Z=I.register,_=I.formState.errors;return(0,a.useEffect)((function(){r||n(1)}),[r]),(0,y.jsxs)("form",{className:"grid gap-1 p-1 m-a",onSubmit:v((function(e){S({phone:r,password:e.password,code:e.code}).then((function(e){var s=e.data;s.success?p(s):(0,m.N)({type:"error",message:s.message})}))})),children:[(0,y.jsx)("img",{className:g,src:"/assets/comify.png"}),(0,y.jsxs)("div",{className:"grid gap-1",children:[(0,y.jsx)("h1",{className:"text-center",children:"Comify"}),(0,y.jsx)("h2",{children:"Reset Password"}),(0,y.jsxs)("p",{children:["Please enter the 6 digit code sent to ",r,"."]}),(0,y.jsx)(c.II,(0,o.Z)((0,o.Z)({type:"number",label:"Code",required:!0},Z("code")),{},{error:_.code})),(0,y.jsxs)("p",{className:w,children:["Didn't recieve the Code?"," ",t?(0,y.jsxs)(y.Fragment,{children:["Please wait"," ",(0,y.jsx)(c.IT,{time:(new Date).setSeconds((new Date).getSeconds()+t),format:"mm:ss",onEnd:function(){return h(null)}})]}):(0,y.jsx)("button",{type:"button",onClick:function(){x({phone:r}).then((function(e){var r=e.data;r.success?(s(r.data.phone),h(r.data.timeout)):(0,m.N)({type:"error",message:r.message})}))},disabled:j,children:"Resend"})]}),(0,y.jsx)("hr",{}),(0,y.jsx)(c.II,(0,o.Z)((0,o.Z)({label:"New Password",type:"password",required:!0},Z("password")),{},{error:_.password})),(0,y.jsx)(c.II,(0,o.Z)((0,o.Z)({label:"Config Password",type:"password",required:!0},Z("confirmPassword")),{},{error:_.confirmPassword})),(0,y.jsx)("button",{className:"btn",type:"submit",disabled:j||N,children:"Submit"}),(0,y.jsx)(d.rU,{to:u.Hb.signIn,children:"Back to Login"})]})]})},T=function(){var e=(0,a.useState)(1),s=(0,I.Z)(e,2),r=s[0],n=s[1],o=(0,a.useState)(null),i=(0,I.Z)(o,2),c=i[0],d=i[1],l=(0,a.useState)(null),h=(0,I.Z)(l,2),p=h[0],f=h[1],g=(0,t.s0)();return(0,y.jsxs)(y.Fragment,{children:[1===r&&(0,y.jsx)(P,{onSuccess:function(e){d(e.phone),f(e.timeout),n(2)}}),2===r&&(0,y.jsx)(H,{setPhone:d,phone:c,setStep:n,timeout:p,setTimeout:f,onSuccess:function(e){(0,m.N)({type:"information",message:e.message,callback:function(){return g(u.Hb.signIn)}})}})]})},C=r(3750),R=function(){var e=(0,a.useContext)(n.D).user,s=(0,t.s0)(),r=(0,t.TH)();return(0,a.useEffect)((function(){e&&s(u.Hb.home,{replace:!0})}),[e,r]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(C.h,{}),(0,y.jsxs)("div",{className:p,children:[(0,y.jsxs)(t.Z5,{children:[(0,y.jsx)(t.AW,{path:u.Hb.signUp,element:(0,y.jsx)(N,{})}),(0,y.jsx)(t.AW,{path:u.Hb.signIn,element:(0,y.jsx)(Z,{})}),(0,y.jsx)(t.AW,{path:u.Hb.resetPassword,element:(0,y.jsx)(T,{})})]}),(0,y.jsx)("img",{className:f,src:"https://images.unsplash.com/photo-1522441815192-d9f04eb0615c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=".concat(window.innerWidth,"&h=").concat(window.innerHeight,"&q=100")})]}),(0,y.jsx)(C.$,{})]})}}}]);
//# sourceMappingURL=262.da4614a7.chunk.js.map