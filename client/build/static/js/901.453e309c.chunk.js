"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[901],{4901:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var a=t(1413),r=t(885),c=t(6884),i=t(96),l=t(3750),s=t(1080),o=t(5454),u=t(2791),m={landingPage:"home_landingPage__PGhRk",allProducts:"home_allProducts__375Ny",store:"home_store__wGYk6",featured:"home_featured__G3PDC",products:"home_products__qc9X5",sidebar:"home_sidebar__tYk+c",filterBtn:"home_filterBtn__24Ikb",categories:"home_categories__j8-l5",subCategories:"home_subCategories__Moeme",section:"home_section__+YX1m",head:"home_head__O5-Gv",sectionContent:"home_sectionContent__IXOOI",filterList:"home_filterList__PpK91"},d=t(2075),f=t(9126),h=t(3853),g=t(7692),p=t(2982),x=t(4942),b=t(8617),v=t(1134),Z=t(3504),j=t(6871),y=t(184),N=function(e){var n=e.field,t=e.setFilters,i=e.sidebarItem,l=e.control,d=(0,u.useState)([]),f=(0,r.Z)(d,2),h=f[0],g=f[1],b=(0,u.useState)([]),v=(0,r.Z)(b,2),Z=v[0],j=v[1],N=(0,o.i)(s.Hv.elements+"/".concat((null===n||void 0===n?void 0:n.collection)||"")).get;return(0,u.useEffect)((function(){"list"===i.filterStyle&&t((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,x.Z)({},n.name,null!==h&&void 0!==h&&h.length?h:""))}))}),[h]),(0,u.useEffect)((function(){"collection"===n.optionType&&N().then((function(e){var t=e.data;if(null!==t&&void 0!==t&&t.success)return j(t.data.map((function(e){return{label:e[n.optionLabel],value:e[n.optionValue]}})))})).catch((function(e){return console.log(e)}))}),[]),"list"===i.filterStyle?(0,y.jsx)(_,{label:n.label,children:(0,y.jsx)("ul",{className:m.filterList,children:("array"===n.optionType?n.options:Z).map((function(e,t){return(0,y.jsxs)("li",{children:[(0,y.jsx)("input",{id:"".concat(n.name,"_").concat(e.label),type:"checkbox",checked:h.includes(e.value),onChange:function(n){h.includes(e.value)?g((function(n){return n.filter((function(n){return n!==e.value}))})):g((function(n){return[].concat((0,p.Z)(n),[e.value])}))}})," ",(0,y.jsx)("label",{htmlFor:"".concat(n.name,"_").concat(e.label),children:e.label})]},t)}))})}):"dropdown"===i.filterStyle?(0,y.jsx)(_,{label:n.label,children:(0,y.jsx)(c.OC,(0,a.Z)((0,a.Z)((0,a.Z)({control:l},"array"===n.optionType&&{options:n.options}),"collection"===n.optionType&&{url:"".concat(s.Hv.elements,"/").concat(n.collection),getQuery:function(e,t){return(0,a.Z)((0,a.Z)({},e&&(0,x.Z)({},n.optionLabel,e)),t&&(0,x.Z)({},n.optionValue,t))},handleData:function(e){return{label:e[n.optionLabel],value:e[n.optionValue]}}}),{},{multiple:!0,name:n.name,formOptions:{required:n.required},className:m.itemName,onChange:function(e){t((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,x.Z)({},n.name,e.length?e.map((function(e){return e.value})):""))}))}}))}):null},_=function(e){var n=e.label,t=e.children,a=e.className;return(0,y.jsxs)("div",{className:"".concat(m.section," ").concat(a||""),children:[(0,y.jsx)("div",{className:m.head,children:n}),(0,y.jsx)("div",{className:m.sectionContent,onClick:function(e){return e.stopPropagation()},children:t})]})},C=function(e){var n=e.schema,t=e.fields,i=(e.filters,e.setFilters),l=(0,u.useRef)(!1),s=(0,u.useRef)({}),o=(0,Z.lr)(),d=(0,r.Z)(o,2),f=d[0],h=(d[1],(0,j.TH)().pathname),g=(0,j.s0)(),p=(0,v.cI)({defaultValues:{sort:"price-asc"}}),C=p.handleSubmit,k=p.control,S=p.reset,T=(p.watch,p.getValues),F=p.setValue;return(0,u.useEffect)((function(){if(t.length&&!l.current){var e={};t.forEach((function(n){f[n.fieldName]?e[n.fieldName]=f[n.fieldName]:(f[n.fieldName+"-min"]||f[n.fieldName+"-max"])&&("range"===n.filterType?e[n.fieldName+"-range"]={min:+f[n.fieldName+"-min"],max:+f[n.fieldName+"-max"]}:(e[n.fieldName+"-min"]=+f[n.fieldName+"-min"],e[n.fieldName+"-max"]=+f[n.fieldName+"-max"]))})),S(e),l.current=!0}}),[t,f]),(0,y.jsxs)("form",{className:"all-columns",onSubmit:C((function(e){})),children:[Object.keys(f).length>1&&(0,y.jsx)("div",{className:m.clearFilters,children:(0,y.jsxs)("button",{className:"btn",type:"button",onClick:function(){S(s.current),g({pathname:h,query:{sort:f.sort}},void 0,{shallow:!0,replace:!0})},children:[(0,y.jsx)(b.fMW,{}),"Clear All Filters"]})}),n&&(t||[]).map((function(e){var t,r=n.find((function(n){return n.name===e.fieldName}));return r?"textSearch"===e.filterType||"match"===e.filterType?(s.current=(0,a.Z)((0,a.Z)({},s.current),{},(0,x.Z)({},r.name,"")),(0,y.jsx)(_,{label:r.label,children:(0,y.jsx)(c.II,{control:k,name:r.name,type:r.inputType,onChange:function(e){i((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,x.Z)({},r.name,e.target.value||""))}))}})},e.fieldName)):"minMax"===e.filterType?(s.current=(0,a.Z)((0,a.Z)({},s.current),{},(t={},(0,x.Z)(t,"".concat(r.name,"-min"),""),(0,x.Z)(t,"".concat(r.name,"-max"),""),t)),(0,y.jsxs)(_,{label:r.label,children:[(0,y.jsx)(c.II,{control:k,name:"".concat(r.name,"-min"),type:r.inputType,placeholder:"MIN",onChange:function(e){var n=T("".concat(r.name,"-max"));+e.target.value<=+n?i((function(t){var c;return(0,a.Z)((0,a.Z)({},t),{},(c={},(0,x.Z)(c,"".concat(r.name,"-min"),+e.target.value),(0,x.Z)(c,"".concat(r.name,"-max"),+n),c))})):i((function(e){var n;return(0,a.Z)((0,a.Z)({},e),{},(n={},(0,x.Z)(n,"".concat(r.name,"-min"),""),(0,x.Z)(n,"".concat(r.name,"-max"),""),n))}))}}),(0,y.jsx)(c.II,{control:k,name:"".concat(r.name,"-max"),type:r.inputType,placeholder:"MAX",onChange:function(e){var n=T("".concat(r.name,"-min"));+e.target.value>=+n?i((function(t){var c;return(0,a.Z)((0,a.Z)({},t),{},(c={},(0,x.Z)(c,"".concat(r.name,"-max"),+e.target.value),(0,x.Z)(c,"".concat(r.name,"-min"),+n),c))})):i((function(e){var n;return(0,a.Z)((0,a.Z)({},e),{},(n={},(0,x.Z)(n,"".concat(r.name,"-max"),""),(0,x.Z)(n,"".concat(r.name,"-min"),""),n))}))}}),+T("".concat(r.name,"-max"))<+T("".concat(r.name,"-min"))&&(0,y.jsx)("p",{className:"subtitle1",children:"Max must be greater then Min"})]},e.fieldName)):"range"===e.filterType?(0,y.jsx)(_,{label:r.label,children:(0,y.jsx)(c.e6,{control:k,name:"".concat(r.name,"-range"),setValue:F,type:r.inputType,placeholder:"".concat(r.label," range"),onChange:function(e){var n=e.min,t=e.max;i(n<=t?function(e){var c;return(0,a.Z)((0,a.Z)({},e),{},(c={},(0,x.Z)(c,"".concat(r.name,"-min"),n),(0,x.Z)(c,"".concat(r.name,"-max"),t),c))}:function(e){var n;return(0,a.Z)((0,a.Z)({},e),{},(n={},(0,x.Z)(n,"".concat(r.name,"-min"),""),(0,x.Z)(n,"".concat(r.name,"-max"),""),n))})},min:+e.min,max:+e.max})},e.fieldName):["list","dropdown"].includes(e.filterStyle)?(s.current=(0,a.Z)((0,a.Z)({},s.current),{},(0,x.Z)({},r.name,[])),(0,y.jsx)(N,{field:r,sidebarItem:e,setFilters:i,control:k},e.fieldName)):void 0:null})),(0,y.jsx)("button",{hidden:!0,type:"submit",disabled:!0})]})},k=function(e){var n,t,l,d,p,x=e.filters,b=e.setFilters,v=e.config,Z=(0,u.useRef)(window.innerWidth<=480),j=(0,u.useState)(!Z.current),N=(0,r.Z)(j,2),_=N[0],k=N[1],S=(0,u.useState)(null),T=(0,r.Z)(S,2),F=T[0],w=T[1],I=(0,u.useState)([]),P=(0,r.Z)(I,2),O=P[0],B=P[1],E=(0,o.i)(s.Hv.homeCategories).get;return(0,u.useEffect)((function(){E().then((function(e){var n=e.data;n.success?B(n.data):(0,i.N)({type:"error",message:n.message})})).catch((function(e){return(0,i.N)({type:"error",message:e.message})}))}),[]),_?(0,y.jsx)("div",{className:m.sidebar,children:F&&(null===v||void 0===v||null===(n=v.sidebarFilters)||void 0===n||null===(t=n.find((function(e){return e.category===x.category&&e.subcategory===x.subcategory})))||void 0===t||null===(l=t.filters)||void 0===l?void 0:l.length)>0?(0,y.jsxs)("div",{className:"flex align-center gap_5 ".concat(Z.current?"justify-space-between":""," pointer wrap"),onClick:function(){w(null),b((function(e){return{category:e.category,subcategory:void 0}}))},children:[(0,y.jsx)(f.And,{style:{fontSize:"1.3em"}})," ",(0,y.jsx)("div",{className:"flex align-center gap_5",children:(0,y.jsxs)("p",{className:"flex align-center gap_5",children:[x.category," ",(0,y.jsx)(h.Tfp,{})," ",x.subcategory]})}),(0,y.jsx)("button",{className:"".concat(m.filterBtn," btn clear"),onClick:function(){return k(!1)},children:(0,y.jsx)(g.Ol$,{})}),(0,y.jsx)(C,{filters:x,setFilters:b,schema:F,fields:(null===v||void 0===v||null===(d=v.sidebarFilters)||void 0===d||null===(p=d.find((function(e){return e.category===x.category&&e.subcategory===x.subcategory})))||void 0===p?void 0:p.filters)||[]})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"flex align-center justify-space-between gap_5 pb-1",children:[(0,y.jsx)("p",{children:(0,y.jsx)("strong",{children:"Categories"})}),Z.current&&(0,y.jsx)("button",{className:"".concat(m.filterBtn," btn clear"),onClick:function(){return k(!1)},children:(0,y.jsx)(g.Ol$,{})})]}),(0,y.jsx)("ul",{className:m.categories,children:O.map((function(e){var n;return(0,y.jsxs)("li",{children:[(0,y.jsx)(c.XZ,{label:e.name,checked:x.category===e.name,onChange:function(n){x.category===e.name?b((function(e){return(0,a.Z)((0,a.Z)({},e),{},{category:void 0})})):b((function(n){return(0,a.Z)((0,a.Z)({},n),{},{category:e.name})}))}}),(null===(n=e.subCategories)||void 0===n?void 0:n.length)>0&&(0,y.jsx)("ul",{className:m.subCategories,children:e.subCategories.map((function(n){return(0,y.jsx)("li",{children:(0,y.jsx)(c.XZ,{label:n.name,checked:x.subcategory===n.name,onChange:function(t){x.subcategory===n.name?b((function(e){return(0,a.Z)((0,a.Z)({},e),{},{subcategory:void 0})})):b((function(t){return(0,a.Z)((0,a.Z)({},t),{},{category:e.name,subcategory:n.name})})),w(t.target.checked?n.fields:null)}})},n.name)}))})]},e.name)}))})]})}):(0,y.jsx)("div",{className:"".concat(m.sidebar," flex justify-end"),children:(0,y.jsx)("button",{className:"".concat(m.filterBtn," btn clear"),onClick:function(){return k(!0)},children:(0,y.jsx)(g.Ol$,{})})})},S=function(){var e=(0,u.useState)({}),n=(0,r.Z)(e,2),t=n[0],a=n[1],c=(0,u.useState)(null),f=(0,r.Z)(c,2),h=f[0],g=f[1],p=(0,u.useState)([]),x=(0,r.Z)(p,2),b=x[0],v=x[1],Z=(0,o.i)(s.Hv.homeStores),j=Z.get,N=(Z.loading,(0,o.i)(s.Hv.homeConfig).get),_=(0,u.useCallback)((function(){j({query:t}).then((function(e){var n=e.data;n.success?v(n.data):(0,i.N)({type:"error",message:n.message})})).catch((function(e){return(0,i.N)({type:"error",message:e.message})}))}),[t]);return(0,u.useEffect)((function(){_()}),[t]),(0,u.useEffect)((function(){N().then((function(e){var n=e.data;n.success?g(n.data):(0,i.N)({type:"error",message:n.message})})).catch((function(e){return(0,i.N)({type:"error",message:e.message})}))}),[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l.h,{home:!0,filters:t,setFilters:a}),(0,y.jsxs)("div",{className:m.landingPage,children:[(0,y.jsx)(k,{filters:t,config:h,setFilters:a}),(0,y.jsxs)("div",{className:m.allProducts,children:[0===b.length&&(0,y.jsx)("p",{className:"all-columns text-center p-2",children:"Nothing for now."}),b.map((function(e){return e.featured?(0,y.jsxs)("div",{className:"".concat(m.store," ").concat(e.featured?m.featured:""),children:[(0,y.jsx)("h2",{children:e.business.name}),(0,y.jsx)("div",{className:m.products,children:e.products.map((function(n){return(0,y.jsx)(d.B,{order:e.order,business:e.business,product:n},n._id)}))})]},e._id):(0,y.jsx)(d.B,{order:e.order,business:e.business,product:e.products[0]},e._id)}))]})]}),(0,y.jsx)(l.$,{})]})}}}]);
//# sourceMappingURL=901.453e309c.chunk.js.map