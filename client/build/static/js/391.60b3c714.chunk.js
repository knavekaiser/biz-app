"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[391],{8391:function(e,n,a){a.r(n),a.d(n,{default:function(){return g}});var t=a(2982),s=a(885),l=a(2791),r=a(3806),i=a(2202),o=a(8750),c={content:"emps_content__0xjQt",emps:"emps_emps__wcafE",addEmpForm:"emps_addEmpForm__HGk2z",empDetail:"emps_empDetail__piqL6",box:"emps_box__fhcd2",mainForm:"emps_mainForm__90MXD",head:"emps_head__ZzfST"},u=a(5454),d=a(1080),m=a(1413),p=a(1134),f=a(1570),_=a(184),h=f.Ry({employee:f.Z_().required(),roles:f.IX().of(f.Z_())}),x=function(e){var n=e.edit,a=e.onSuccess,t=(0,p.cI)({resolver:(0,u.y)(h)}),s=t.handleSubmit,i=t.reset,f=t.control,x=(0,u.i)(d.Hv.employees),v=x.put,b=x.loading;return(0,l.useEffect)((function(){var e;i({employee:(null===n||void 0===n?void 0:n._id)||"",roles:(null===n||void 0===n||null===(e=n.roles)||void 0===e?void 0:e.map((function(e){return e._id})))||[]})}),[n]),(0,_.jsx)("div",{className:"grid gap-1 p-1 ".concat(c.addEmpForm),children:(0,_.jsxs)("form",{onSubmit:s((function(e){v(e).then((function(e){var n=e.data;if(!n.success)return(0,o.N)({type:"error",message:n.message});a(n.data)})).catch((function(e){return(0,o.N)({type:"error",message:e.message})}))})),className:"".concat(c.mainForm," grid gap-1"),children:[(0,_.jsx)(r.OC,{disabled:null===n||void 0===n?void 0:n._id,control:f,label:"Staff",url:d.Hv.staffs,getQuery:function(e,n){return(0,m.Z)((0,m.Z)({},e&&{name:e}),n&&{_id:n})},handleData:function(e){return{label:e.name,value:e._id}},name:"employee",formOptions:{required:!0}}),(0,_.jsx)(r.OC,{control:f,label:"Role",url:d.Hv.roles,getQuery:function(e,n){return(0,m.Z)((0,m.Z)({},e&&{name:e}),n&&{_id:n})},handleData:function(e){return{label:e.name,value:e._id}},multiple:!0,name:"roles",formOptions:{required:!0}}),(0,_.jsx)("div",{className:"btns",children:(0,_.jsx)("button",{className:"btn",disabled:b,children:n?"Update":"Submit"})})]})})},v=a(4581),b=a(5804),j=a(657),g=function(e){var n=e.setSidebarOpen,a=(0,l.useContext)(v.D).checkPermission,m=(0,l.useState)([]),p=(0,s.Z)(m,2),f=p[0],h=p[1],g=(0,l.useState)(null),y=(0,s.Z)(g,2),N=y[0],S=y[1],Z=(0,l.useState)(!1),k=(0,s.Z)(Z,2),C=k[0],E=k[1],F=(0,u.i)(d.Hv.employees),O=F.get,D=F.loading;return(0,l.useEffect)((function(){O().then((function(e){var n=e.data;if(n.success)return h(n.data)})).catch((function(e){console.log(e),(0,o.N)({type:"error",message:e.message})}))}),[]),(0,_.jsxs)("div",{className:"".concat(c.content," grid gap-1 m-a p-1"),children:[(0,_.jsx)("div",{className:"flex ".concat(c.head),children:(0,_.jsxs)("div",{className:"flex align-center pointer gap_5  ml-1",onClick:function(){return n((function(e){return!e}))},children:[(0,_.jsx)(b.Ps6,{style:{fontSize:"1.75rem"}}),(0,_.jsx)("h2",{children:"All Staffs"}),a("employee_create")&&(0,_.jsx)("button",{className:"btn clear iconOnly",onClick:function(e){e.stopPropagation(),E(!0)},children:(0,_.jsx)(j.ueT,{})})]})}),(0,_.jsx)(r.iA,{loading:D,className:c.emps,columns:[{label:"Name"},{label:"Role"},{label:"Action"}],children:f.map((function(e){return(0,_.jsxs)("tr",{onClick:function(){S(e),E(!0)},style:{cursor:"pointer"},children:[(0,_.jsx)("td",{className:c.date,children:e.name}),(0,_.jsx)("td",{className:c.date,children:e.roles.map((function(e){return(0,_.jsx)("p",{children:e.name},e._id)}))}),(0,_.jsx)(r.p2,{className:c.actions,actions:(0,t.Z)(a("employee_update")?[{icon:(0,_.jsx)(i.KHI,{}),label:"Update",callBack:function(){S(e),E(!0)}}]:[])})]},e._id)}))}),(0,_.jsx)(o.u,{open:C,head:!0,label:"".concat(N?"Update":"Add"," Staff"),className:c.addEmpFormModal,setOpen:function(){S(null),E(!1)},children:(0,_.jsx)(x,{edit:N,onSuccess:function(e){N?(h((function(n){return e?n.map((function(n){return n._id===e._id?e:n})):n.filter((function(e){return e._id!==N._id}))})),S(null)):h((function(n){return[].concat((0,t.Z)(n),[e])})),E(!1)}})})]})}}}]);
//# sourceMappingURL=391.60b3c714.chunk.js.map