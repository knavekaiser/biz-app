"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[391],{8391:function(e,n,a){a.r(n),a.d(n,{default:function(){return b}});var t=a(2982),s=a(885),r=a(2791),l=a(3806),i=a(6355),o=a(96),c={content:"emps_content__0xjQt",emps:"emps_emps__wcafE",addEmpForm:"emps_addEmpForm__HGk2z",empDetail:"emps_empDetail__piqL6",box:"emps_box__fhcd2",mainForm:"emps_mainForm__90MXD"},u=a(5454),d=a(1080),m=a(1413),p=a(1134),f=a(1570),_=a(184),h=f.Ry({employee:f.Z_().required(),roles:f.IX().of(f.Z_())}),v=function(e){var n=e.edit,a=e.onSuccess,t=(0,p.cI)({resolver:(0,u.y)(h)}),s=t.handleSubmit,i=t.reset,f=t.control,v=(0,u.i)(d.Hv.employees),x=v.put,b=v.loading;return(0,r.useEffect)((function(){var e;i({employee:(null===n||void 0===n?void 0:n._id)||"",roles:(null===n||void 0===n||null===(e=n.roles)||void 0===e?void 0:e.map((function(e){return e._id})))||[]})}),[n]),(0,_.jsx)("div",{className:"grid gap-1 p-1 ".concat(c.addEmpForm),children:(0,_.jsxs)("form",{onSubmit:s((function(e){x(e).then((function(e){var n=e.data;if(!n.success)return(0,o.N)({type:"error",message:n.message});a(n.data)})).catch((function(e){return(0,o.N)({type:"error",message:e.message})}))})),className:"".concat(c.mainForm," grid gap-1"),children:[(0,_.jsx)(l.OC,{disabled:null===n||void 0===n?void 0:n._id,control:f,label:"Staff",url:d.Hv.staffs,getQuery:function(e,n){return(0,m.Z)((0,m.Z)({},e&&{name:e}),n&&{_id:n})},handleData:function(e){return{label:e.name,value:e._id}},name:"employee",formOptions:{required:!0}}),(0,_.jsx)(l.OC,{control:f,label:"Role",url:d.Hv.roles,getQuery:function(e,n){return(0,m.Z)((0,m.Z)({},e&&{name:e}),n&&{_id:n})},handleData:function(e){return{label:e.name,value:e._id}},multiple:!0,name:"roles",formOptions:{required:!0}}),(0,_.jsx)("div",{className:"btns",children:(0,_.jsx)("button",{className:"btn",disabled:b,children:n?"Update":"Submit"})})]})})},x=a(4581),b=function(){var e=(0,r.useContext)(x.D).checkPermission,n=(0,r.useState)([]),a=(0,s.Z)(n,2),m=a[0],p=a[1],f=(0,r.useState)(null),h=(0,s.Z)(f,2),b=h[0],j=h[1],g=(0,r.useState)(!1),N=(0,s.Z)(g,2),y=N[0],S=N[1],Z=(0,u.i)(d.Hv.employees),k=Z.get,C=Z.loading;return(0,r.useEffect)((function(){k().then((function(e){var n=e.data;if(n.success)return p(n.data)})).catch((function(e){console.log(e),(0,o.N)({type:"error",message:e.message})}))}),[]),(0,_.jsxs)("div",{className:"".concat(c.content," grid gap-1 m-a p-1"),children:[(0,_.jsxs)("div",{className:"flex",children:[(0,_.jsx)("h2",{children:"All Staffs"}),e("employee_create")&&(0,_.jsx)("button",{className:"btn m-a mr-0",onClick:function(){return S(!0)},children:"Add Staff"})]}),(0,_.jsx)(l.iA,{loading:C,className:c.emps,columns:[{label:"Name"},{label:"Role"},{label:"Action"}],children:m.map((function(n){return(0,_.jsxs)("tr",{onClick:function(){j(n),S(!0)},style:{cursor:"pointer"},children:[(0,_.jsx)("td",{className:c.date,children:n.name}),(0,_.jsx)("td",{className:c.date,children:n.roles.map((function(e){return(0,_.jsx)("p",{children:e.name},e._id)}))}),(0,_.jsx)(l.p2,{className:c.actions,actions:(0,t.Z)(e("employee_update")?[{icon:(0,_.jsx)(i.KHI,{}),label:"Update",callBack:function(){j(n),S(!0)}}]:[])})]},n._id)}))}),(0,_.jsx)(o.u,{open:y,head:!0,label:"".concat(b?"Update":"Add"," Staff"),className:c.addEmpFormModal,setOpen:function(){j(null),S(!1)},children:(0,_.jsx)(v,{edit:b,onSuccess:function(e){b?(p((function(n){return e?n.map((function(n){return n._id===e._id?e:n})):n.filter((function(e){return e._id!==b._id}))})),j(null)):p((function(n){return[].concat((0,t.Z)(n),[e])})),S(!1)}})})]})}}}]);
//# sourceMappingURL=391.29cba791.chunk.js.map