"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[178],{6178:function(e,n,t){t.r(n),t.d(n,{default:function(){return ce}});var i=t(2982),l=t(1413),r=t(885),a=t(2791),s=t(4581),o=t(1134),c=t(3806),u=t(1570),d="settings_container__5uGtY",m="settings_terms__uqrGj",f="settings_faqDocs__EAC4D",p="settings_unitForm__xUNil",v="settings_itemColumnsRadio__jmFdY",b="settings_termForm__TKePQ",h="settings_docUrls__BjWd6",x="settings_urlInput__74QLX",g="settings_termFormModal__ka7fI",j="settings_recFilterModal__IAi3S",N="settings_landingPageShelveFormModal__704Np",y=t(5454),Z=t(6355),S=t(96),C=t(1080),I=t(6871),w=t(184),_=function(e){var n=e.terms,t=e.setTerms,l=(0,a.useState)(null),s=(0,r.Z)(l,2),o=s[0],u=s[1],d=(0,a.useState)(!1),f=(0,r.Z)(d,2),p=f[0],v=f[1];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"flex justify-space-between align-center",children:[(0,w.jsx)("h3",{children:"Terms & Conditions"}),(0,w.jsx)("button",{type:"button",className:"btn",onClick:function(){return v(!0)},children:"Add New Term"})]}),(0,w.jsx)(c.iA,{className:m,columns:[{label:"Terms"},{label:"Action"}],children:n.map((function(e,n){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e}),(0,w.jsx)(c.p2,{actions:[{icon:(0,w.jsx)(Z.KHI,{}),label:"Edit",callBack:function(){u(e),v(!0)}},{icon:(0,w.jsx)(Z.lp8,{}),label:"Delete",callBack:function(){return(0,S.N)({type:"confirmation",message:"Are you sure you want to remove this Term?",callback:function(){t((function(n){return n.filter((function(n){return n.toLowerCase()!==e.toLowerCase()}))}))}})}}]})]},n)}))}),(0,w.jsx)(S.u,{head:!0,label:o?"Update Term":"Add Term",open:p,setOpen:v,className:g,children:(0,w.jsx)(P,{edit:o,onSuccess:function(e){o?(t((function(n){return n.map((function(n){return n.toLowerCase()===o.toLowerCase()?e:n}))})),u(null)):t((function(n){return[].concat((0,i.Z)(n),[e])})),v(!1)}})})]})},T=u.Ry({term:u.Z_().required()}),P=function(e){var n=e.edit,t=e.onSuccess,i=(0,o.cI)({resolver:(0,y.y)(T)}),r=i.handleSubmit,s=i.register,u=i.reset,d=i.formState.errors,m=(0,a.useRef)();return(0,a.useEffect)((function(){u({term:n||""})}),[n]),(0,w.jsxs)("form",{ref:m,className:b,onSubmit:r((function(e){t(e.term)})),children:[(0,w.jsx)(c.gx,(0,l.Z)((0,l.Z)({label:"Term"},s("term")),{},{error:d.term})),(0,w.jsx)("div",{className:"btns",children:(0,w.jsx)("button",{className:"btn",type:"button",onClick:r((function(e){t(e.term)})),children:"Submit"})})]})},E=function(e){var n=e.next,t=(0,a.useContext)(s.D),i=t.user,c=t.setUser,u=t.business,d=t.setBusiness,m=(0,a.useState)(!1),f=(0,r.Z)(m,2),p=f[0],v=f[1],b=(0,I.s0)(),h=(0,o.cI)(),x=h.handleSubmit,g=(h.formState.errors,(0,a.useState)([])),j=(0,r.Z)(g,2),N=j[0],Z=j[1],T=(0,y.i)(u?C.Hv.businesses+"/".concat(u.business._id):C.Hv.businessProfile),P=T.put,E=T.loading;return(0,a.useEffect)((function(){var e=(null===u||void 0===u?void 0:u.business)||i;Z(e.terms||[])}),[i,u]),(0,w.jsxs)("form",{className:"grid gap-1",onSubmit:x((function(e){P({terms:N}).then((function(e){var n=e.data;if(!n.success)return(0,S.N)({type:"error",message:n.message});u?d((function(e){return(0,l.Z)((0,l.Z)({},e),{},{business:(0,l.Z)((0,l.Z)({},e.business),{},{terms:N})})})):c((function(e){return(0,l.Z)((0,l.Z)({},e),{},{terms:N})})),(0,S.N)((0,l.Z)({type:"information",message:"Updates have been saved."},p&&{callback:function(){return b(C.Hb.dashboard.replace("*","")+C.Hb.settings.baseUrl.replace("*","")+C.Hb.settings.faqDocuments,{state:{next:!0}})}}))})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))})),children:[(0,w.jsx)(_,{terms:N,setTerms:Z}),(0,w.jsxs)("div",{className:"flex gap-1 justify-center",children:[(0,w.jsx)("button",{className:"btn",disabled:E,children:"Save Changes"}),n&&(0,w.jsx)("button",{className:"btn",disabled:E,onClick:function(){return v(!0)},children:"Next"})]})]})},D=t(4942),A=t(4925),k=t(8300),F=["fieldName"],H=["fieldName"],U=["fieldName"],O=function(e){var n=e.fields,t=void 0===n?[]:n,l=e.shelves,s=void 0===l?[]:l,o=(e.value,e.onChange),u=(0,a.useState)(null),d=(0,r.Z)(u,2),m=d[0],f=d[1],p=(0,a.useState)(!1),v=(0,r.Z)(p,2),b=v[0],h=v[1];return(0,w.jsxs)("div",{className:"grid gap-1",children:[(0,w.jsxs)("div",{className:"flex justify-space-between align-center",children:[(0,w.jsx)("h5",{children:"Shelves"}),(0,w.jsx)("button",{className:"btn",type:"button",onClick:function(){return h(!0)},children:"Add Shelf"})]}),(0,w.jsx)(c.iA,{columns:[{label:"Tilte"},{label:"Product Count"},{label:"Filters"},{label:"Actions"}],children:null===s||void 0===s?void 0:s.map((function(e,n){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e.title}),(0,w.jsx)("td",{children:e.productCount}),(0,w.jsx)("td",{children:e.productFilters.length}),(0,w.jsx)(c.p2,{actions:[{icon:(0,w.jsx)(Z.KHI,{}),label:"Edit",callBack:function(){f(e),h(!0)}},{icon:(0,w.jsx)(Z.lp8,{}),label:"Delete",callBack:function(){return(0,S.N)({type:"confirmation",message:"Are you sure you want to remove this Shelf?",callback:function(){o(s.filter((function(n){return e._id!==n._id})))}})}}]})]},n)}))}),(0,w.jsx)(S.u,{open:b,setOpen:function(){h(!1),f(null)},head:!0,label:m?"Edit":"Add Shelf",className:N,children:(0,w.jsx)(B,{edit:m,fields:t,onSubmit:function(e){m?(o(s.map((function(n){return e._id===n._id?e:n}))),f(null)):o([].concat((0,i.Z)(s),[e])),h(!1)}})})]})},L=u.Ry({title:u.Z_().required(),productFilters:u.IX().min(1,"Please add at least one product filter").required("Please add at least one product filter"),productCount:u.Rx().min(2,"Please enter more than 1").required().typeError("Please enter a valid number")}),B=function(e){var n=e.fields,t=void 0===n?[]:n,i=e.edit,s=e.onSubmit,u=(0,o.cI)({resolver:(0,y.y)(L)}),d=u.handleSubmit,m=(u.control,u.register),f=u.watch,p=u.setValue,v=u.reset,b=u.formState.errors,h=u.clearErrors,x=(0,a.useState)(!1),g=(0,r.Z)(x,2),j=g[0],N=g[1],Z=(0,a.useCallback)((function(e){s((0,l.Z)((0,l.Z)({},e),{},{_id:(null===i||void 0===i?void 0:i._id)||Math.random().toString(36).substr(-8)}))}),[]),C=f("productFilters");return(0,a.useEffect)((function(){v((0,l.Z)({},i))}),[i]),(0,w.jsxs)("div",{className:"p-1 grid gap-1",children:[(0,w.jsxs)("form",{onSubmit:d(Z),className:"grid gap-1",children:[(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Title"},m("title")),{},{error:b.title})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Number of Products",type:"number"},m("productCount")),{},{error:b.productCount})),(0,w.jsx)(c.XZ,(0,l.Z)({label:"Horizontal"},m("horizontalSlide"))),(0,w.jsxs)("div",{className:"flex justify-space-between align-center",children:[(0,w.jsx)("h5",{children:"Product Filters"}),(0,w.jsx)("button",{className:"btn",type:"button",onClick:function(){return N(!0)},children:"Add/Update Filters"})]}),b.productFilters&&(0,w.jsx)("p",{className:"error",children:b.productFilters.message}),(0,w.jsx)(c.iA,{columns:[{label:"Field"},{label:"Oparator/Value"}],children:null===C||void 0===C?void 0:C.map((function(e,n){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e.fieldName}),(0,w.jsxs)("td",{children:[e.filterType," ",e.value]})]},n)}))})]}),(0,w.jsx)(S.u,{open:j,edit:j,head:!0,label:"Update Filters",setOpen:N,children:(0,w.jsx)(V,{fields:t,value:C,onSuccess:function(e){p("productFilters",e),N(null),h("productFilters")},includeValue:!0})}),(0,w.jsx)("form",{onSubmit:d(Z),children:(0,w.jsx)("div",{className:"flex justify-center",children:(0,w.jsx)("button",{className:"btn",children:"Submit"})})})]})},V=function(e){for(var n=e.fields,t=void 0===n?[]:n,i=e.value,s=void 0===i?[]:i,u=e.onSuccess,d=e.includeValue,m=(0,o.cI)(),f=m.handleSubmit,p=m.register,v=m.control,b=m.watch,h=m.reset,x=m.getValues,g=m.formState.errors,j=b("fields"),N=0;N<t.length;N++){var y=t[N];b("".concat(y.name,".filterType"))}return(0,a.useEffect)((function(){var e={fields:s.map((function(e){return e.fieldName}))};s.forEach((function(n){var t=n.fieldName,i=(0,A.Z)(n,F);Object.entries(i).forEach((function(n){var i=(0,r.Z)(n,2),a=i[0],s=i[1];e[t]=(0,l.Z)({},e[t]),void 0!==s&&(e[t][a]=s)}))})),h(e)}),[]),(0,w.jsxs)("form",{onSubmit:f((function(e){var n=[];e.fields.forEach((function(i){var r,a,s,o,c,u,m,f,p,v,b,h=t.find((function(e){return e.name===i}));h&&n.push((0,l.Z)((0,l.Z)((0,l.Z)({fieldName:i},["input","textarea"].includes(h.fieldType)&&(0,l.Z)({filterType:(null===(r=e[i])||void 0===r?void 0:r.filterType)||"textSearch"},d&&(0,l.Z)((0,l.Z)({},"minMax"!==(null===(a=e[i])||void 0===a?void 0:a.filterType)&&{value:null===(s=e[i])||void 0===s?void 0:s.value}),"minMax"===(null===(o=e[i])||void 0===o?void 0:o.filterType)&&{min:null===(c=e[i])||void 0===c?void 0:c.min,max:null===(u=e[i])||void 0===u?void 0:u.max}))),["slider","range"].includes(null===(m=e[i])||void 0===m?void 0:m.filterType)&&{min:null===(f=e[i])||void 0===f?void 0:f.min,max:null===(p=e[i])||void 0===p?void 0:p.max}),["select","combobox"].includes(h.fieldType)&&(0,l.Z)({filterStyle:null===(v=e[i])||void 0===v?void 0:v.filterStyle},d&&{value:null===(b=e[i])||void 0===b?void 0:b.value})))})),u(n)})),className:"p-1 grid gap-1",children:[(0,w.jsx)(c.rG,{control:v,name:"fields",multiple:!0,label:"Filter Fields",sortable:!0,options:(s.length?t.sort((function(e,n,t){return null!==s&&void 0!==s&&s.includes(e.value)?s.findIndex((function(n){return n===e.value}))>s.findIndex((function(e){return e===n.value}))?1:-1:1})).reverse().map((function(e,n,t){return(0,l.Z)((0,l.Z)({},e),{},{order:t.length-n})})):t).map((function(e){return{label:e.label,value:e.name,data:e}}))}),null===j||void 0===j?void 0:j.map((function(e,n){var i=t.find((function(n){return n.name===e}));if(!i)return null;if(["input","textarea"].includes(i.fieldType)){if("string"===i.dataType)return(0,w.jsxs)("div",{children:[(0,w.jsxs)("p",{children:[(0,w.jsxs)("strong",{children:[i.label,":"]})," Text Search"]}),d&&(0,w.jsx)(c.II,(0,l.Z)({label:"Value"},p("".concat(i.name,".value"))))]},n);var r,a;if("number"===i.dataType)return(0,w.jsxs)("div",{children:[(0,w.jsxs)("p",{className:"mb_5",children:[(0,w.jsxs)("strong",{children:[i.label,":"]})," "]}),(0,w.jsx)(c.hQ,{control:v,name:"".concat(i.name,".filterType"),label:"Filter Style",options:[{label:"Min-Max",value:"minMax"},{label:"Exact Match",value:"match"},{label:"Range",value:"range"}],formOptions:{required:"Select an option"}}),!d&&["slider","range"].includes(x("".concat(i.name,".filterType")))&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({type:"number",label:"Min"},p("".concat(i.name,".min"),{required:"Please enter a value"})),{},{error:null===(r=g[i.name])||void 0===r?void 0:r.min})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({type:"number",label:"Max"},p("".concat(i.name,".max"),{required:"Please enter a value"})),{},{error:null===(a=g[i.name])||void 0===a?void 0:a.max}))]}),d&&(0,w.jsxs)(w.Fragment,{children:["minMax"===x("".concat(i.name,".filterType"))&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(c.II,(0,l.Z)({type:"number",label:"Minimum"},p("".concat(i.name,".min")))),(0,w.jsx)(c.II,(0,l.Z)({type:"number",label:"Maximum"},p("".concat(i.name,".max"))))]}),"match"===x("".concat(i.name,".filterType"))&&(0,w.jsx)(c.II,(0,l.Z)({type:"number",label:"Value"},p("".concat(i.name,".value"))))]})]},n)}else if(["select","combobox"].includes(i.fieldType))return(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"mb_5",children:(0,w.jsxs)("strong",{children:[i.label,":"]})}),d?(0,w.jsx)(c.OC,(0,l.Z)((0,l.Z)((0,l.Z)({label:"Value",multiple:!0,control:v,name:"".concat(i.name,".value")},"predefined"===i.optionType&&{options:i.options}),"collection"===i.optionType&&{url:"".concat(C.Hv.dynamic,"/").concat(i.collection)}),{},{getQuery:function(e,n){return(0,l.Z)((0,l.Z)({},e&&(0,D.Z)({},i.optionLabel,e)),n&&(0,D.Z)({},i.optionValue,n))},handleData:function(e){return{label:e[i.optionLabel],value:e[i.optionValue]}}})):(0,w.jsx)(c.hQ,{control:v,name:"".concat(i.name,".filterStyle"),label:"Filter Style",options:[{label:"List",value:"list"},{label:"Dropdown",value:"dropdown"}],formOptions:{required:"Select an option"}})]},n)})),(0,w.jsx)("div",{className:"flex justify-center",children:(0,w.jsx)("button",{className:"btn",children:"Update"})})]})},R=function(e){var n=e.fields,t=void 0===n?[]:n,i=e.value,s=void 0===i?[]:i,u=e.onSuccess,d=(0,o.cI)(),m=d.handleSubmit,f=(d.register,d.control),p=d.watch,v=d.reset,b=d.getValues,h=(d.formState.errors,p("fields")),x=(0,a.useState)(Math.random()),g=(0,r.Z)(x,2),j=(g[0],g[1]);return(0,a.useEffect)((function(){var e={fields:s.map((function(e){return e.fieldName}))};s.forEach((function(n){var t=n.fieldName,i=(0,A.Z)(n,H);Object.entries(i).forEach((function(n){var i=(0,r.Z)(n,2),l=i[0],a=i[1];"object"!==typeof a?(e["".concat(t)]={},e["".concat(t)][l]=a):Object.entries(a).forEach((function(n){var i=(0,r.Z)(n,2),l=i[0],a=i[1];e["".concat(t,".").concat(l)]=a}))}))})),v(e)}),[]),(0,w.jsxs)("form",{onSubmit:m((function(e){var n=[];e.fields.forEach((function(i){var a,s,o=t.find((function(e){return e.name===i}));o&&n.push((0,l.Z)((0,l.Z)({fieldName:i},["input"].includes(o.fieldType)&&"number"===o.dataType&&{oparator:null===(a=e[i])||void 0===a?void 0:a.oparator}),["select","combobox"].includes(o.fieldType)&&{oparator:null===(s=e[i])||void 0===s?void 0:s.oparator,includes:Object.entries(e[i]).filter((function(e){var n=(0,r.Z)(e,2),t=(n[0],n[1]);return(null===t||void 0===t?void 0:t.length)>0})).reduce((function(e,n){var t=(0,r.Z)(n,2),i=t[0],l=t[1];return e[i]=l,e}),{})}))})),u(n)})),className:"p-1 grid gap-1",children:[(0,w.jsx)(c.rG,{control:f,name:"fields",multiple:!0,label:"Filter Fields",sortable:!0,options:(s.length?t.sort((function(e,n,t){return null!==s&&void 0!==s&&s.includes(e.value)?s.findIndex((function(n){return n===e.value}))>s.findIndex((function(e){return e===n.value}))?1:-1:1})).reverse().map((function(e,n,t){return(0,l.Z)((0,l.Z)({},e),{},{order:t.length-n})})):t).map((function(e){return{label:e.label,value:e.name,data:e}}))}),null===h||void 0===h?void 0:h.map((function(e,n){var i=t.find((function(n){return n.name===e}));if(!i)return null;if(["input"].includes(i.fieldType)){if("number"===i.dataType)return(0,w.jsxs)("div",{children:[(0,w.jsxs)("p",{className:"mb_5",children:[(0,w.jsxs)("strong",{children:[i.label,":"]})," "]}),(0,w.jsx)(c.hQ,{control:f,name:"".concat(i.name,".oparator"),label:"Oparator",options:[{label:"Greater than",value:"greaterThan"},{label:"Less than",value:"lessThan"}],formOptions:{required:"Select an option"}})]},n)}else if(["select","combobox"].includes(i.fieldType))return(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"mb_5",children:(0,w.jsxs)("strong",{children:[i.label," Mapping:"]})}),(0,w.jsx)(c.hQ,{className:"mb_5",control:f,name:"".concat(i.name,".oparator"),label:"Oparator",options:[{label:"Match ".concat(i.label),value:"match"},{label:"Custom Mapping",value:"customMapping"}],formOptions:{required:"Select an option"},onChange:function(){j(Math.random())}}),"customMapping"===b("".concat(i.name,".oparator"))&&(0,w.jsx)(W,{field:i,control:f})]},n)})),(0,w.jsx)("div",{className:"flex justify-center",children:(0,w.jsx)("button",{className:"btn",children:"Update"})})]})},q=function(e){var n=e.fields,t=void 0===n?[]:n,i=e.value,s=void 0===i?[]:i,u=e.onSuccess,d=(0,o.cI)(),m=d.handleSubmit,f=(d.register,d.control),p=d.watch,v=d.reset,b=d.getValues,h=(d.formState.errors,p("fields")),x=(0,a.useState)(Math.random()),g=(0,r.Z)(x,2),j=(g[0],g[1]);return(0,a.useEffect)((function(){var e={fields:s.map((function(e){return e.fieldName}))};s.forEach((function(n){var t=n.fieldName,i=(0,A.Z)(n,U);Object.entries(i).forEach((function(n){var i=(0,r.Z)(n,2),l=i[0],a=i[1];"object"!==typeof a?(e["".concat(t)]={},e["".concat(t)][l]=a):Object.entries(a).forEach((function(n){var i=(0,r.Z)(n,2),l=i[0],a=i[1];e["".concat(t,".").concat(l)]=a}))}))})),v(e)}),[]),(0,w.jsxs)("form",{onSubmit:m((function(e){var n=[];e.fields.forEach((function(i){var a,s,o=t.find((function(e){return e.name===i}));o&&n.push((0,l.Z)((0,l.Z)({fieldName:i},["input"].includes(o.fieldType)&&"number"===o.dataType&&{oparator:null===(a=e[i])||void 0===a?void 0:a.oparator}),["select","combobox"].includes(o.fieldType)&&{oparator:null===(s=e[i])||void 0===s?void 0:s.oparator,includes:Object.entries(e[i]).filter((function(e){var n=(0,r.Z)(e,2),t=(n[0],n[1]);return(null===t||void 0===t?void 0:t.length)>0})).reduce((function(e,n){var t=(0,r.Z)(n,2),i=t[0],l=t[1];return e[i]=l,e}),{})}))})),u(n)})),className:"p-1 grid gap-1",children:[(0,w.jsx)(c.rG,{control:f,name:"fields",multiple:!0,label:"Filter Fields",sortable:!0,options:(s.length?t.sort((function(e,n,t){return null!==s&&void 0!==s&&s.includes(e.value)?s.findIndex((function(n){return n===e.value}))>s.findIndex((function(e){return e===n.value}))?1:-1:1})).reverse().map((function(e,n,t){return(0,l.Z)((0,l.Z)({},e),{},{order:t.length-n})})):t).map((function(e){return{label:e.label,value:e.name,data:e}}))}),null===h||void 0===h?void 0:h.map((function(e,n){var i=t.find((function(n){return n.name===e}));if(!i)return null;if(["input"].includes(i.fieldType)){if("number"===i.dataType)return(0,w.jsxs)("div",{children:[(0,w.jsxs)("p",{className:"mb_5",children:[(0,w.jsxs)("strong",{children:[i.label,":"]})," "]}),(0,w.jsx)(c.hQ,{control:f,name:"".concat(i.name,".oparator"),label:"Oparator",options:[{label:"Greater than",value:"greaterThan"},{label:"Less than",value:"lessThan"}],formOptions:{required:"Select an option"}})]},n)}else if(["select","combobox"].includes(i.fieldType))return(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"mb_5",children:(0,w.jsxs)("strong",{children:[i.label," Mapping:"]})}),(0,w.jsx)(c.hQ,{className:"mb_5",control:f,name:"".concat(i.name,".oparator"),label:"Oparator",options:[{label:"Match ".concat(i.label),value:"match"},{label:"Custom Mapping",value:"customMapping"}],formOptions:{required:"Select an option"},onChange:function(){j(Math.random())}}),"customMapping"===b("".concat(i.name,".oparator"))&&(0,w.jsx)(W,{field:i,control:f})]},n)})),(0,w.jsx)("div",{className:"flex justify-center",children:(0,w.jsx)("button",{className:"btn",children:"Update"})})]})},Q=function(e){var n=e.edit,t=e.onSuccess,s=(0,a.useState)(!1),d=(0,r.Z)(s,2),m=d[0],f=d[1],p=(0,a.useState)(null),v=(0,r.Z)(p,2),b=v[0],h=v[1],x=(0,a.useState)(null),g=(0,r.Z)(x,2),N=g[0],C=g[1],I=(0,o.cI)({resolver:(0,y.y)(u.Ry({title:u.Z_().required("Section Title is required"),viewStyle:u.Z_().required("Select a view style")}))}),_=I.handleSubmit,T=I.register,P=I.control,E=I.watch,D=I.reset,A=(I.getValues,I.setValue),k=I.formState.errors,F=E("items");return(0,a.useEffect)((function(){D({title:(null===n||void 0===n?void 0:n.title)||"",viewStyle:(null===n||void 0===n?void 0:n.viewStyle)||"list",items:(null===n||void 0===n?void 0:n.items)||[]})}),[n]),(0,w.jsxs)("form",{onSubmit:_((function(e){if(F.length<=0)return C("Add at least one item");t((0,l.Z)((0,l.Z)({},e),{},{_id:(null===n||void 0===n?void 0:n._id)||Math.random().toString(36).substr(-8)}))})),className:"p-1 grid gap-1",children:[N&&(0,w.jsx)("p",{className:"error",children:N}),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({},T("title")),{},{label:"Section Title",error:k.title})),(0,w.jsx)(c.hQ,{label:"View Style",name:"viewStyle",control:P,options:[{label:"List",value:"list"},{label:"Grid",value:"grid"}],error:k.viewStyle}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"flex justify-space-between align-center mb-1",children:[(0,w.jsx)("h5",{children:"Items"}),(0,w.jsx)("button",{className:"btn",type:"button",onClick:function(){return f(!0)},children:"Add Item"})]}),(0,w.jsx)(c.iA,{columns:[{label:"Field"},{label:"URL"},{label:"Actions"}],children:null===F||void 0===F?void 0:F.map((function(e,n){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e.label}),(0,w.jsx)("td",{children:e.href}),(0,w.jsx)(c.p2,{actions:[{icon:(0,w.jsx)(Z.KHI,{}),label:"Edit",callBack:function(){h(e),f(!0)}},{icon:(0,w.jsx)(Z.lp8,{}),label:"Delete",callBack:function(){return(0,S.N)({type:"confirmation",message:"Are you sure you want to remove this item?",callback:function(){A("items",F.filter((function(n){return n._id!==e._id})))}})}}]})]},e.label)}))})]}),(0,w.jsx)(S.u,{open:m,head:!0,label:"".concat(b?"Update":"Add"," Element"),className:j,setOpen:function(){f(!1),h(null)},children:(0,w.jsx)(M,{edit:b,onSuccess:function(e){A("items",b?F.map((function(n){return n._id===e._id?e:n})):[].concat((0,i.Z)(F),[e])),f(!1),h(null),C(null)}})}),(0,w.jsx)("div",{className:"flex justify-center",children:(0,w.jsx)("button",{className:"btn",children:n?"Update Section":"Add Section"})})]})},M=function(e){var n=e.edit,t=e.onSuccess,i=(0,o.cI)({resolver:(0,y.y)(u.Ry({label:u.Z_().required("Label is required"),href:u.Z_().matches(/^\/[a-zA-Z0-9\-._~!$&'()*+,;=:@]+$/,"Invalid sub-path format").required("Field is required")}))}),r=i.handleSubmit,s=i.control,d=i.register,m=i.reset,f=i.formState.errors;return(0,a.useEffect)((function(){m({label:(null===n||void 0===n?void 0:n.label)||"",href:(null===n||void 0===n?void 0:n.href)||"",type:(null===n||void 0===n?void 0:n.type)||"dynamicPage",files:(null===n||void 0===n?void 0:n.files)||[]})}),[n]),(0,w.jsxs)("form",{onSubmit:r((function(e){t((0,l.Z)((0,l.Z)({},e),{},{_id:(null===n||void 0===n?void 0:n._id)||Math.random().toString(36).substr(-8)}))})),className:"p-1 grid gap-1",children:[(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({},d("label")),{},{label:"Label",error:f.label})),(0,w.jsx)(c.hQ,{label:"URL Type",name:"type",control:s,options:[{label:"Dynamic",value:"dynamicPage"},{label:"Internal Link",value:"internalLink"},{label:"External Link",value:"externalLink"}]}),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({},d("href")),{},{label:"Path",placeholder:"/some-path",error:f.href})),(0,w.jsx)("div",{className:"flex justify-center",children:(0,w.jsx)("button",{className:"btn",children:n?"Update Element":"Add Element"})})]})},W=function(e){var n=e.field,t=e.control,i=(0,a.useState)([]),l=(0,r.Z)(i,2),s=l[0],o=l[1],u=(0,y.i)(C.Hv.dynamic+"/".concat(n.collection||"")).get;return(0,a.useEffect)((function(){"collection"===n.optionType?u().then((function(e){var t=e.data;null!==t&&void 0!==t&&t.success&&o(t.data.map((function(e){return{label:e[n.optionLabel],value:e[n.optionValue]}})))})):"array"===n.optionType&&o(n.options)}),[]),(0,w.jsx)("div",{children:(0,w.jsx)(c.iA,{columns:[{label:"Viewed ".concat(n.label)},{label:"Filter for recommendation"}],children:s.map((function(e){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e.label}),(0,w.jsx)("td",{children:(0,w.jsx)(c.OC,{control:t,name:"".concat(n.name,".").concat(e.value),multiple:!0,options:s})})]},e.value)}))})})},G=function(e){var n,t,u,d,m,f,p,v,b,h,x,g,N,_=e.next,T=(0,a.useState)(null),P=(0,r.Z)(T,2),E=P[0],D=P[1],A=(0,a.useState)([]),F=(0,r.Z)(A,2),H=F[0],U=F[1],L=(0,a.useState)([]),B=(0,r.Z)(L,2),M=B[0],W=B[1],G=(0,a.useState)(!1),K=(0,r.Z)(G,2),X=K[0],Y=K[1],$=(0,a.useState)(!1),z=(0,r.Z)($,2),J=(z[0],z[1]),ee=(0,a.useState)(!1),ne=(0,r.Z)(ee,2),te=ne[0],ie=ne[1],le=(0,a.useState)(!1),re=(0,r.Z)(le,2),ae=re[0],se=re[1],oe=(0,a.useState)(!1),ce=(0,r.Z)(oe,2),ue=ce[0],de=ce[1],me=(0,a.useContext)(s.D),fe=me.business,pe=me.config,ve=me.user,be=me.setConfig,he=(0,o.cI)(),xe=he.handleSubmit,ge=he.register,je=he.reset,Ne=he.watch,ye=he.setValue,Ze=he.control,Se=he.formState.errors,Ce=(0,a.useState)(!1),Ie=(0,r.Z)(Ce,2),we=Ie[0],_e=Ie[1],Te=(0,I.s0)(),Pe=(0,y.i)(C.Hv.userConfig),Ee=Pe.put,De=Pe.loading,Ae=(0,a.useState)(null),ke=(0,r.Z)(Ae,2),Fe=ke[0],He=ke[1],Ue=(0,y.i)(C.Hv.collections+"/Product"),Oe=Ue.get;Ue.loading;(0,a.useEffect)((function(){var e,n,t,i,l,r,a,s,o,c,u,d,m,f,p,v,b,h,x,g,j,N,y,Z,S,C,I,w,_,T,P,E,D,A,k;je({siteTitle:(null===pe||void 0===pe||null===(e=pe.siteConfig)||void 0===e?void 0:e.siteTitle)||(null===fe||void 0===fe||null===(n=fe.business)||void 0===n?void 0:n.name)||(null===ve||void 0===ve?void 0:ve.name)||"",siteDescription:(null===pe||void 0===pe||null===(t=pe.siteConfig)||void 0===t?void 0:t.siteDescription)||"",businessType:(null===pe||void 0===pe?void 0:pe.businessType)||"",elements:null!==pe&&void 0!==pe&&null!==(i=pe.siteConfig)&&void 0!==i&&null!==(l=i.productCard)&&void 0!==l&&l.length?null===pe||void 0===pe||null===(r=pe.siteConfig)||void 0===r?void 0:r.productCard:[],productViewElements:(null===pe||void 0===pe||null===(a=pe.siteConfig)||void 0===a||null===(s=a.productViewPage)||void 0===s?void 0:s.productElements)||[],currency:(null===pe||void 0===pe||null===(o=pe.siteConfig)||void 0===o?void 0:o.currency)||"",sidebarFilters:(null===pe||void 0===pe||null===(c=pe.siteConfig)||void 0===c||null===(u=c.browsePage)||void 0===u?void 0:u.sidebarFilters)||[],recommendationFilters:(null===pe||void 0===pe||null===(d=pe.siteConfig)||void 0===d||null===(m=d.productViewPage)||void 0===m?void 0:m.recommendationFilters)||[],comparisonFilters:(null===pe||void 0===pe||null===(f=pe.siteConfig)||void 0===f||null===(p=f.productViewPage)||void 0===p?void 0:p.comparisonFilters)||[],recommendationLimit:null===pe||void 0===pe||null===(v=pe.siteConfig)||void 0===v||null===(b=v.productViewPage)||void 0===b?void 0:b.recommendationLimit,comparisonLimit:null===pe||void 0===pe||null===(h=pe.siteConfig)||void 0===h||null===(x=h.productViewPage)||void 0===x?void 0:x.comparisonLimit,viewWhatsApp:(null===pe||void 0===pe||null===(g=pe.siteConfig)||void 0===g||null===(j=g.productViewPage)||void 0===j?void 0:j.viewWhatsApp)||!1,viewAddToCart:(null===pe||void 0===pe||null===(N=pe.siteConfig)||void 0===N||null===(y=N.productViewPage)||void 0===y?void 0:y.viewAddToCart)||!1,viewLandingPage:(null===pe||void 0===pe||null===(Z=pe.siteConfig)||void 0===Z||null===(S=Z.landingPage)||void 0===S?void 0:S.viewLandingPage)||!1,heroImages:(null===pe||void 0===pe||null===(C=pe.siteConfig)||void 0===C||null===(I=C.landingPage)||void 0===I||null===(w=I.hero)||void 0===w?void 0:w.slides)||[],viewHeroSection:(null===pe||void 0===pe||null===(_=pe.siteConfig)||void 0===_||null===(T=_.landingPage)||void 0===T||null===(P=T.hero)||void 0===P?void 0:P.viewHeroSection)||!1,landingPageShelves:(null===pe||void 0===pe||null===(E=pe.siteConfig)||void 0===E||null===(D=E.landingPage)||void 0===D?void 0:D.shelves)||[],footerElements:null===pe||void 0===pe||null===(A=pe.siteConfig)||void 0===A||null===(k=A.footer)||void 0===k?void 0:k.sections})}),[pe]);var Le=Ne("sidebarFilters"),Be=Ne("recommendationFilters"),Ve=Ne("comparisonFilters"),Re=Ne("viewLandingPage"),qe=Ne("viewHeroSection"),Qe=Ne("viewWhatsApp"),Me=Ne("landingPageShelves"),We=Ne("footerElements"),Ge=Ne("category"),Ke=Ne("subcategory");return(0,a.useEffect)((function(){var e;null!==pe&&void 0!==pe&&null!==(e=pe.siteConfig)&&void 0!==e&&e.productCard&&0===H.length&&Oe({query:{relatedCollections:!0}}).then((function(e){var n=e.data;if(n.success){var t=n.data.fields.filter((function(e){return!["images","title"].includes(e.name)})).map((function(e){return{label:e.label,value:e.name}}));t.push({value:"review",label:"Review"}),"service"===pe.businessType&&t.push({value:"dateRange",label:"Date Range"}),D(n.data),U(t.filter((function(e){return!["dateRange"].includes(e.value)})).sort((function(e,n,t){var i;return null!==(i=pe.siteConfig.productCard)&&void 0!==i&&i.includes(e.value)?pe.siteConfig.productCard.findIndex((function(n){return n===e.value}))>pe.siteConfig.productCard.findIndex((function(e){return e===n.value}))?1:-1:1})).reverse()),t.push({value:"compare",label:"Compare"}),W(t.filter((function(e){return!["description","whatsappNumber"].includes(e.value)})).sort((function(e,n){var t,i,l,r;return null!==(t=pe.siteConfig.productViewPage)&&void 0!==t&&null!==(i=t.productElements)&&void 0!==i&&i.includes(e.value)?(null===(l=pe.siteConfig.productViewPage)||void 0===l?void 0:l.productElements.findIndex((function(n){return n===e.value})))>(null===(r=pe.siteConfig.productViewPage)||void 0===r?void 0:r.productElements.findIndex((function(e){return e===n.value})))?1:-1:1})).reverse())}})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))}),[null===pe||void 0===pe||null===(n=pe.siteConfig)||void 0===n?void 0:n.productCard,H]),(0,w.jsxs)("form",{className:"grid gap-1",onSubmit:xe((function(e){var n=(0,l.Z)((0,l.Z)({},pe),{},{businessType:e.businessType,siteConfig:(0,l.Z)((0,l.Z)({},null===pe||void 0===pe?void 0:pe.siteConfig),{},{siteTitle:e.siteTitle,siteDescription:e.siteDescription,productCard:e.elements.filter((function(e){return H.find((function(n){return n.value===e}))})),currency:e.currency,browsePage:(0,l.Z)((0,l.Z)({},pe.siteConfig.browsePage),{},{sidebarFilters:e.sidebarFilters}),productViewPage:{viewWhatsApp:Qe,viewAddToCart:e.viewAddToCart||!1,productElements:e.productViewElements.filter((function(e){return M.find((function(n){return n.value===e}))})),recommendationFilters:e.recommendationFilters,recommendationLimit:e.recommendationLimit,comparisonFilters:e.comparisonFilters,comparisonLimit:e.comparisonLimit},landingPage:{viewLandingPage:Re,hero:{viewHeroSection:e.viewHeroSection},shelves:e.landingPageShelves},footer:{sections:e.footerElements.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{items:e.items.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{condition:"dynamicPage"===e.type})}))})}))}})});(0,k.Ty)("_id",n).forEach((function(e){e.path.reduce((function(e,n,t,i){return t===i.length-1&&e[n].length<=20&&delete e[n],e[n]}),n)}));var t=new FormData;Object.entries(n).forEach((function(e){var n=(0,r.Z)(e,2),i=n[0],l=n[1];t.append(i,JSON.stringify(l))})),e.heroImages.forEach((function(e){e.type?t.append("siteConfig.landingPage.hero.slides",e):t.append("siteConfig.landingPage.hero.slides",e.uploadFilePath||e)})),Ee(t).then((function(e){var n=e.data;if(!n.success)return(0,S.N)({type:"error",message:n.message});be(n.data),(0,S.N)((0,l.Z)({type:"information",message:"Updates have been saved."},we&&{callback:function(){return Te(C.Hb.dashboard.replace("*","")+C.Hb.dynamicTables.replace("*",""))}}))})).catch((function(e){return(0,S.N)({type:"error",data:e.message})}))})),children:[(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Site Title"},ge("siteTitle")),{},{required:!0,error:null===Se||void 0===Se?void 0:Se.siteTitle})),(0,w.jsx)(c.gx,(0,l.Z)((0,l.Z)({label:"Site Description"},ge("siteDescription")),{},{required:!0,error:null===Se||void 0===Se?void 0:Se.siteDescription})),(0,w.jsx)(c.hQ,{label:"Business Type",name:"businessType",control:Ze,options:[{label:"Product",value:"product"},{label:"Service",value:"service"}]}),(0,w.jsx)(c.hQ,{label:"Currency",name:"currency",control:Ze,options:[{label:"USD",value:"USD"},{label:"INR",value:"INR"}]}),(0,w.jsx)(c.rG,{control:Ze,name:"elements",multiple:!0,label:"Product Card Elements (Move items to reorder)",sortable:!0,options:null!==pe&&void 0!==pe&&null!==(t=pe.siteConfig)&&void 0!==t&&null!==(u=t.productCard)&&void 0!==u&&u.length?H.sort((function(e,n,t){var i;return null!==(i=pe.siteConfig.productCard)&&void 0!==i&&i.includes(e.value)?pe.siteConfig.productCard.findIndex((function(n){return n===e.value}))>pe.siteConfig.productCard.findIndex((function(e){return e===n.value}))?1:-1:1})).reverse().map((function(e,n,t){return(0,l.Z)((0,l.Z)({},e),{},{order:t.length-n})})):H}),(0,w.jsx)("hr",{}),(0,w.jsx)("h2",{children:"Landing Page"}),(0,w.jsx)(c.hQ,{label:"View Landing Page",name:"viewLandingPage",control:Ze,options:[{label:"Yes",value:!0},{label:"No",value:!1}]}),Re&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h4",{children:"Hero Section"}),(0,w.jsx)(c.hQ,{label:"View Hero Section",name:"viewHeroSection",control:Ze,options:[{label:"Yes",value:!0},{label:"No",value:!1}]}),qe&&(0,w.jsx)(c.Dj,{thumbnail:!0,multiple:!0,control:Ze,name:"heroImages",label:"Hero Images"}),(0,w.jsx)(O,{fields:null===E||void 0===E||null===(d=E.fields)||void 0===d?void 0:d.filter((function(e){return!["file"].includes(e.inputType)})),shelves:Me,onChange:function(e){ye("landingPageShelves",e),J(!1)}})]}),(0,w.jsx)("hr",{}),(0,w.jsx)("h2",{children:"Product View Page"}),(0,w.jsx)(c.hQ,{label:"Show WhatsApp Chat Button",name:"viewWhatsApp",control:Ze,options:[{label:"Yes",value:!0},{label:"No",value:!1}]}),Qe&&(0,w.jsx)("p",{className:"subtitle1",children:"Make sure to put a WhatsApp number in Business Information."}),(0,w.jsx)(c.rG,{control:Ze,name:"productViewElements",multiple:!0,label:"Product Page Elements (Move items to reorder)",sortable:!0,options:null!==pe&&void 0!==pe&&null!==(m=pe.siteConfig)&&void 0!==m&&null!==(f=m.productViewPage)&&void 0!==f&&null!==(p=f.productElements)&&void 0!==p&&p.length?M.sort((function(e,n,t){var i,l,r,a;return null!==(i=pe.siteConfig.productViewPage)&&void 0!==i&&null!==(l=i.productElements)&&void 0!==l&&l.includes(e.value)?(null===(r=pe.siteConfig.productViewPage)||void 0===r?void 0:r.productElements.findIndex((function(n){return n===e.value})))>(null===(a=pe.siteConfig.productViewPage)||void 0===a?void 0:a.productElements.findIndex((function(e){return e===n.value})))?1:-1:1})).reverse().map((function(e,n,t){return(0,l.Z)((0,l.Z)({},e),{},{order:t.length-n})})):M}),(0,w.jsx)(c.hQ,{label:"View Add to Cart",name:"viewAddToCart",control:Ze,options:[{label:"Yes",value:!0},{label:"No",value:!1}]}),(0,w.jsx)("hr",{}),(0,w.jsxs)("div",{style:{margin:"1rem 0"},children:[(0,w.jsxs)("div",{className:"flex gap-1 justify-space-between align-center mb-1",children:[(0,w.jsx)("h5",{children:"Sidebar filters"}),(0,w.jsx)("button",{className:"btn",type:"button",onClick:function(){return Y(!0)},disabled:!(Ge&&Ke),children:"Update Sidebar Filters"})]}),(0,w.jsxs)("div",{className:"flex gap-1  mb-1",children:[(0,w.jsx)(c.OC,{label:"Category",control:Ze,name:"category",url:"".concat(C.Hv.dynamic,"/Category"),getQuery:function(e,n){return(0,l.Z)((0,l.Z)({},e&&{name:e}),n&&{name:n})},handleData:function(e){return{label:e.name,value:e.name}},onChange:function(){return ye("subcategory","")}}),(0,w.jsx)(c.OC,{disabled:!Ge,label:"Subcategory",control:Ze,name:"subcategory",url:"".concat(C.Hv.dynamic,"/Subcategory"),getQuery:function(e,n){return(0,l.Z)((0,l.Z)({category:Ge},e&&{name:e}),n&&{name:n})},handleData:function(e){return{label:e.name,value:e.name}}})]}),Ge&&Ke?(0,w.jsx)(c.iA,{columns:[{label:"Field"},{label:"Filter Type"},{label:"Filter Style"}],children:null===(v=(Le||[]).find((function(e){return e.category===Ge&&e.subcategory===Ke})))||void 0===v||null===(b=v.filters)||void 0===b?void 0:b.map((function(e,n){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e.fieldName}),(0,w.jsx)("td",{children:e.filterType}),(0,w.jsx)("td",{children:e.filterStyle})]},n)}))}):(0,w.jsx)("p",{children:"Please select category and subcategory to update sidebar filters."})]}),(0,w.jsx)("hr",{}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"flex justify-space-between align-center mb-1",children:[(0,w.jsx)("h5",{children:"Recommendation Filters"}),(0,w.jsx)("button",{className:"btn",type:"button",onClick:function(){return se(!0)},children:"Update recommendation Filters"})]}),(0,w.jsx)(c.iA,{columns:[{label:"Field"},{label:"Oparator"}],children:null===Be||void 0===Be?void 0:Be.map((function(e,n){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e.fieldName}),(0,w.jsx)("td",{children:e.oparator})]},n)}))})]}),(0,w.jsx)(c.hQ,{label:"Recommendation limit",name:"recommendationLimit",control:Ze,options:[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"30",value:30}]}),(0,w.jsx)("hr",{}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"flex justify-space-between align-center mb-1",children:[(0,w.jsx)("h5",{children:"Comparison Filters"}),(0,w.jsx)("button",{className:"btn",type:"button",onClick:function(){return de(!0)},children:"Update Comparison Filters"})]}),(0,w.jsx)(c.iA,{columns:[{label:"Field"},{label:"Oparator"}],children:null===Ve||void 0===Ve?void 0:Ve.map((function(e,n){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e.fieldName}),(0,w.jsx)("td",{children:e.oparator})]},n)}))})]}),(0,w.jsx)(c.hQ,{label:"Comparison limit",name:"comparisonLimit",control:Ze,options:[{label:"2",value:2},{label:"5",value:5},{label:"10",value:10}]}),(0,w.jsx)("hr",{}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"flex justify-space-between align-center mb-1",children:[(0,w.jsx)("h5",{children:"Footer Elements"}),(0,w.jsx)("button",{className:"btn",type:"button",onClick:function(){return ie(!0)},children:"Add Footer Section"})]}),(0,w.jsx)(c.iA,{columns:[{label:"Section Title"},{label:"Elements"},{label:"Actions"}],children:null===We||void 0===We?void 0:We.map((function(e,n){var t;return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e.title}),(0,w.jsx)("td",{children:null===(t=e.items)||void 0===t?void 0:t.length}),(0,w.jsx)(c.p2,{actions:[{icon:(0,w.jsx)(Z.KHI,{}),label:"Edit",callBack:function(){He(e),ie(!0)}},{icon:(0,w.jsx)(Z.lp8,{}),label:"Delete",callBack:function(){return(0,S.N)({type:"confirmation",message:"Are you sure you want to remove this section?",callback:function(){ye("footerElements",We.filter((function(n){return n._id!==e._id})))}})}}]})]},e.title)}))})]}),(0,w.jsx)(S.u,{open:te,head:!0,label:"".concat(Fe?"Update":"Add"," Section"),className:j,setOpen:function(){ie(!1),He(null)},children:(0,w.jsx)(Q,{edit:Fe,onSuccess:function(e){ye("footerElements",Fe?We.map((function(n){return n._id===e._id?e:n})):[].concat((0,i.Z)(We),[e])),ie(!1),He(null)}})}),(0,w.jsx)(S.u,{open:ae,head:!0,label:"Update Recommendation Filters",className:j,setOpen:function(){return se(!1)},children:(0,w.jsx)(R,{fields:null===E||void 0===E||null===(h=E.fields)||void 0===h?void 0:h.filter((function(e){return!(["file"].includes(e.inputType)||["input","textarea"].includes(e.fieldType)&&"string"===e.dataType)})),value:Be,onSuccess:function(e){ye("recommendationFilters",e),se(!1)}})}),(0,w.jsx)(S.u,{open:ue,head:!0,label:"Update Comparison Filters",className:j,setOpen:function(){return de(!1)},children:(0,w.jsx)(q,{fields:null===E||void 0===E||null===(x=E.fields)||void 0===x?void 0:x.filter((function(e){return!(["file"].includes(e.inputType)||["input","textarea"].includes(e.fieldType)&&"string"===e.dataType)})),value:Ve,onSuccess:function(e){ye("comparisonFilters",e),de(!1)}})}),(0,w.jsx)(S.u,{open:X,head:!0,label:"Update Sidebar Filters",setOpen:function(){return Y(!1)},children:(0,w.jsx)(V,{fields:null===E||void 0===E||null===(g=E.fields)||void 0===g?void 0:g.filter((function(e){return!(["richText"].includes(e.fieldType)||["file"].includes(e.inputType)||["category","subcategory","variants"].includes(e.name))})).filter((function(e){return!e.subcategory||e.subcategory===Ke})),value:null===(N=(Le||[]).find((function(e){return e.category===Ge&&e.subcategory===Ke})))||void 0===N?void 0:N.filters,onSuccess:function(e){ye("sidebarFilters",[].concat((0,i.Z)((Le||[]).filter((function(e){return!(e.category===Ge&&e.subcategory===Ke)}))),[{filters:e,category:Ge,subcategory:Ke}])),Y(!1)}})}),(0,w.jsxs)("div",{className:"flex gap-1 justify-center",children:[(0,w.jsx)("button",{className:"btn",disabled:De,children:"Save Changes"}),_&&(0,w.jsx)("button",{className:"btn",disabled:De,onClick:function(){return _e(!0)},children:"Next"})]})]})},K=function(e){var n=e.docs,t=e.setDocs,l=(0,a.useState)(null),s=(0,r.Z)(l,2),o=s[0],u=s[1],d=(0,a.useState)(!1),m=(0,r.Z)(d,2),p=m[0],v=m[1],b=(0,y.i)(C.Hv.faqDocuments+"/_id"),h=b.remove;b.loading;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"flex justify-space-between align-center",children:[(0,w.jsx)("h3",{children:"AI Chat Knowledge Base"}),(0,w.jsx)("button",{type:"button",className:"btn",onClick:function(){return v(!0)},children:"Add New Topic"})]}),(0,w.jsx)(c.iA,{className:f,columns:[{label:"Topic"},{label:"Files"},{label:"URLs"},{label:"Token Count"},{label:"Action"}],children:n.map((function(e,n){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e.topic}),(0,w.jsx)("td",{children:e.files.length}),(0,w.jsx)("td",{children:e.urls.length}),(0,w.jsx)("td",{children:e.tokenCount}),(0,w.jsx)(c.p2,{actions:[{icon:(0,w.jsx)(Z.KHI,{}),label:"Edit",callBack:function(){u(e),v(!0)}},{icon:(0,w.jsx)(Z.lp8,{}),label:"Delete",callBack:function(){return(0,S.N)({type:"confirmation",message:"Are you sure you want to remove this Document?",callback:function(){h(void 0,{params:{_id:e._id}}).then((function(n){var i=n.data;if(!i.success)return(0,S.N)({type:"error",message:i.success});t((function(n){return n.filter((function(n){return n._id!==e._id}))}))})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))}})}}]})]},n)}))}),(0,w.jsx)(S.u,{head:!0,label:o?"Update Topic":"Add Topic",open:p,setOpen:function(){v(!1),u(!1)},className:g,children:(0,w.jsx)(Y,{edit:o,onSuccess:function(e){o?(t((function(n){return n.map((function(n){return n._id===o._id?e:n}))})),u(null)):t((function(n){return[].concat((0,i.Z)(n),[e])})),v(!1)}})})]})},X=u.Ry({topic:u.Z_().required(),description:u.Z_(),files:u.IX().of(u.nK()),urls:u.IX().of(u.Z_().url())}),Y=function(e){var n=e.edit,t=e.onSuccess,s=(0,a.useState)(!1),u=(0,r.Z)(s,2),d=u[0],m=u[1],f=(0,o.cI)({resolver:(0,y.y)(X)}),p=f.handleSubmit,v=f.register,g=f.reset,j=f.control,N=f.watch,I=f.setError,_=f.setValue,T=f.clearErrors,P=f.formState.errors,E=(0,a.useRef)(),D=(0,y.i)(C.Hv.faqDocuments+"/".concat((null===n||void 0===n?void 0:n._id)||"")),A=D.post,k=D.put,F=D.loading,H=N("urls"),U=N("url");return(0,a.useEffect)((function(){g((0,l.Z)((0,l.Z)({},n),{},{urls:(null===n||void 0===n?void 0:n.urls)||[]}))}),[n]),(0,w.jsxs)("form",{ref:E,className:b,onSubmit:p((function(e){var i=(0,l.Z)((0,l.Z)({},e),{},{files:e.files,urls:JSON.stringify(e.urls)}),a=new FormData;Object.entries(i).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];if("files"===t&&i){var l=i.filter((function(e){return e.url})),s=i.filter((function(e){return!e.url}));return l.length&&a.append(t,JSON.stringify(l)),void(s.length&&s.forEach((function(e){return a.append(t,e)})))}Array.isArray(i)?i.forEach((function(e){return a.append(t,e)})):i&&a.append(t,i)})),(n?k:A)(a).then((function(e){var n=e.data;if(!n.success)return(0,S.N)({type:"error",message:n.message});t(n.data)})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))})),children:[(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Topic"},v("topic")),{},{error:P.topic})),(0,w.jsx)(c.Dj,{label:"File",accept:"txt,pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/msword",control:j,name:"files"}),(0,w.jsxs)("section",{className:h,children:[(0,w.jsxs)("section",{className:x,children:[(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"URL"},v("url")),{},{error:P.url,onChange:function(e){_("url",e.target.value),T("url")}})),(0,w.jsx)("button",{className:"btn",type:"button",onClick:function(){if(!U)return I("url",{type:"manual",message:"Field is required"});var e=U.startsWith("http")?U:"http://"+U;_("urls",d?H.map((function(n){return n===d?e:n})):[].concat((0,i.Z)(H),[e])),_("url",""),m(null)},children:d?"Update":"Add"}),d&&(0,w.jsx)("button",{className:"btn",type:"button",onClick:function(){_("url",""),m(null)},children:"Cancel"})]}),(0,w.jsx)(c.iA,{columns:[{label:"URL"},{label:"Action"}],children:(H||[]).map((function(e){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e}),(0,w.jsx)(c.p2,{actions:[{icon:(0,w.jsx)(Z.KHI,{}),label:"Edit",callBack:function(){_("url",e),m(e)}},{icon:(0,w.jsx)(Z.lp8,{}),label:"Delete",callBack:function(){return(0,S.N)({type:"confirmation",message:"Are you sure you want to remove this URL?",callback:function(){_("urls",H.filter((function(n){return e!==n})))}})}}]})]},e)}))})]}),(0,w.jsx)(c.gx,(0,l.Z)((0,l.Z)({label:"Description"},v("description")),{},{error:P.description})),(0,w.jsx)("div",{className:"btns",children:(0,w.jsx)("button",{className:"btn",disabled:F,children:"Submit"})})]})},$=function(e){var n=e.next,t=(0,a.useState)([]),i=(0,r.Z)(t,2),l=i[0],s=i[1],o=(0,I.s0)(),c=(0,y.i)(C.Hv.faqDocuments),u=c.get,d=c.loading;return(0,a.useEffect)((function(){u().then((function(e){var n=e.data;if(!n.success)return(0,S.N)({type:"error",message:n.message});s(n.data)})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))}),[]),(0,w.jsxs)("form",{className:"grid gap-1",children:[(0,w.jsx)(K,{docs:l,setDocs:s}),(0,w.jsx)("div",{className:"flex gap-1 justify-center",children:n&&(0,w.jsx)("button",{className:"btn",disabled:d,onClick:function(){return o(C.Hb.dashboard.replace("*","")+C.Hb.settings.baseUrl.replace("*","")+C.Hb.settings.config,{state:{next:!0}})},children:"Next"})})]})},z=function(e){var n=e.docs,t=e.setDocs,l=(0,a.useState)(null),s=(0,r.Z)(l,2),o=s[0],u=s[1],d=(0,a.useState)(!1),m=(0,r.Z)(d,2),p=m[0],v=m[1],b=(0,y.i)(C.Hv.dynamicPages+"/_id"),h=b.remove;b.loading;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"flex justify-space-between align-center",children:[(0,w.jsx)("h3",{children:"Blogs"}),(0,w.jsx)("button",{type:"button",className:"btn",onClick:function(){return v(!0)},children:"Add New Page"})]}),(0,w.jsx)(c.iA,{className:f,columns:[{label:"Title"},{label:"Description"},{label:"File"},{label:"Action"}],children:n.map((function(e,n){var i,l,r;return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:e.title}),(0,w.jsx)("td",{children:e.description}),(0,w.jsx)("td",{children:(null===(i=e.file)||void 0===i?void 0:i.name)||(null===(l=e.files)||void 0===l||null===(r=l[0])||void 0===r?void 0:r.name)}),(0,w.jsx)(c.p2,{actions:[{icon:(0,w.jsx)(Z.KHI,{}),label:"Edit",callBack:function(){u(e),v(!0)}},{icon:(0,w.jsx)(Z.lp8,{}),label:"Delete",callBack:function(){return(0,S.N)({type:"confirmation",message:"Are you sure you want to remove this Document?",callback:function(){h(void 0,{params:{_id:e._id}}).then((function(n){var i=n.data;if(!i.success)return(0,S.N)({type:"error",message:i.success});t((function(n){return n.filter((function(n){return n._id!==e._id}))}))})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))}})}}]})]},n)}))}),(0,w.jsx)(S.u,{head:!0,label:o?"Update Page":"Add Page",open:p,setOpen:function(){v(!1),u(!1)},className:g,children:(0,w.jsx)(ee,{edit:o,onSuccess:function(e){o?(t((function(n){return n.map((function(n){return n._id===o._id?e:n}))})),u(null)):t((function(n){return[].concat((0,i.Z)(n),[e])})),v(!1)}})})]})},J=u.Ry({title:u.Z_().required(),description:u.Z_(),path:u.Z_().test("is-valid-sub-path","Invalid sub-path format",(function(e){return void 0===e||""===e||/^\/[a-zA-Z0-9\-._~!$&'()*+,;=:@]+$/.test(e)})),thumbnail:u.IX().of(u.nK()),files:u.IX().of(u.nK())}),ee=function(e){var n=e.edit,t=e.onSuccess,i=(0,o.cI)({resolver:(0,y.y)(J)}),s=i.handleSubmit,u=i.register,d=i.reset,m=i.control,f=i.formState.errors,p=(0,a.useRef)(),v=(0,y.i)(C.Hv.dynamicPages+"/".concat((null===n||void 0===n?void 0:n._id)||"")),h=v.post,x=v.put,g=v.loading;return(0,a.useEffect)((function(){d((0,l.Z)((0,l.Z)({},n),{},{thumbnail:null!==n&&void 0!==n&&n.thumbnail?[n.thumbnail]:[]}))}),[n]),(0,w.jsxs)("form",{ref:p,className:b,onSubmit:s((function(e){var i=(0,l.Z)((0,l.Z)({},e),{},{path:e.path||"/"+e.title.replaceAll(" ","-").replace(/[^a-zA-Z0-9\-._~!$&'()*+,;=:@\/]/g,"")}),a=new FormData;Object.entries(i).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];if(["thumbnail","files"].includes(t)&&null!==i&&void 0!==i&&i.length){var l=i[0];a.append(t,l.url?JSON.stringify(l):l)}else Array.isArray(i)?i.forEach((function(e){return a.append(t,e)})):i&&a.append(t,i)})),(n?x:h)(a).then((function(e){var n=e.data;if(!n.success)return(0,S.N)({type:"error",message:n.message});t(n.data)})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))})),children:[(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Title"},u("title")),{},{error:f.title})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"URL path"},u("path")),{},{error:f.path,placeholder:"/some-path"})),(0,w.jsx)(c.gx,(0,l.Z)((0,l.Z)({label:"Description"},u("description")),{},{error:f.description})),(0,w.jsx)(c.Dj,{label:"Thumbnail",thumbnail:!0,accept:"jpg,jpeg,png,webp",control:m,name:"thumbnail"}),(0,w.jsx)(c.Dj,{label:"File",accept:"txt,pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/msword",control:m,name:"files"}),(0,w.jsx)("div",{className:"btns",children:(0,w.jsx)("button",{className:"btn",disabled:g,children:"Submit"})})]})},ne=function(e){var n=e.next,t=(0,a.useState)([]),i=(0,r.Z)(t,2),l=i[0],s=i[1],o=(0,I.s0)(),c=(0,y.i)(C.Hv.dynamicPages),u=c.get,d=c.loading;return(0,a.useEffect)((function(){u().then((function(e){var n=e.data;if(!n.success)return(0,S.N)({type:"error",message:n.message});s(n.data)})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))}),[]),(0,w.jsxs)("form",{className:"grid gap-1",children:[(0,w.jsx)(z,{docs:l,setDocs:s}),(0,w.jsx)("div",{className:"flex gap-1 justify-center",children:n&&(0,w.jsx)("button",{className:"btn",disabled:d,onClick:function(){return o(C.Hb.dashboard.replace("*","")+C.Hb.settings.baseUrl.replace("*","")+C.Hb.settings.config,{state:{next:!0}})},children:"Next"})})]})},te=u.Ry({name:u.Z_().required(),phone:u.Z_().required(),description:u.Z_(),email:u.Z_().required(),domain:u.Z_().required()}),ie=function(e){var n,t=e.next,i=(0,a.useContext)(s.D),u=i.user,d=i.setUser,m=i.business,f=i.setBusiness,p=(0,a.useState)(!1),v=(0,r.Z)(p,2),b=v[0],h=v[1],x=(0,o.cI)({resolver:(0,y.y)(te)}),g=x.handleSubmit,j=x.register,N=x.reset,Z=x.watch,_=x.control,T=x.setValue,P=x.formState.errors,E=(0,I.s0)(),D=(Z("logo"),(0,a.useState)(!1)),A=(0,r.Z)(D,2),k=A[0],F=A[1],H=(0,y.i)(m?C.Hv.businesses+"/".concat(null===(n=m.business)||void 0===n?void 0:n._id):C.Hv.businessProfile),U=H.put,O=H.loading;return(0,a.useEffect)((function(){var e,n,t,i,r,a,s,o,c,d=(null===m||void 0===m?void 0:m.business)||u;d&&(N({logo:d.logo?[d.logo]:[],name:d.name||"",motto:d.motto||"",phone:d.phone||"",whatsappNumber:d.whatsappNumber||"",email:d.email||"",street:(null===(e=d.address)||void 0===e?void 0:e.street)||"",address:{address:(0,l.Z)({},d.address),formatted:(null===(n=d.address)||void 0===n?void 0:n.formatted)||""},latlng:null!==d&&void 0!==d&&null!==(t=d.address)&&void 0!==t&&t.latitude&&null!==d&&void 0!==d&&null!==(i=d.address)&&void 0!==i&&i.longitude?(null===d||void 0===d||null===(r=d.address)||void 0===r?void 0:r.latitude)+","+(null===d||void 0===d||null===(a=d.address)||void 0===a?void 0:a.longitude):"",description:d.description||"",gstin:d.gstin||"",pan:d.pan||"",ifsc:d.ifsc||"",domain:d.domain||"",chatbotDomain:(null===(s=d.chatbot)||void 0===s?void 0:s.domain)||"",favicon:d.favicon?[d.favicon]:[]}),null!==d&&void 0!==d&&null!==(o=d.address)&&void 0!==o&&o.latitude&&null!==d&&void 0!==d&&null!==(c=d.address)&&void 0!==c&&c.longitude&&F(!0))}),[u,m]),(0,w.jsxs)("form",{className:"grid gap-1",onSubmit:g((function(e){if(e.address){if(e.address=(0,l.Z)((0,l.Z)({},e.address.address),{},{street:e.street,formatted:e.address.formatted}),e.latlng){var n=e.latlng.split(","),t=(0,r.Z)(n,2),i=t[0],a=t[1];e.address.latitude=i,e.address.longitude=a}delete e.street,delete e.latlng}var s=e.logo[0],o=e.favicon[0],c=new FormData;null!==s&&void 0!==s&&s.type?c.append("logo",s):s||c.append("logo",""),null!==o&&void 0!==o&&o.type?c.append("favicon",o):o||c.append("favicon",""),c.append("name",e.name),c.append("motto",e.motto),c.append("phone",e.phone),c.append("email",e.email),c.append("address",JSON.stringify(e.address)),c.append("gstin",e.gstin),c.append("pan",e.pan),c.append("ifsc",e.ifsc),c.append("domain",e.domain),e.chatbotDomain&&c.append("chatbotDomain",e.chatbotDomain.replace(/^(?:https?:\/\/)?(?:www\.)?([^\/?]+)(?:\/[^?]+)?.*/,"$1")),c.append("whatsappNumber",e.whatsappNumber),c.append("description",e.description),U(c).then((function(e){var n=e.data;if(!n.success)return(0,S.N)({type:"error",message:n.message});m?f((function(e){return(0,l.Z)((0,l.Z)({},e),{},{business:n.data})})):d(n.data),(0,S.N)((0,l.Z)({type:"information",message:"Updates have been saved."},b&&{callback:function(){return E(C.Hb.dashboard.replace("*","")+C.Hb.settings.baseUrl.replace("*","")+C.Hb.settings.bankDetails,{state:{next:!0}})}}))})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))})),children:[(0,w.jsx)("h3",{children:"Business Information"}),(0,w.jsx)(c.Dj,{thumbnail:!0,control:_,name:"logo",label:"Logo",accept:"image/*"}),(0,w.jsx)(c.Dj,{thumbnail:!0,label:"Favicon",control:_,name:"favicon",accept:".ico"}),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Name"},j("name")),{},{error:P.name})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Business Motto"},j("motto")),{},{error:P.motto})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Phone"},j("phone")),{},{error:P.phone})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Whatapp Business Number"},j("whatsappNumber")),{},{error:P.phone})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Email"},j("email")),{},{error:P.email})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Street Address"},j("street")),{},{error:P.street})),(0,w.jsx)(c.Ph,{label:"City, State, Country",control:_,name:"address",onChange:function(e){var n=e.place.geometry.location.lat(),t=e.place.geometry.location.lng();T("latlng",n+","+t)}}),(0,w.jsx)(c.b6,{control:_,name:"latlng",marker:k,onClick:function(e){F(!0)}}),(0,w.jsx)(c.gx,(0,l.Z)((0,l.Z)({label:"Description"},j("description")),{},{error:P.description})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Domain"},j("domain")),{},{error:P.domain})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Chatbot Domain"},j("chatbotDomain")),{},{error:P.chatbotDomain})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"GSTIN"},j("gstin")),{},{error:P.gstin})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"PAN"},j("pan")),{},{error:P.pan})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"IFSC"},j("ifsc")),{},{error:P.ifsc})),(0,w.jsxs)("div",{className:"flex gap-1 justify-center",children:[(0,w.jsx)("button",{className:"btn",disabled:O,children:"Save Changes"}),t&&(0,w.jsx)("button",{className:"btn",disabled:O,onClick:function(){return h(!0)},children:"Next"})]})]})},le=function(e){var n=e.next,t=(0,a.useContext)(s.D),i=t.user,u=t.setUser,d=t.business,m=t.setBusiness,f=(0,a.useState)(!1),p=(0,r.Z)(f,2),v=p[0],b=p[1],h=(0,I.s0)(),x=(0,o.cI)(),g=x.handleSubmit,j=x.register,N=x.reset,Z=x.formState.errors;(0,a.useEffect)((function(){var e,n,t,l,r=(null===d||void 0===d?void 0:d.business)||i;N({bankName:(null===r||void 0===r||null===(e=r.bankDetails)||void 0===e?void 0:e.bankName)||"",branch:(null===r||void 0===r||null===(n=r.bankDetails)||void 0===n?void 0:n.branch)||"",accNo:(null===r||void 0===r||null===(t=r.bankDetails)||void 0===t?void 0:t.accNo)||"",accName:(null===r||void 0===r||null===(l=r.bankDetails)||void 0===l?void 0:l.accName)||""})}),[i,d]);var _=(0,y.i)(d?C.Hv.businesses+"/".concat(d.business._id):C.Hv.businessProfile),T=_.put,P=_.loading;return(0,w.jsxs)("form",{className:"grid gap-1",onSubmit:g((function(e){T({bankDetails:{bankName:e.bankName,branch:e.branch,accNo:e.accNo,accName:e.accName}}).then((function(e){var n=e.data;if(!n.success)return(0,S.N)({type:"error",message:n.message});d?m((function(e){return(0,l.Z)((0,l.Z)({},e),{},{business:n.data})})):u(n.data),(0,S.N)((0,l.Z)({type:"information",message:"Updates have been saved."},v&&{callback:function(){return h(C.Hb.dashboard.replace("*","")+C.Hb.settings.baseUrl.replace("*","")+C.Hb.settings.ownerDetails,{state:{next:!0}})}}))})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))})),children:[(0,w.jsx)("h3",{children:"Bank Detail"}),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Bank Name"},j("bankName")),{},{error:Z.bankName})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Branch"},j("branch")),{},{error:Z.branch})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Account No."},j("accNo")),{},{error:Z.accNo})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Account Name"},j("accName")),{},{error:Z.accName})),(0,w.jsxs)("div",{className:"flex gap-1 justify-center",children:[(0,w.jsx)("button",{className:"btn",disabled:P,children:"Save Changes"}),n&&(0,w.jsx)("button",{className:"btn",disabled:P,onClick:function(){return b(!0)},children:"Next"})]})]})},re=function(e){var n=e.next,t=(0,a.useContext)(s.D),i=t.user,u=t.setUser,d=t.business,m=t.setBusiness,f=(0,a.useState)(!1),p=(0,r.Z)(f,2),v=p[0],b=p[1],h=(0,I.s0)(),x=(0,o.cI)(),g=x.handleSubmit,j=x.control,N=x.register,Z=x.reset,_=x.watch,T=x.formState.errors,P=(_("signature"),(0,y.i)(d?C.Hv.businesses+"/".concat(d.business._id):C.Hv.businessProfile)),E=P.put,D=P.loading;return(0,a.useEffect)((function(){var e,n,t,l,r,a=(null===d||void 0===d?void 0:d.business)||i;Z({ownerName:(null===a||void 0===a||null===(e=a.ownerDetails)||void 0===e?void 0:e.name)||"",ownerPhone:(null===a||void 0===a||null===(n=a.ownerDetails)||void 0===n?void 0:n.phone)||"",ownerEmail:(null===a||void 0===a||null===(t=a.ownerDetails)||void 0===t?void 0:t.email)||"",signature:null!==a&&void 0!==a&&null!==(l=a.ownerDetails)&&void 0!==l&&l.signature?[null===a||void 0===a||null===(r=a.ownerDetails)||void 0===r?void 0:r.signature]:[]})}),[i,d]),(0,w.jsxs)("form",{className:"grid gap-1",onSubmit:g((function(e){var n=e.signature[0],t=new FormData;null!==n&&void 0!==n&&n.type?t.append("ownerSignature",n):n||t.append("ownerDetails[signature]",""),t.append("ownerDetails[name]",e.ownerName),t.append("ownerDetails[phone]",e.ownerPhone),t.append("ownerDetails[email]",e.ownerEmail),E(t).then((function(e){var n=e.data;if(!n.success)return(0,S.N)({type:"error",message:n.message});d?m((function(e){return(0,l.Z)((0,l.Z)({},e),{},{business:n.data})})):u(n.data),(0,S.N)((0,l.Z)({type:"information",message:"Updates have been saved."},v&&{callback:function(){return h(C.Hb.dashboard.replace("*","")+C.Hb.settings.baseUrl.replace("*","")+C.Hb.settings.termsAndConditions,{state:{next:!0}})}}))})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))})),children:[(0,w.jsx)("h3",{children:"Owner Detail"}),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Name"},N("ownerName")),{},{error:T.ownerName})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Phone"},N("ownerPhone")),{},{error:T.ownerPhone})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Email"},N("ownerEmail")),{},{error:T.ownerEmail})),(0,w.jsx)(c.Dj,{thumbnail:!0,control:j,name:"signature",label:"Signature",accept:"image/*"}),(0,w.jsxs)("div",{className:"flex gap-1 justify-center",children:[(0,w.jsx)("button",{className:"btn",disabled:D,children:"Save Changes"}),n&&(0,w.jsx)("button",{className:"btn",disabled:D,onClick:function(){return b(!0)},children:"Next"})]})]})},ae=u.Ry({nextInvoiceNo:u.Rx().min(1,"Invoice Number can not be less than 1").required().typeError("Enter a valid number"),nextPurchaseNo:u.Rx().min(1,"Invoice Number can not be less than 1").required().typeError("Enter a valid number"),nextReceiptNo:u.Rx().min(1,"Invoice Number can not be less than 1").required().typeError("Enter a valid number"),printCurrency:u.Z_().max(3,"Currency can only be 3 characters long")}),se=function(e){var n=e.next,t=(0,a.useContext)(s.D),u=t.config,d=t.setConfig,m=(0,a.useState)(!1),f=(0,r.Z)(m,2),p=f[0],b=f[1],h=(0,I.s0)(),x=(0,o.cI)({resolver:(0,y.y)(ae)}),g=x.handleSubmit,j=x.register,N=x.reset,_=x.control,T=x.formState.errors,P=(0,a.useState)([]),E=(0,r.Z)(P,2),D=E[0],A=E[1],k=(0,y.i)(C.Hv.userConfig),F=k.get,H=k.put,U=k.loading;return(0,a.useEffect)((function(){var e,n;u&&(N({nextInvoiceNo:u.nextInvoiceNo,nextPurchaseNo:u.nextPurchaseNo,nextReceiptNo:u.nextReceiptNo,printQuoteCurrency:(null===u||void 0===u||null===(e=u.printQuote)||void 0===e?void 0:e.currency)||u.print.currency,printQuoteItemColumns:(null===u||void 0===u||null===(n=u.printQuote)||void 0===n?void 0:n.itemColumns)||u.print.itemColumns,printQuoteBusinessInfo:u.printQuote.businessInfo,printCurrency:u.print.currency,printItemColumns:u.print.itemColumns,printInvoiceNoSuffix:u.print.invoiceNoSuffix,printPurchaseNoSuffix:u.print.purchaseNoSuffix,numberSeparator:null===u||void 0===u?void 0:u.numberSeparator}),A(u.unitsOfMeasure))}),[u]),(0,a.useEffect)((function(){F().then((function(e){var n=e.data;n.success||(0,S.N)({type:"error",message:n.message}),d(n.data)})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))}),[]),(0,w.jsxs)("form",{className:"grid gap-1",onSubmit:g((function(e){H({unitsOfMeasure:D,nextInvoiceNo:e.nextInvoiceNo,nextPurchaseNo:e.nextPurchaseNo,nextReceiptNo:e.nextReceiptNo,numberSeparator:e.numberSeparator,print:{itemColumns:e.printItemColumns,currency:e.printCurrency,invoiceNoSuffix:e.printInvoiceNoSuffix,purchaseNoSuffix:e.printPurchaseNoSuffix},printQuote:{itemColumns:e.printItemColumns,currency:e.printCurrency,businessInfo:e.printQuoteBusinessInfo}}).then((function(e){var n=e.data;if(!n.success)return(0,S.N)({type:"error",message:n.message});d(n.data),(0,S.N)((0,l.Z)({type:"information",message:"Updates have been saved."},p&&{callback:function(){return h(C.Hb.dashboard.replace("*","")+C.Hb.settings.baseUrl.replace("*","")+C.Hb.settings.siteConfig,{state:{next:!0}})}}))})).catch((function(e){return(0,S.N)({type:"error",message:e.message})}))})),children:[(0,w.jsxs)("section",{className:"unitsOfMeasure",children:[(0,w.jsx)("label",{children:"Units Of Measure"}),(0,w.jsxs)("ul",{className:"chips flex align-center",children:[D.map((function(e,n){return(0,w.jsxs)("li",{className:"chip",children:[(0,w.jsx)("span",{children:e}),(0,w.jsx)("button",{type:"button",className:"clear",onClick:function(){return A((function(n){return n.filter((function(n){return n!==e}))}))},children:(0,w.jsx)(Z.aHS,{})})]},n)})),(0,w.jsx)("li",{children:(0,w.jsx)(oe,{onSuccess:function(e){A((function(n){return(0,i.Z)(new Set([].concat((0,i.Z)(n),[e])))}))}})})]})]}),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Next Invoice Number"},j("nextInvoiceNo")),{},{error:T.nextInvoiceNo})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Next Purchase Number"},j("nextPurchaseNo")),{},{error:T.nextPurchaseNo})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Next Receipt Number"},j("nextReceiptNo")),{},{error:T.nextReceiptNo})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Invoice No Suffix"},j("printInvoiceNoSuffix")),{},{error:T.printInvoiceNoSuffix})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Purchase No Suffix"},j("printPurchaseNoSuffix")),{},{error:T.printPurchaseNoSuffix})),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Print Currency"},j("printCurrency")),{},{error:T.printCurrency})),(0,w.jsx)(c.hQ,{label:"Number Separator",control:_,name:"numberSeparator",options:[{label:"Indian",value:"en-IN"},{label:"US",value:"en-US"}]}),(0,w.jsx)(c.rG,{control:_,name:"printItemColumns",className:v,multiple:!0,label:"Print Items Columns",options:[{label:"No",value:"no"},{label:"Product",value:"product"},{label:"Qty",value:"qty"},{label:"Unit",value:"unit"},{label:"Total",value:"total"}]}),(0,w.jsx)(c.II,(0,l.Z)((0,l.Z)({label:"Print Quote Currency"},j("printQuoteCurrency")),{},{error:T.printQuoteCurrency})),(0,w.jsx)(c.rG,{control:_,name:"printQuoteItemColumns",className:v,multiple:!0,label:"Print Quote Items Columns",options:[{label:"No",value:"no"},{label:"Product",value:"product"},{label:"Qty",value:"qty"},{label:"Unit",value:"unit"},{label:"Total",value:"total"}]}),(0,w.jsx)(c.rG,{control:_,name:"printQuoteBusinessInfo",className:v,multiple:!0,label:"Print Quote Business Information",options:[{label:"GSTIN",value:"gstin"},{label:"PAN",value:"pan"},{label:"IFSC",value:"ifsc"},{label:"Bank Name",value:"bank"},{label:"Branch Name",value:"branch"},{label:"Account Number",value:"accountNumber"},{label:"Address",value:"address"},{label:"phone",value:"phone"},{label:"email",value:"email"}]}),(0,w.jsxs)("div",{className:"flex gap-1 justify-center",children:[(0,w.jsx)("button",{className:"btn",disabled:U,children:"Save Changes"}),n&&(0,w.jsx)("button",{className:"btn",disabled:U,onClick:function(){return b(!0)},children:"Next"})]})]})},oe=function(e){var n=e.onSuccess,t=(0,a.useState)(""),i=(0,r.Z)(t,2),l=i[0],s=i[1];return(0,w.jsxs)("div",{className:p,children:[(0,w.jsx)(c.II,{value:l,onChange:function(e){return s(e.target.value)}}),(0,w.jsx)("button",{type:"button",className:"btn",onClick:function(){l&&(n(l),s(""))},children:"Add"})]})},ce=function(){var e,n=(0,I.TH)(),t=(0,a.useState)(null===(e=n.state)||void 0===e?void 0:e.next),i=(0,r.Z)(t,2),l=i[0];i[1];return(0,w.jsxs)("div",{className:d,children:[(0,w.jsx)(c.mQ,{tabs:[{label:"Business Information",path:C.Hb.settings.businessInformation},{label:"Bank Detail",path:C.Hb.settings.bankDetails},{label:"Owner Detail",path:C.Hb.settings.ownerDetails},{label:"Terms & Conditions",path:C.Hb.settings.termsAndConditions},{label:"AI Chat Knowledge Base",path:C.Hb.settings.aiChatKnowledgeBase},{label:"Configurations",path:C.Hb.settings.config},{label:"Site Configurations",path:C.Hb.settings.siteConfig},{label:"Blogs",path:C.Hb.settings.dynamicPages}]}),(0,w.jsxs)(I.Z5,{children:[(0,w.jsx)(I.AW,{path:C.Hb.settings.businessInformation,element:(0,w.jsx)(ie,{next:l})}),(0,w.jsx)(I.AW,{path:C.Hb.settings.bankDetails,element:(0,w.jsx)(le,{next:l})}),(0,w.jsx)(I.AW,{path:C.Hb.settings.ownerDetails,element:(0,w.jsx)(re,{next:l})}),(0,w.jsx)(I.AW,{path:C.Hb.settings.termsAndConditions,element:(0,w.jsx)(E,{next:l})}),(0,w.jsx)(I.AW,{path:C.Hb.settings.config,element:(0,w.jsx)(se,{next:l})}),(0,w.jsx)(I.AW,{path:C.Hb.settings.siteConfig,element:(0,w.jsx)(G,{next:l})}),(0,w.jsx)(I.AW,{path:C.Hb.settings.aiChatKnowledgeBase,element:(0,w.jsx)($,{next:l})}),(0,w.jsx)(I.AW,{path:C.Hb.settings.dynamicPages,element:(0,w.jsx)(ne,{next:l})})]})]})}}}]);
//# sourceMappingURL=178.ff471d47.chunk.js.map