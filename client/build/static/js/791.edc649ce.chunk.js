"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[791],{3791:function(e,s,n){n.r(s),n.d(s,{default:function(){return x}});var a=n(2982),t=n(885),i=n(2791),r=n(4581),l=n(3806),o={content:"sales_content__Kz3Z8",sales:"sales_sales__QhOx8",addSaleForm:"sales_addSaleForm__SFVwQ",itemForm:"sales_itemForm__BLJdR",itemName:"sales_itemName__339eN",mainForm:"sales_mainForm__Jy4by",print:"sales_print__JF35w"},u=n(96),c=n(5454),d=n(1080),m=n(1413),p=n(1134),b=n(1570),f=n(184),_=function(e){var s=e.edit,n=e.onSuccess,a=(0,i.useState)(!1),r=(0,t.Z)(a,2),_=r[0],h=r[1],v=(0,p.cI)({resolver:(0,c.y)(b.Ry({name:b.Z_().required(),phone:b.Z_().required(),password:s?b.Z_():b.Z_().required(),subPlan:b.Z_().required()}))}),x=v.control,g=v.handleSubmit,j=v.register,N=v.reset,Z=v.formState.errors,w=(0,c.i)(d.Hv.businesses+"/".concat((null===s||void 0===s?void 0:s._id)||"")),S=w.post,y=w.put,F=w.loading;return(0,i.useEffect)((function(){var e,n;N({name:(null===s||void 0===s?void 0:s.name)||"",phone:(null===s||void 0===s?void 0:s.phone)||"",password:"",subPlan:(null===s||void 0===s||null===(e=s.subscription)||void 0===e||null===(n=e.plan)||void 0===n?void 0:n._id)||""})}),[s]),(0,f.jsx)("div",{className:"grid gap-1 p-1 ".concat(o.addRoleForm),children:(0,f.jsxs)("form",{autoComplete:"new-password",onSubmit:g((function(e){e.password||delete e.password,(s?y:S)(e).then((function(e){var s=e.data;if(!s.success)return(0,u.N)({type:"error",message:s.message});n(s.data,_)})).catch((function(e){return(0,u.N)({type:"error",message:e.message})}))})),className:"".concat(o.mainForm," grid gap-1"),children:[(0,f.jsx)(l.II,(0,m.Z)((0,m.Z)({label:"Name"},j("name")),{},{required:!0,error:Z.name})),(0,f.jsx)(l.II,(0,m.Z)((0,m.Z)({label:"Phone"},j("phone")),{},{required:!0,error:Z.phone})),(0,f.jsx)(l.II,(0,m.Z)((0,m.Z)({label:"Password",type:"password"},j("password")),{},{required:!s,error:Z.password})),(0,f.jsx)(l.OC,{control:x,label:"Subscription Plan*",name:"subPlan",url:d.Hv.subPlans,getQuery:function(e,s){return{name:e,_id:s}},handleData:function(e){return{label:e.name,value:e._id}}}),(0,f.jsxs)("div",{className:"btns",children:[(0,f.jsx)("button",{className:"btn",disabled:F,children:s?"Update":"Submit"}),!s&&(0,f.jsx)("button",{className:"btn",disabled:F,onClick:function(){h(!0)},children:"Next"})]})]})})},h=n(6871),v=n(6355),x=function(){var e=(0,i.useContext)(r.D),s=e.setBusiness,n=e.setConfig,m=(0,i.useState)([]),p=(0,t.Z)(m,2),b=p[0],x=p[1],g=(0,i.useState)(!1),j=(0,t.Z)(g,2),N=j[0],Z=j[1],w=(0,h.s0)(),S=(0,c.i)(d.Hv.findBusinesses).get;return(0,i.useEffect)((function(){S().then((function(e){var s=e.data;s.success?x(s.data):(0,u.N)({type:"error",message:s.message})})).catch((function(e){return(0,u.N)({type:"error",message:e.message})}))}),[]),(0,f.jsxs)("div",{className:"".concat(o.content," grid gap-1 m-a p-1"),children:[(0,f.jsxs)("div",{className:"flex",children:[(0,f.jsx)("h2",{children:"All Businesses"}),(0,f.jsx)("button",{className:"btn m-a mr-0",onClick:function(){return Z(!0)},children:"Add Business"})]}),(0,f.jsx)(l.iA,{className:o.sales,columns:[{label:"Business"},{label:"Plan"},{label:"Actions"}],children:b.map((function(e){var a,t;return(0,f.jsxs)("tr",{onClick:function(a){["TR","TD"].includes(a.target.nodeName)&&(s({business:e}),n(e.config))},style:{cursor:"pointer"},children:[(0,f.jsx)("td",{children:e.name}),(0,f.jsx)("td",{children:null===(a=e.subscription)||void 0===a||null===(t=a.plan)||void 0===t?void 0:t.name}),(0,f.jsx)(l.p2,{className:o.actions,actions:[{icon:(0,f.jsx)(v.KHI,{}),label:"Edit",callBack:function(){Z(e)}}]})]},e._id)}))}),(0,f.jsx)(u.u,{open:!!N,head:!0,label:"".concat(null!==N&&void 0!==N&&N._id?"View / Update":"Add"," Business"),className:o.addBusinessFormModal,setOpen:function(){Z(null)},children:(0,f.jsx)(_,{edit:null!==N&&void 0!==N&&N._id?N:null,onSuccess:function(e,t){null!==N&&void 0!==N&&N._id?x((function(s){return s.map((function(s){return s._id===e._id?e:s}))})):x((function(s){return[].concat((0,a.Z)(s),[e])})),Z(null),t&&(s({business:e}),n(e.config),w(d.Hb.dashboard.replace("*","")+d.Hb.settings.baseUrl.replace("*","")+d.Hb.settings.businessInformation,{state:{next:t}}))}})})]})}}}]);
//# sourceMappingURL=791.edc649ce.chunk.js.map