"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[170],{601:function(e,s,t){t.r(s),t.d(s,{default:function(){return _}});var a=t(2982),n=t(885),c=t(2791),l=t(4581),r=t(3806),i=t(2202),d=t(8750),o={content:"chat_content__zOulD",subPlans:"chat_subPlans__H3lcW",adminView:"chat_adminView__ubc+2",fullChatModal:"chat_fullChatModal__yf1FM",chatContext:"chat_chatContext__k0EWE",fullChat:"chat_fullChat__WRb26",detail:"chat_detail__qgKty",messages:"chat_messages__BhAuS",placeholder:"chat_placeholder__tiwrY",date:"chat_date__ZPeXL",msg:"chat_msg__UHaM0",user:"chat_user__w6L8V",actions:"chat_actions__04l0D",btn:"chat_btn__4OyPB"},h=t(5454),u=t(1080),m=t(358),x=t(184),j=function(e){var s=e.msg,t=e.style;return(0,x.jsxs)("div",{className:"".concat(o.msg," ").concat(o[s.role]),style:t,children:["assistant"===s.role&&(0,x.jsxs)("div",{className:o.actions,children:[s.like&&(0,x.jsx)(m.aMS,{}),!1===s.like&&(0,x.jsx)(m.fA,{})]}),(0,x.jsx)("p",{className:o.content,children:s.content}),(0,x.jsx)(r.W7,{format:"hh:mma",children:s.createdAt})]})},f=function(e){var s,t,a,l,i=e.chat,h=(0,c.useState)(!1),u=(0,n.Z)(h,2),m=u[0],f=u[1];return(0,x.jsxs)("div",{className:"grid gap-1 ".concat(o.fullChat),children:[(0,x.jsxs)("div",{className:"grid p-1 gap-1 ".concat(o.detail),children:[(0,x.jsxs)("div",{className:o.user,children:[(0,x.jsx)("h4",{children:null===(s=i.user)||void 0===s?void 0:s.name}),(0,x.jsx)("p",{children:null===(t=i.user)||void 0===t?void 0:t.phone}),(0,x.jsx)("p",{children:null===(a=i.user)||void 0===a?void 0:a.email})]}),(0,x.jsxs)("div",{className:o.other,children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Chat Started: "}),(0,x.jsx)(r.W7,{format:"DD MMM YYYY hh:mma",children:i.createdAt})]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Last Message: "}),(0,x.jsx)(r.W7,{format:"DD MMM YYYY hh:mma",children:i.updatedAt})]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Total Messages: "}),i.messages.length-1]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Assistant Response: "}),i.messages.filter((function(e){return"assistant"===e.role})).length]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Total Liked Messages: "}),i.messages.filter((function(e){return"assistant"===e.role&&!0===e.like})).length]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Total Disliked Messages: "}),i.messages.filter((function(e){return"assistant"===e.role&&!1===e.like})).length]})]}),(0,x.jsx)("button",{className:"btn",onClick:function(){return f(!m)},children:"View Context"})]}),(0,x.jsx)("div",{className:o.messages,children:i.messages.filter((function(e){return"System"!==e.name})).map((function(e,s,t){return(0,x.jsxs)(c.Fragment,{children:[t[s-1]&&new Date(t[s-1].createdAt).getDate()!==new Date(e.createdAt).getDate()&&(0,x.jsx)("p",{className:o.date,children:(0,x.jsx)(r.W7,{format:"DD MMM YYYY",children:e.createdAt})}),0===s&&(0,x.jsx)("p",{className:o.date,children:(0,x.jsx)(r.W7,{format:"DD MMM YYYY",children:e.createdAt})}),(0,x.jsx)(j,{msg:e})]},e._id)}))}),m&&(0,x.jsx)(d.u,{open:m,setOpen:f,head:!0,label:"Context",children:(0,x.jsx)("div",{className:o.chatContext,children:null===(l=i.messages[0])||void 0===l?void 0:l.content.split("\n").map((function(e,s){return e?(0,x.jsx)("p",{children:e},s):null}))})})]})},g=t(5804),_=function(e){var s=e.setSidebarOpen,t=(0,c.useContext)(l.D),m=t.user,j=t.checkPermission,_=(0,c.useState)([]),p=(0,n.Z)(_,2),v=p[0],M=p[1],b=(0,c.useState)(null),D=(0,n.Z)(b,2),N=D[0],Y=D[1],C=(0,h.i)(u.Hv.chats),k=C.get,A=C.loading,y=(0,h.i)(u.Hv.chats+"/{ID}").remove;return(0,c.useEffect)((function(){k().then((function(e){var s=e.data;if(s.success)return M(s.data)})).catch((function(e){return(0,d.N)({type:"error",message:e.message})}))}),[]),(0,x.jsxs)("div",{className:"".concat(o.content," grid gap-1 m-a p-1"),children:[(0,x.jsx)("div",{className:"flex",children:(0,x.jsxs)("div",{className:"flex align-center pointer gap_5  ml-1",onClick:function(){return s((function(e){return!e}))},children:[(0,x.jsx)(g.Ps6,{style:{fontSize:"1.75rem"}}),(0,x.jsx)("h2",{children:"All Chats"})]})}),(0,x.jsx)(r.iA,{loading:A,className:"".concat(o.subPlans," ").concat("admin"===m.userType?o.adminView:""),columns:[{label:"Date"},{label:"User"},{label:"Topic"},{label:"Total Messages"},{label:"Token Usage"},{label:"Action",className:"action"}],children:v.map((function(e){var s;return(0,x.jsxs)("tr",{style:{cursor:"pointer"},children:[(0,x.jsx)("td",{children:(0,x.jsx)(r.W7,{format:"DD MMM YYYY hh:mma",children:e.createdAt})}),(0,x.jsx)("td",{children:null===(s=e.user)||void 0===s?void 0:s.name}),(0,x.jsx)("td",{children:e.topic}),(0,x.jsx)("td",{children:e.messages.length-1}),(0,x.jsx)("td",{children:e.tokenUsage}),(0,x.jsx)(r.p2,{className:o.actions,actions:[{icon:(0,x.jsx)(i.z5B,{}),label:"View",callBack:function(){Y(e)}}].concat((0,a.Z)(j("chat_delete")?[{icon:(0,x.jsx)(i.lp8,{}),label:"Delete",callBack:function(){return(0,d.N)({type:"confirmation",message:"Are you sure you want to remove this Chat?",callback:function(){y({},{params:{"{ID}":e._id}}).then((function(s){var t=s.data;t.success?M((function(s){return s.filter((function(s){return s._id!==e._id}))})):(0,d.N)({type:"error",message:t.message})}))}})}}]:[]))})]},e._id)}))}),(0,x.jsx)(d.u,{open:N,head:!0,label:"Chat",className:o.fullChatModal,setOpen:function(){return Y(null)},children:(0,x.jsx)(f,{chat:N})})]})}}}]);
//# sourceMappingURL=170.bd9d7647.chunk.js.map