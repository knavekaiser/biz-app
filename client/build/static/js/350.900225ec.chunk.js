"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[350],{8350:function(e,n,a){a.r(n),a.d(n,{default:function(){return v}});var r=a(2982),t=a(885),i=a(2791),s=a(4581),o=a(6884),u=a(6355),l=a(96),c={content:"subPlans_content__YbSmA",subPlans:"subPlans_subPlans__5xMRL",addSubPlanFormModal:"subPlans_addSubPlanFormModal__EOAlu"},d=a(5454),m=a(1080),x=a(1413),b=a(1134),h=a(1570),p=a(184),f=h.Ry({name:h.Z_().required(),price:h.Rx().min(0,"Price Can't be less than 0").required().typeError("Please enter a valid number"),duration:h.Rx().min(1,"Please enter more than 0").required().typeError("Please enter a valid number"),maxProduct:h.Rx().min(1,"Please enter more than 0").required().typeError("Please enter a valid number"),maxAiChatToken:h.Rx().min(1,"Please enter more than 0").required().typeError("Please enter a valid number"),maxAiChatContextToken:h.Rx().min(1,"Please enter more than 0").required().typeError("Please enter a valid number")}),P=function(e){var n=e.edit,a=e.onSuccess,r=(0,b.cI)({resolver:(0,d.y)(f)}),t=r.handleSubmit,s=r.register,u=r.reset,c=r.formState.errors,h=(0,d.i)(m.Hv.subPlans+"/".concat((null===n||void 0===n?void 0:n._id)||"")),P=h.post,v=h.put,C=h.loading;return(0,i.useEffect)((function(){var e,a,r;u((0,x.Z)((0,x.Z)({},n),{},{maxProduct:null===n||void 0===n||null===(e=n.features)||void 0===e?void 0:e.maxProduct,maxAiChatToken:null===n||void 0===n||null===(a=n.features)||void 0===a?void 0:a.maxAiChatToken,maxAiChatContextToken:null===n||void 0===n||null===(r=n.features)||void 0===r?void 0:r.maxAiChatContextToken}))}),[n]),(0,p.jsxs)("form",{onSubmit:t((function(e){e.features={maxProduct:e.maxProduct,maxAiChatToken:e.maxAiChatToken,maxAiChatContextToken:e.maxAiChatContextToken},delete e.maxProduct,(n?v:P)((0,x.Z)({},e)).then((function(e){var n=e.data;if(!n.success)return(0,l.N)({type:"error",message:n.message});a(n.data)})).catch((function(e){return(0,l.N)({type:"error",message:e.message})}))})),className:"grid gap-1 p-1",children:[(0,p.jsx)(o.II,(0,x.Z)((0,x.Z)({label:"Name"},s("name")),{},{required:!0,error:c.name})),(0,p.jsx)(o.II,(0,x.Z)((0,x.Z)({label:"Price"},s("price")),{},{type:"number",required:!0,error:c.price})),(0,p.jsx)(o.II,(0,x.Z)((0,x.Z)({label:"Duration"},s("duration")),{},{type:"number",required:!0,error:c.duration})),(0,p.jsx)("h3",{children:"Features"}),(0,p.jsx)(o.II,(0,x.Z)((0,x.Z)({label:"Max number of Products"},s("maxProduct")),{},{type:"number",required:!0,error:c.maxProduct})),(0,p.jsx)(o.II,(0,x.Z)((0,x.Z)({label:"Max AI Chat Token"},s("maxAiChatToken")),{},{type:"number",required:!0,error:c.maxAiChatToken})),(0,p.jsx)(o.II,(0,x.Z)((0,x.Z)({label:"Max AI Chat Context Token"},s("maxAiChatContextToken")),{},{type:"number",required:!0,error:c.maxAiChatContextToken})),(0,p.jsx)("div",{className:"btns",children:(0,p.jsx)("button",{className:"btn",disabled:C,children:n?"Update":"Submit"})})]})},v=function(){var e=(0,i.useContext)(s.D).checkPermission,n=(0,i.useState)([]),a=(0,t.Z)(n,2),x=a[0],b=a[1],h=(0,i.useState)(null),f=(0,t.Z)(h,2),v=f[0],C=f[1],k=(0,i.useState)(!1),j=(0,t.Z)(k,2),A=j[0],_=j[1],y=(0,d.i)(m.Hv.subPlans),Z=y.get,g=y.loading,I=(0,d.i)(m.Hv.subPlans+"/{ID}").remove;return(0,i.useEffect)((function(){Z().then((function(e){var n=e.data;if(n.success)return b(n.data)})).catch((function(e){return(0,l.N)({type:"error",message:e.message})}))}),[]),(0,p.jsxs)("div",{className:"".concat(c.content," grid gap-1 m-a p-1"),children:[(0,p.jsxs)("div",{className:"flex",children:[(0,p.jsx)("h2",{children:"All Subscription Plans"}),e("sub_plan_create")&&(0,p.jsx)("button",{className:"btn m-a mr-0",onClick:function(){return _(!0)},children:"Add Plan"})]}),(0,p.jsx)(o.iA,{loading:g,className:c.subPlans,columns:[{label:"Name"},{label:"Duration"},{label:"Price"},{label:"Action"}],children:x.map((function(n){return(0,p.jsxs)("tr",{onClick:function(){C(n),_(!0)},style:{cursor:"pointer"},children:[(0,p.jsx)("td",{children:n.name}),(0,p.jsxs)("td",{children:[n.duration.toLocaleString()," days"]}),(0,p.jsx)("td",{children:n.price.toLocaleString()}),(0,p.jsx)(o.p2,{className:c.actions,actions:[{icon:(0,p.jsx)(u.KHI,{}),label:"Edit",callBack:function(){C(n),_(!0)}}].concat((0,r.Z)(e("sub_plan_delete")?[{icon:(0,p.jsx)(u.lp8,{}),label:"Delete",callBack:function(){return(0,l.N)({type:"confirmation",message:"Are you sure you want to remove this Plan?",callback:function(){I({},{params:{"{ID}":n._id}}).then((function(e){var a=e.data;a.success?b((function(e){return e.filter((function(e){return e._id!==n._id}))})):(0,l.N)({type:"error",message:a.message})}))}})}}]:[]))})]},n._id)}))}),(0,p.jsx)(l.u,{open:A,head:!0,label:"".concat(v?"View / Update":"Add"," Subscription Plan"),className:c.addSubPlanFormModal,setOpen:function(){C(null),_(!1)},children:(0,p.jsx)(P,{edit:v,onSuccess:function(e){v?(b((function(n){return n.map((function(n){return n._id===e._id?e:n}))})),C(null)):b((function(n){return[].concat((0,r.Z)(n),[e])})),_(!1)}})})]})}}}]);
//# sourceMappingURL=350.900225ec.chunk.js.map