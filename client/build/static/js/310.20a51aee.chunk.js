"use strict";(self.webpackChunkcash_app=self.webpackChunkcash_app||[]).push([[310],{310:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var a=t(3806),l="settings_container__jOWsZ",i=t(1080),r=t(6871),s=t(4942),o=t(1413),c=t(4925),u=t(2982),d=t(885),f=t(2791),m=t(1134),v=t(5454),p=t(96),b=t(184),x=["fieldName"],h=function(e){for(var n=e.fields,t=void 0===n?[]:n,l=e.value,r=void 0===l?[]:l,u=e.onSuccess,v=e.includeValue,p=(0,m.cI)(),h=p.handleSubmit,g=p.register,y=p.control,j=p.watch,Z=p.reset,S=p.getValues,N=p.formState.errors,T=j("fields"),F=0;F<t.length;F++){var I=t[F];j("".concat(I.name,".filterType"))}return(0,f.useEffect)((function(){var e={fields:r.map((function(e){return e.fieldName}))};r.forEach((function(n){var t=n.fieldName,a=(0,c.Z)(n,x);Object.entries(a).forEach((function(n){var a=(0,d.Z)(n,2),l=a[0],i=a[1];e[t]=(0,o.Z)({},e[t]),void 0!==i&&(e[t][l]=i)}))})),Z(e)}),[]),(0,b.jsxs)("form",{onSubmit:h((function(e){var n=[];e.fields.forEach((function(a){var l,i,r,s,c,u,d,f,m,p,b,x=t.find((function(e){return e.name===a}));x&&n.push((0,o.Z)((0,o.Z)((0,o.Z)({fieldName:a},["input","textarea"].includes(x.fieldType)&&(0,o.Z)({filterType:(null===(l=e[a])||void 0===l?void 0:l.filterType)||"textSearch"},v&&(0,o.Z)((0,o.Z)({},"minMax"!==(null===(i=e[a])||void 0===i?void 0:i.filterType)&&{value:null===(r=e[a])||void 0===r?void 0:r.value}),"minMax"===(null===(s=e[a])||void 0===s?void 0:s.filterType)&&{min:null===(c=e[a])||void 0===c?void 0:c.min,max:null===(u=e[a])||void 0===u?void 0:u.max}))),["slider","range"].includes(null===(d=e[a])||void 0===d?void 0:d.filterType)&&{min:null===(f=e[a])||void 0===f?void 0:f.min,max:null===(m=e[a])||void 0===m?void 0:m.max}),["select","combobox"].includes(x.fieldType)&&(0,o.Z)({filterStyle:null===(p=e[a])||void 0===p?void 0:p.filterStyle},v&&{value:null===(b=e[a])||void 0===b?void 0:b.value})))})),u(n)})),className:"p-1 grid gap-1",children:[(0,b.jsx)(a.rG,{control:y,name:"fields",multiple:!0,label:"Filter Fields",sortable:!0,options:(r.length?t.sort((function(e,n,t){return null!==r&&void 0!==r&&r.includes(e.value)?r.findIndex((function(n){return n===e.value}))>r.findIndex((function(e){return e===n.value}))?1:-1:1})).reverse().map((function(e,n,t){return(0,o.Z)((0,o.Z)({},e),{},{order:t.length-n})})):t).map((function(e){return{label:e.label,value:e.name,data:e}}))}),null===T||void 0===T?void 0:T.map((function(e,n){var l=t.find((function(n){return n.name===e}));if(!l)return null;if(["input","textarea"].includes(l.fieldType)){if("string"===l.dataType)return(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{children:[(0,b.jsxs)("strong",{children:[l.label,":"]})," Text Search"]}),v&&(0,b.jsx)(a.II,(0,o.Z)({label:"Value"},g("".concat(l.name,".value"))))]},n);var r,c;if("number"===l.dataType)return(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"mb_5",children:[(0,b.jsxs)("strong",{children:[l.label,":"]})," "]}),(0,b.jsx)(a.hQ,{control:y,name:"".concat(l.name,".filterType"),label:"Filter Style",options:[{label:"Min-Max",value:"minMax"},{label:"Exact Match",value:"match"},{label:"Range",value:"range"}],formOptions:{required:"Select an option"}}),!v&&["slider","range"].includes(S("".concat(l.name,".filterType")))&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.II,(0,o.Z)((0,o.Z)({type:"number",label:"Min"},g("".concat(l.name,".min"),{required:"Please enter a value"})),{},{error:null===(r=N[l.name])||void 0===r?void 0:r.min})),(0,b.jsx)(a.II,(0,o.Z)((0,o.Z)({type:"number",label:"Max"},g("".concat(l.name,".max"),{required:"Please enter a value"})),{},{error:null===(c=N[l.name])||void 0===c?void 0:c.max}))]}),v&&(0,b.jsxs)(b.Fragment,{children:["minMax"===S("".concat(l.name,".filterType"))&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.II,(0,o.Z)({type:"number",label:"Minimum"},g("".concat(l.name,".min")))),(0,b.jsx)(a.II,(0,o.Z)({type:"number",label:"Maximum"},g("".concat(l.name,".max"))))]}),"match"===S("".concat(l.name,".filterType"))&&(0,b.jsx)(a.II,(0,o.Z)({type:"number",label:"Value"},g("".concat(l.name,".value"))))]})]},n)}else if(["select","combobox"].includes(l.fieldType))return(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"mb_5",children:(0,b.jsxs)("strong",{children:[l.label,":"]})}),v?(0,b.jsx)(a.OC,(0,o.Z)((0,o.Z)((0,o.Z)({label:"Value",multiple:!0,control:y,name:"".concat(l.name,".value")},"predefined"===l.optionType&&{options:l.options}),"collection"===l.optionType&&{url:"".concat(i.Hv.dynamic,"/").concat(l.collection)}),{},{getQuery:function(e,n){return(0,o.Z)((0,o.Z)({},e&&(0,s.Z)({},l.optionLabel,e)),n&&(0,s.Z)({},l.optionValue,n))},handleData:function(e){return{label:e[l.optionLabel],value:e[l.optionValue]}}})):(0,b.jsx)(a.hQ,{control:y,name:"".concat(l.name,".filterStyle"),label:"Filter Style",options:[{label:"List",value:"list"},{label:"Dropdown",value:"dropdown"}],formOptions:{required:"Select an option"}})]},n)})),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("button",{className:"btn",children:"Update"})})]})},g=function(){var e,n,t,l,r=(0,f.useState)([]),s=(0,d.Z)(r,2),o=s[0],c=s[1],x=(0,f.useState)(!1),g=(0,d.Z)(x,2),y=g[0],j=g[1],Z=(0,m.cI)(),S=Z.handleSubmit,N=(Z.register,Z.reset),T=Z.watch,F=Z.setValue,I=Z.control,C=(Z.formState.errors,(0,f.useState)(null)),M=(0,d.Z)(C,2),w=M[0],O=M[1],V=(0,v.i)(i.Hv.storeConfig),E=V.get,_=V.put,k=(V.loading,(0,f.useState)([])),q=(0,d.Z)(k,2),H=q[0],Q=q[1],U=(0,v.i)(i.Hv.homeCategories).get;(0,f.useEffect)((function(){N({sidebarFilters:(null===w||void 0===w?void 0:w.sidebarFilters)||[]})}),[w]);var L=T("category"),A=T("subcategory"),D=T("sidebarFilters");return(0,f.useEffect)((function(){E().then((function(e){var n=e.data;n.success?O(n.data):(0,p.N)({type:"error",message:n.message})})).catch((function(e){return(0,p.N)({type:"error",message:e.message})})),U().then((function(e){var n=e.data;n.success?Q(n.data):(0,p.N)({type:"error",message:n.message})})).catch((function(e){return(0,p.N)({type:"error",message:e.message})}))}),[]),(0,b.jsxs)("form",{className:"grid gap-1",onSubmit:S((function(e){var n={sidebarFilters:e.sidebarFilters};_(n).then((function(e){var n=e.data;n.success?(O(n.data),(0,p.N)({type:"information",message:"Updates have been saved."})):(0,p.N)({type:"error",message:n.message})})).catch((function(e){return(0,p.N)({type:"error",data:e.message})}))})),children:[(0,b.jsxs)("div",{className:"flex gap-1 justify-center align-center mb-1",children:[(0,b.jsx)(a.OC,{label:"Category",control:I,name:"category",options:H.map((function(e){return{label:e.name,value:e.name}})),onChange:function(){return F("subcategory","")}}),(0,b.jsx)(a.OC,{label:"Subcategory",control:I,name:"subcategory",options:((null===(e=H.find((function(e){return e.name===L})))||void 0===e?void 0:e.subCategories)||[]).map((function(e){return{label:e.name,value:e.name,fields:e.fields}})),onChange:function(e){c((e.fields||[]).filter((function(e){return!(["file"].includes(e.inputType)||["whatsappNumber"].includes(e.name))})))}})]}),L&&A&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex gap-1 justify-space-between align-center mb-1",children:[(0,b.jsx)("h5",{children:"Sidebar filters"}),(0,b.jsx)("button",{className:"btn",type:"button",onClick:function(){return j(!0)},children:"Update Sidebar Filters"})]}),(0,b.jsx)(a.iA,{columns:[{label:"Field"},{label:"Filter Type"},{label:"Filter Style"}],children:null===D||void 0===D||null===(n=D.find((function(e){return e.category===L&&e.subcategory===A})))||void 0===n||null===(t=n.filters)||void 0===t?void 0:t.map((function(e,n){return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:e.fieldName}),(0,b.jsx)("td",{children:e.filterType}),(0,b.jsx)("td",{children:e.filterStyle})]},n)}))})]}),(0,b.jsx)(p.u,{open:y,head:!0,label:"Update Sidebar Filters",setOpen:function(){return j(!1)},children:(0,b.jsx)(h,{fields:o,value:null===D||void 0===D||null===(l=D.find((function(e){return e.category===L&&e.subcategory===A})))||void 0===l?void 0:l.filters,onSuccess:function(e){F("sidebarFilters",[].concat((0,u.Z)(D.filter((function(e){return!(e.category===L&&e.subcategory===A)}))),[{category:L,subcategory:A,filters:e}])),j(!1)}})}),(0,b.jsx)("button",{className:"btn",children:"Save Changes"})]})},y=function(){return(0,b.jsxs)("div",{className:l,children:[(0,b.jsx)(a.mQ,{tabs:[{label:"Site Configurations",path:"site-config"}]}),(0,b.jsx)(r.Z5,{children:(0,b.jsx)(r.AW,{path:i.Hb.settings.siteConfig,element:(0,b.jsx)(g,{})})})]})}}}]);
//# sourceMappingURL=310.20a51aee.chunk.js.map